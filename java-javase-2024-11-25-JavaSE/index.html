<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="google-site-verification" content="azjuzl6CEBYLWBS0W60kU1RbFwc0BDUjcamBd7sPoaM"><meta name="msvalidate.01" content="8E382266D67FD65851244642973CB195"><meta name="baidu-site-verification" content="codeva-caG341xjbS"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="../assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="../assets/apple-touch-icon.png"><link rel="alternate" href="../rss.xml" title="Maple" type="application/rss+xml"><link rel="alternate" href="../atom.xml" title="Maple" type="application/atom+xml"><link rel="alternate" type="application/json" title="Maple" href="https://blog.fxink.cn/feed.json"><link rel="preconnect" href="https://s4.zstatic.net"><link rel="preconnect" href="https://at.alicdn.com"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&display=swap&subset=latin,latin-ext" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="../css/app.css?v=0.4.16"><link rel="modulepreload" href="../js/chunk-27ZN6DSU.js"><link rel="modulepreload" href="../js/chunk-5EDHXAQ4.js"><link rel="modulepreload" href="../js/chunk-HJJEKW74.js"><link rel="modulepreload" href="../js/chunk-HPTF7WQM.js"><link rel="modulepreload" href="../js/chunk-UFWAGIZD.js"><link rel="modulepreload" href="../js/chunk-WIQECBEN.js"><link rel="modulepreload" href="../js/comments-VYBOF5SL.js"><link rel="modulepreload" href="../js/copy-tex-GAJOL3PI.js"><link rel="modulepreload" href="../js/index.esm-DEBW3XVN.js"><link rel="modulepreload" href="../js/post-OYCCXBF4.js"><link rel="modulepreload" href="../js/quicklink-LDE43DPI.js"><link rel="modulepreload" href="../js/search-JCLSFG7Z.js"><link rel="modulepreload" href="../js/siteInit.js"><link rel="modulepreload" href="../js/waline-NVSVNCZW.js"><link rel="stylesheet" href="../css/comments-LAB2J3GR.css" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="../css/siteInit.css" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="../css/waline-7JVHAYE3.css" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="preload" href="https://image.fxink.cn/maple/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E6%B8%85%E6%99%A8-%E9%9B%AA%E5%B1%B1.png" as="image" fetchpriority="high"><link rel="preload" href="https://image.fxink.cn/maple/15749358292668736.png" as="image" fetchpriority="high"><link rel="preload" href="https://image.fxink.cn/maple/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E5%A4%95%E9%98%B3%E4%B8%8B%E7%9A%84%E9%A3%9E%E6%9C%BA-%E6%97%85%E8%A1%8C.png" as="image" fetchpriority="high"><link rel="preload" href="https://image.fxink.cn/maple/wallhaven-9mqvz1.webp" as="image" fetchpriority="high"><link rel="preload" href="https://image.fxink.cn/maple/%E5%A5%A5%E8%BF%AA%20RS%20e-tron%20GT%20prototype%204k%E5%A3%81%E7%BA%B8_%E5%BD%BC%E5%B2%B8%E5%9B%BE%E7%BD%91.jpg" as="image" fetchpriority="high"><link rel="preload" href="https://image.fxink.cn/maple/15749360863056192.png" as="image" fetchpriority="high"><meta name="keywords" content="Java"><meta name="description" content="为国民幸福而国家富强"><link rel="canonical" href="https://blog.fxink.cn/java-javase-2024-11-25-JavaSE/"><title>JavaSE</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">JavaSE</h1><div class="meta"><span class="item" title="创建时间：2024-11-25 23:26:46"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-11-25T23:26:46+08:00">2024-11-25</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>154k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>2:20</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Maple Plus</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" style="background-image: url(&quot;https://image.fxink.cn/maple/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E6%B8%85%E6%99%A8-%E9%9B%AA%E5%B1%B1.png&quot;);"></li><li class="item" style="background-image: url(&quot;https://image.fxink.cn/maple/15749358292668736.png&quot;);"></li><li class="item" style="background-image: url(&quot;https://image.fxink.cn/maple/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E5%A4%95%E9%98%B3%E4%B8%8B%E7%9A%84%E9%A3%9E%E6%9C%BA-%E6%97%85%E8%A1%8C.png&quot;);"></li><li class="item" style="background-image: url(&quot;https://image.fxink.cn/maple/wallhaven-9mqvz1.webp&quot;);"></li><li class="item" style="background-image: url(&quot;https://image.fxink.cn/maple/%E5%A5%A5%E8%BF%AA%20RS%20e-tron%20GT%20prototype%204k%E5%A3%81%E7%BA%B8_%E5%BD%BC%E5%B2%B8%E5%9B%BE%E7%BD%91.jpg&quot;);"></li><li class="item" style="background-image: url(&quot;https://image.fxink.cn/maple/15749360863056192.png&quot;);"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="../index.html">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="../categories/java/" itemprop="item" rel="index" title="分类于Java"><span itemprop="name">Java<meta itemprop="position" content="0"></span></a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="../categories/java/javase/" itemprop="item" rel="index" title="分类于JavaSE"><span itemprop="name">JavaSE<meta itemprop="position" content="1"></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.fxink.cn/java-javase-2024-11-25-JavaSE/"><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="../assets/avatar.png"><meta itemprop="name" content="Maple Plus"><meta itemprop="description" content="枫的秘密基地, 为国民幸福而国家富强"></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Maple"></span><div class="body md" itemprop="articleBody"><h2 id="继承"><a class="anchor" href="#继承">#</a> 继承</h2>
<h3 id="继承的好处"><a class="anchor" href="#继承的好处">#</a> 继承的好处</h3>
<ol>
<li>提高代码复用性</li>
<li>扩展性和维护性提高</li>
</ol>
<h3 id="继承细节"><a class="anchor" href="#继承细节">#</a> 继承细节</h3>
<ul>
<li>
<p>子类继承父类所有属性和方法，但是父类私有成员必须通过父类提供的公共方法才能访问</p>
</li>
<li>
<p>子类必须调用父类构造器，完成父类初始化 —–子类构造器调用时，首先调用父类构造器</p>
</li>
<li>
<p>创建子类对象时，不管使用子类哪个构造器，默认总会调用父类的无参构造器，如果父类没有无参构造器，则必须在子类用  <mark>super</mark> 去指定使用哪个父类构造器完成对父类的初始化</p>
</li>
<li>
<p>super 使用需要放在构造器第一行，this 和 super 都需要放在构造器第一行，所以它俩不能同时存在构造器</p>
</li>
<li>
<p><mark>Object</mark> 是 JAVA 所有类的基类，父类构造器的调用不限于直接父类，可以一直追溯到 Object 类</p>
</li>
<li>
<p>子类只能直接继承一个父类（单继承机制），但是可以多层继承</p>
</li>
<li>
<p>继承需要符合<mark> is-a</mark> 逻辑（符合常理，不能人继承机器）</p>
</li>
<li>
<p>子类对象查找信息时（<mark>就近原则</mark>）：</p>
<ul>
<li>
<p>首先查看子类局部代码是否有该成员，没有则查看子类是否具有该成员，如果子类有则返回信息</p>
</li>
<li>
<p>如果没有则追溯父类，以此类推追溯到 Object 类</p>
</li>
<li>
<p>Object 类如果还是没有则报错</p>
</li>
</ul>
</li>
</ul>
<h2 id="访问权限修饰符"><a class="anchor" href="#访问权限修饰符">#</a> 访问权限修饰符</h2>
<ul>
<li><strong>public</strong> : 对所有类可见。使用对象：类、接口、变量、方法</li>
<li><strong>default</strong> (即默认，什么也不写）: 只有<strong>同包</strong>内的<strong>所有类</strong>可见，其他包不可见 ，不使用任何修饰符 使用对象：类、接口、变量、方法。</li>
<li><strong>protected</strong> : 同包内的所有类和其他包<strong>子类</strong>可见。protected 修饰的对象：变量、方法，类 <strong>注意：不能修饰外部类，可以修饰内部类</strong>。</li>
<li><strong>private</strong> : 在同一类内可见。使用对象：变量、方法，类 <strong>注意：不能修饰外部类，可以修饰内部类</strong></li>
</ul>
<h2 id="super"><a class="anchor" href="#super">#</a> super</h2>
<h3 id="基本语法"><a class="anchor" href="#基本语法">#</a> 基本语法</h3>
<ul>
<li>访问父类的非<mark> private 属性</mark> <mark>super. 属性名</mark></li>
<li>访问父类的非<mark> private</mark> 方法 <mark>super. 方法名（参数列表）</mark></li>
<li>访问父类构造器<mark> super (参数列表）</mark>，只能出现在构造器的第一行且只能出现一句</li>
</ul>
<h3 id="super细节"><a class="anchor" href="#super细节">#</a> super 细节</h3>
<ul>
<li>
<p>子类有和父类成员重名的属性和方法时，访问父类成员必须用 super</p>
</li>
<li>
<p>子类没有重名的属性或方法时，super（直接从父类找），this == 直接调用方法或属性（从本类开始找，效果等价）</p>
<h3 id="super和this的比较"><a class="anchor" href="#super和this的比较">#</a> super 和 this 的比较</h3>
<table>
<thead>
<tr>
<th style="text-align:left">NO.</th>
<th style="text-align:left">区别</th>
<th style="text-align:left">this</th>
<th style="text-align:left">super</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">访问属性</td>
<td style="text-align:left">访问本类属性，如果没有则向上追溯父类</td>
<td style="text-align:left">从父类查找属性</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">调用方法</td>
<td style="text-align:left">访问本类方法，如果没有则向上追溯父类</td>
<td style="text-align:left">从父类查找方法</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">调用构造器</td>
<td style="text-align:left">调用本类构造器，必须放在构造器首行</td>
<td style="text-align:left">调用父类构造器，必须放在构造器首行</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">特殊</td>
<td style="text-align:left">表示当前对象</td>
<td style="text-align:left">子类中访问父类对象</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h2 id="方法重写"><a class="anchor" href="#方法重写">#</a> 方法重写</h2>
<h3 id="重写细节"><a class="anchor" href="#重写细节">#</a> 重写细节</h3>
<ul>
<li>子类方法的参数，方法名称要和父类完全一样</li>
<li>子类方法返回类型 == 父类方法返回类型 OR 父类方法返回类型的子类（ege: 父类 Object, 子类 String)</li>
<li>子类方法不能缩小父类方法的访问权限 （父：public 子：protected ——&gt; 错误）</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">发生范围</th>
<th style="text-align:left">方法名</th>
<th style="text-align:left">形参列表</th>
<th style="text-align:left">返回类型</th>
<th style="text-align:left">修饰符</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">重载 (overload)</td>
<td style="text-align:left">本类</td>
<td style="text-align:left">必须一样</td>
<td style="text-align:left">类型、个数至少一个不同</td>
<td style="text-align:left">无要求</td>
<td style="text-align:left">无要求</td>
</tr>
<tr>
<td style="text-align:left">重写 (override)</td>
<td style="text-align:left">父子类</td>
<td style="text-align:left">必须一样</td>
<td style="text-align:left">必须相同</td>
<td style="text-align:left">子类返回类型可以是父类返回类型的子类</td>
<td style="text-align:left">子类方法不能缩小父类访问范围</td>
</tr>
</tbody>
</table>
<h2 id="多态"><a class="anchor" href="#多态">#</a> 多态</h2>
<h3 id="方法多态"><a class="anchor" href="#方法多态">#</a> 方法多态</h3>
<ul>
<li>方法的重载（同类）和重写（不同类，继承）体现多态</li>
</ul>
<h3 id="对象多态披着羊皮的狼"><a class="anchor" href="#对象多态披着羊皮的狼">#</a> 对象多态 (披着羊皮的狼)</h3>
<ol>
<li>
<p>importent</p>
<ul>
<li>
<p>一个对象的编译类型和运行类型可以不一致</p>
</li>
<li>
<p>编译类型在定义对象时确定，不能改变</p>
</li>
<li>
<p>运行类型可以变化</p>
</li>
<li>
<p>编译类型看定义时  <code>=</code>  左边</p>
</li>
<li>
<p>运行定义看定义时  <code>=</code>  右边</p>
</li>
<li>
<p><code>Animal animal = new Cat()</code>  运行类型：Cat	编译类型：Animal</p>
</li>
</ul>
</li>
<li>
<p>向上转型（父类引用指向子类对象）</p>
<ul>
<li>可以调用父类的所有成员（遵守访问权限）</li>
<li>不能调用子类的特有成员（子类重写父类的方法可以调用）
<ul>
<li>在编译阶段由编译类型绝对能调用的成员</li>
</ul>
</li>
<li>最终运行结果看子类（运行类型）的具体实现
<ul>
<li>调用方法时，从子类按照就近原则开始查找实现</li>
</ul>
</li>
</ul>
</li>
<li>
<p>向下转型（子类类型 引用名 = （子类类型）父类引用）</p>
<ul>
<li>
<p>只能强转父类的引用，不能强转父类的对象</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">)</span> animal<span class="token punctuation">;</span><span class="token comment">// 强转</span></pre></td></tr></table></figure><blockquote>
<p>编译类型 Cat = 运行类型 Cat</p>
</blockquote>
</li>
<li>
<p>父类的引用必须指向当前目标类型的对象</p>
<blockquote>
<p>引用 animal 原本就指向 Cat，则可以将其强制转换成 Cat 类型，而不能转成 Dog 类型（猫不是狗）</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h3 id="多态细节"><a class="anchor" href="#多态细节">#</a> 多态细节</h3>
<ol>
<li>属性没有重写，属性值看编译类型</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token class-name">Base</span> base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 向上转型</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 结果为 10</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol>
<li>instanceOf 比较操作符，判断对象类型是否为<strong> XX 运行类型</strong>或<strong> XX 运行类型</strong>的子类型</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">BB</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bb instanceOf <span class="token constant">BB</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span></pre></td></tr></table></figure><p>3. 动态绑定机制（<mark>非常重要</mark>）</p>
<ul>
<li>
<p>当调用<mark>对象方法</mark>时，该方法和该对象的<mark>内存地址 / 运行类型</mark>绑定</p>
</li>
<li>
<p>当调用<mark>对象属性</mark>时，<mark>没有动态绑定机制</mark>，哪里声明，哪里使用</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token constant">BASIC</span><span class="token punctuation">.</span>extend<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> dynamic_binding <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 向上转型</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//30</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">sum1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token constant">BASIC</span><span class="token punctuation">.</span>extend<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">geti</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">return</span> i <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">geti</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">return</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token constant">BASIC</span><span class="token punctuation">.</span>extend<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//    public int sum()&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//    return geti() + 10;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//  &#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//    public int sum1()&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//        return i + 10;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">//    &#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">geti</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>       <span class="token keyword">return</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>执行 <code>System.out.println(a.sum());//30</code>  时，首先查找 a 的 sum () 方法，发现 a 没有，故就近原则，查找父类的方法，发现父类存在此方法，但是其中 geti () 方法由于<mark>动态绑定机制</mark>，会调用回 a 的 geti () 方法；</p>
<p>执行 <code>System.out.println(a.sum1());//20</code>  时，首先查找 a 的 sum1 () 方法，发现 a 没有，故就近原则，查找父类的方法，发现父类存在此方法，但是其中 i 是对象属性，没有动态绑定机制，此时在父类声明，则使用父类的属性 i。</p>
</blockquote>
</li>
</ul>
<h2 id="object"><a class="anchor" href="#object">#</a> Object</h2>
<h3 id="运算符"><a class="anchor" href="#运算符">#</a> == 运算符</h3>
<ol>
<li>既可以判断基本类型，又可以判断引用类型</li>
<li>基本类型判断：<strong>值</strong>是否相等</li>
<li>引用类型判断：<strong>地址</strong>是否相等，即判断是不是同一个对象</li>
</ol>
<h3 id="equals方法"><a class="anchor" href="#equals方法">#</a> equals 方法</h3>
<ol>
<li>是 Object 类的方法，只能判断<strong>引用类型</strong></li>
<li>默认判断地址是否相等，子类往往重写此方法 —&gt; 判断<strong>内容</strong>是否相等</li>
</ol>
<h3 id="hashcode方法"><a class="anchor" href="#hashcode方法">#</a> hashCode 方法</h3>
<ol>
<li>提高具有哈希结构的容器的效率</li>
<li>两个引用，如果指向同一个对象，哈希值一定相等，否则不同（即返回的值不同）</li>
<li>哈希值根据地址号由来，哈希值不等同于地址</li>
</ol>
<h3 id="tostring方法"><a class="anchor" href="#tostring方法">#</a> toString 方法</h3>
<ol>
<li>默认返回：全类名 + @ + 哈希值的十六进制字符串</li>
<li>一般重写方法输出属性信息</li>
<li>直接输出对象时，默认调用 toString 方法 <code>System.out.println(monster)</code> &lt;==&gt; <code>monster.toString</code></li>
</ol>
<h2 id="类变量方法"><a class="anchor" href="#类变量方法">#</a> 类变量 / 方法</h2>
<h3 id="基本介绍"><a class="anchor" href="#基本介绍">#</a> 基本介绍</h3>
<ul>
<li>即 static 修饰的类成员</li>
</ul>
<h3 id="细节"><a class="anchor" href="#细节">#</a> 细节</h3>
<ol>
<li>同一个类所有对象共享一份类变量 / 方法</li>
<li>推荐使用<mark>类名。类变量 / 方法名</mark>访问</li>
<li>希望不创建实例也能使用方法，则可以将方法设置成静态方法，当做工具使用。如 Math,Arrary 类等</li>
<li>类方法和普通方法随着类加载而加载，将结构信息存储在方法区，类方法无 this 参数</li>
<li>静态方法只能访问静态成员（遵守访问权限）</li>
<li>非静态方法可以访问静态 / 非静态成员（遵守访问权限）</li>
</ol>
<h3 id="main方法"><a class="anchor" href="#main方法">#</a> main 方法</h3>
<ol>
<li>静态方法 main 可以访问所在类的静态成员，不能访问非静态成员</li>
<li>要访问非静态成员，在 main 方法里创建一个实例即可调用</li>
</ol>
<h2 id="代码块"><a class="anchor" href="#代码块">#</a> 代码块</h2>
<ol>
<li>
<p>static 代码块作用是对类初始化，随着类的加载执行，只执行<strong>一次</strong>，如果是普通代码块，每创建一个对象就执行一次</p>
</li>
<li>
<p>类加载的时机</p>
<ul>
<li>创建对象实例时</li>
<li>创建子类对象实例，父类及父类往上的类也会被加载</li>
<li>使用类的静态成员时</li>
</ul>
</li>
<li>
<p>调用顺序：</p>
<ul>
<li>调用静态代码块和静态属性的优先级一样，如果有多个，按照定义的顺序调用，普通代码块和普通属性同理</li>
</ul>
</li>
<li>
<p>构造器最前面隐含了 super () 和调用普通代码块，最后再执行构造器自己的代码，而静态代码块在类加载时就执行完毕，优先于普通代码块和构造器</p>
</li>
<li>
<p>创建子类对象时（含继承关系），调用顺序如下：</p>
<ul>
<li>父类静态代码块和静态属性初始化（如果有多个，按照定义的顺序调用）</li>
<li>子类静态代码块和静态属性初始化（如果有多个，按照定义的顺序调用）</li>
<li>父类普通代码块和普通属性初始化（如果有多个，按照定义的顺序调用）</li>
<li>父类构造方法</li>
<li>子类普通代码块和普通属性初始化（如果有多个，按照定义的顺序调用）</li>
<li>子类构造方法</li>
</ul>
</li>
<li>
<p>执行时被放在构造器除了 super 方法的最前面</p>
</li>
</ol>
<h2 id="final"><a class="anchor" href="#final">#</a> final</h2>
<h3 id="基础"><a class="anchor" href="#基础">#</a> 基础</h3>
<ol>
<li>修饰的类不可继承</li>
<li>修饰的父类某个方法不可重写</li>
<li>修饰的属性不可更改</li>
<li>修饰的局部变量不可更改</li>
</ol>
<h3 id="细节-2"><a class="anchor" href="#细节-2">#</a> 细节</h3>
<ol>
<li>修饰的属性叫常量，命名要大写</li>
<li>修饰的属性定义时必须赋初值，以后不能再更改（定义时，在构造器中，在代码块中）</li>
<li>修饰的静态属性只能在定义时或静态代码块中赋初值</li>
<li>final 类不能被继承，但可以实例化对象</li>
<li>非 final 类含 final 方法，方法不能重写，可以被继承</li>
<li>如果一个类已经是 final 类，不用再将方法修饰成 final 方法</li>
<li>final 不能修饰构造器</li>
<li>final 和 static 搭配使用，不会导致类加载</li>
</ol>
<h2 id="抽象类"><a class="anchor" href="#抽象类">#</a> 抽象类</h2>
<h3 id="基础-2"><a class="anchor" href="#基础-2">#</a> 基础</h3>
<ul>
<li>
<p>当父类的一些方法不能确定时，可以用 abstract 关键字修饰方法，该方法是抽象方法，修饰的类是抽象类</p>
</li>
<li>
<p>一般抽象类会被继承</p>
</li>
</ul>
<h3 id="细节-3"><a class="anchor" href="#细节-3">#</a> 细节</h3>
<ol>
<li>抽象方法没有方法体</li>
<li>抽象类可以没有抽象方法，但可以有实现方法</li>
<li>抽象方法必须在抽象类中</li>
<li>abstract 只能修饰类和方法</li>
<li>抽象类还是类，可以有任意成员</li>
<li>一个类继承了抽象类，必须实现所有的抽象方法，否则它就必须是抽象类</li>
</ol>
<h2 id="接口"><a class="anchor" href="#接口">#</a> 接口</h2>
<h3 id="基础-3"><a class="anchor" href="#基础-3">#</a> 基础</h3>
<ul>
<li>
<p>概念：接口给出一些没有实现的方法，封装到一起，某个类要使用时，根据情况实现这些抽象方法</p>
</li>
<li>
<p>语法： <code>interface 接口名&#123;……&#125;</code></p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> 类名 <span class="token keyword">implements</span> 接口<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    属性；</pre></td></tr><tr><td data-num="3"></td><td><pre>    方法；</pre></td></tr><tr><td data-num="4"></td><td><pre>    必须实现的接口抽象方法；    </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>接口可以有静态方法，默认方法</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">default</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token comment">// 默认方法</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">okk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token comment">// 静态方法</span></pre></td></tr></table></figure></li>
</ul>
<h3 id="细节-4"><a class="anchor" href="#细节-4">#</a> 细节</h3>
<ol>
<li>接口不能被实例化</li>
<li>接口中所有方法是 public 方法，抽象方法不必再用 abstract 修饰</li>
<li>一个普通类使用接口，必须实现接口的所有方法</li>
<li>抽象类实现接口，可以不实现接口方法</li>
<li>一个类可以实现多个接口</li>
<li>接口的属性只能是 final，默认隐藏修饰  <code>public static final</code> , 如 int i = 1;  默认 public static final int i = 1, 因此属性必须初始化 (final)</li>
<li>接口属性访问： <code>接口名.属性名</code></li>
<li>接口可以继承多个其它接口，但不能继承类</li>
<li>接口修饰符只能是 public 或默认（什么也不写），和类一样</li>
</ol>
<h3 id="接口-vs-继承"><a class="anchor" href="#接口-vs-继承">#</a> 接口 VS 继承</h3>
<ol>
<li>解决的问题不同
<ul>
<li>继承：代码的复用性和可维护性</li>
<li>接口：设计各种规范方法，让类实现</li>
</ul>
</li>
<li>继承是 <strong>is-a</strong> 关系，接口是<strong> like-a</strong> 关系，接口更灵活</li>
<li>接口在一定程度实现代码解耦</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>interface_all<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * 继承和类的区别</pre></td></tr><tr><td data-num="6"></td><td><pre> * 继承是子类生来就有的技能</pre></td></tr><tr><td data-num="7"></td><td><pre> * 接口相当于在后期学习扩展获得的技能</pre></td></tr><tr><td data-num="8"></td><td><pre> */</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> extendsVSinterface <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        monkeySon monkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">monkeySon</span><span class="token punctuation">(</span><span class="token string">"悟空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        monkey<span class="token punctuation">.</span><span class="token function">climb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        monkey<span class="token punctuation">.</span><span class="token function">swimming</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="18"></td><td><pre> * fish 接口</pre></td></tr><tr><td data-num="19"></td><td><pre> */</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">interface</span> fish <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">swimming</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="26"></td><td><pre> * monkey 父类</pre></td></tr><tr><td data-num="27"></td><td><pre> */</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">class</span> monkey <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">monkey</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">climb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"会爬树"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="46"></td><td><pre> * monkeySon 子类</pre></td></tr><tr><td data-num="47"></td><td><pre> */</pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">class</span> monkeySon <span class="token keyword">extends</span> monkey <span class="token keyword">implements</span> fish <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token function">monkeySon</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token comment">// 子类生来就有的技能</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">climb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"会爬树"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token comment">// 子类后期学习获得技能</span></pre></td></tr><tr><td data-num="60"></td><td><pre></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">swimming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"会游泳"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="接口的多态特性"><a class="anchor" href="#接口的多态特性">#</a> 接口的多态特性</h3>
<ol>
<li>多态参数</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>interface_all<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * 接口的多态参数</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> polParameter <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 创建手机和相机对象</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token comment">// 接口类型的变量 computer 可以指向实现了接口的类的对象实例</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        computer computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        computer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        computer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="20"></td><td><pre> * computer</pre></td></tr><tr><td data-num="21"></td><td><pre> */</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">interface</span> computer <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="28"></td><td><pre> * phone</pre></td></tr><tr><td data-num="29"></td><td><pre> */</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">class</span> phone <span class="token keyword">implements</span> computer <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机在运行..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="37"></td><td><pre> * camera</pre></td></tr><tr><td data-num="38"></td><td><pre> */</pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">class</span> camera <span class="token keyword">implements</span> computer <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"相机在运行..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol>
<li>多态数组</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>computer<span class="token punctuation">[</span><span class="token punctuation">]</span> computers <span class="token operator">=</span> <span class="token keyword">new</span> computer<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        computers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        computers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ol>
<li>接口存在多态传递现象
<ul>
<li>由于 object &lt;— camera ,phone 实现接口的同时，也相当于实现了 object</li>
</ul>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//object</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">interface</span> object <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//computer</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">interface</span> computer <span class="token keyword">extends</span> object <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">//phone</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> phone <span class="token keyword">implements</span> computer <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">//phone 类实现了 object 接口，并实现了接口中的方法</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机object"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">//phone 类实现了 computer 接口，并实现了接口中的方法</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机在运行..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">//phone 类还实现了额外的 call 方法</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机在打电话..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">//camera</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">class</span> camera <span class="token keyword">implements</span> computer <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token comment">//camera 类实现了 object 接口，并实现了接口中的方法</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"相机object"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token comment">//camera 类实现了 computer 接口，并实现了接口中的方法</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"相机在运行..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> polParameter <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token comment">// 多态传递</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        object object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        object<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="内部类"><a class="anchor" href="#内部类">#</a> 内部类</h2>
<h3 id="基础-4"><a class="anchor" href="#基础-4">#</a> 基础</h3>
<p><em><strong>一个类的内部又完整嵌套了另一个类的结构</strong></em></p>
<p><em><strong>类的 5 大成员</strong></em></p>
<ul>
<li>属性</li>
<li>方法</li>
<li>构造器</li>
<li>代码块</li>
<li>内部类</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> outer<span class="token punctuation">&#123;</span><span class="token comment">// 外部类</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">class</span> inner<span class="token punctuation">&#123;</span><span class="token comment">// 内部类</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> otherouter<span class="token punctuation">&#123;</span><span class="token comment">// 外部其他类</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><em><strong>分类</strong></em></p>
<ul>
<li>
<p>定义在外部类局部位置（比如方法内）</p>
<ul>
<li>局部内部类（有类名）</li>
<li>匿名内部类（没有类名，重点）</li>
</ul>
</li>
<li>
<p>定义在外部类的成员位置</p>
<ul>
<li>成员内部类（没有 static 修饰）</li>
<li>静态内部类（有 static 修饰）</li>
</ul>
</li>
</ul>
<h3 id="局部内部类"><a class="anchor" href="#局部内部类">#</a> 局部内部类</h3>
<h4 id="细节-5"><a class="anchor" href="#细节-5">#</a> 细节</h4>
<ol>
<li>局部内部类定义在外部类的局部位置（方法 / 代码块）</li>
<li>可以<strong>直接访问</strong>外部类的所有成员，包括私有的</li>
<li>局部内部类不能添加访问修饰符，但可以用 <code>final</code>  修饰（看作变量就好理解）</li>
<li>作用域：仅在定义它的<strong>方法</strong>或者<strong>代码块</strong>中</li>
<li>外部类 —— 访问 —— 局部内部类成员（创建对象再访问，必须在作用域内）</li>
<li>外部其它类 —— 不能访问 —— 局部内部类（局部内部类的地位是局部变量）</li>
<li>外部类成员 与 内部类成员 重名，默认遵循就近原则，访问外部类成员用 <code>外部类名.this.成员</code></li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalInnerClass</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        outer<span class="token punctuation">.</span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="11"></td><td><pre> * Outer</pre></td></tr><tr><td data-num="12"></td><td><pre> */</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 外部类属性和方法</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"内部类成功直接调用外部类私有成员"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 内部类作用域：仅在定义它的方法或者代码块中</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 局部内部类定义在外部类的局部位置（方法 / 代码块）</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// 局部内部类不能添加访问修饰符，但可以用 `final` 修饰（看作变量就好理解）</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Inner</span> <span class="token punctuation">&#123;</span><span class="token comment">// 局部内部类</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token comment">// 外部类成员 与 内部类成员 重名，默认遵循就近原则，</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token comment">// 访问外部类成员用 `外部类名.this. 成员`</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token keyword">private</span> <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token comment">// 可以直接访问外部类的所有成员，包括私有的</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"内部类方法f1执行..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Inner's n = "</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">" 就近原则（Outer's n = 100,Inner's = 200)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Outer's n = "</span> <span class="token operator">+</span> <span class="token class-name">Outer</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">+</span> <span class="token string">" Outer.this.n访问外部类重名成员"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 外部类 —— 访问 —— 局部内部类成员（创建对象再访问，必须在作用域内）</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">Inner</span> inner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        inner<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token comment">// 内部类作用域：仅在定义它的方法或者代码块中</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>Outer.this &lt;==&gt; outer 对象</p>
<p>this &lt;==&gt; Inner 对象</p>
</blockquote>
<h3 id="匿名内部类"><a class="anchor" href="#匿名内部类">#</a> 匿名内部类</h3>
<h4 id="细节-6"><a class="anchor" href="#细节-6">#</a> 细节</h4>
<ol>
<li>
<p>定义在外部类的局部位置（方法或代码块），没有类名），本质是类或对象</p>
</li>
<li>
<p>语法： <code>new 类/接口（参数列表）&#123;类体&#125;；</code></p>
</li>
<li>
<p>需求：只使用一次，后面不再使用</p>
</li>
<li>
<p>匿名内部类使用一次即死亡，但是它的对象可以一直使用</p>
</li>
<li>
<p>编译类型是接口或类，运行类型是匿名内部类</p>
</li>
<li>
<p>使用时，底层会实现一个 <code>外部类$ + 序号</code>  的类实现接口或继承类，并返回实例地址</p>
</li>
<li>
<p>匿名内部类既是类，也是 <code>对象</code> ，可以有两种方式调用方法</p>
<ul>
<li>
<p>创建匿名内部类的对象调用</p>
</li>
<li>
<p>}. 方法；</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"重写了匿名内部类方法..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动态绑定运行类型..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"就近原则（"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li>
<p>作用域：定义的方法或代码块，即外部其它类不能访问匿名内部类</p>
</li>
<li>
<p>外部类和匿名内部类成员重名，默认就近原则，使用外部类成员： <code>外部类名.this.成员</code></p>
</li>
<li>
<p>应用场景：匿名内部类可以传递实参</p>
</li>
</ol>
<h4 id="代码时间"><a class="anchor" href="#代码时间">#</a> 代码时间</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 基于接口 匿名内部类</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> anonymityInnerClass01 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">Outer01</span> outer01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        outer01<span class="token punctuation">.</span><span class="token function">fun01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="15"></td><td><pre> * 接口 A</pre></td></tr><tr><td data-num="16"></td><td><pre> */</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">A1</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="22"></td><td><pre> * Outer01</pre></td></tr><tr><td data-num="23"></td><td><pre> */</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Outer01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">// 方法里的匿名内部类</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">/*</span></pre></td></tr><tr><td data-num="29"></td><td><pre>         * java 底层创建：</pre></td></tr><tr><td data-num="30"></td><td><pre>         * class Outer01$1 implements A1 &#123;</pre></td></tr><tr><td data-num="31"></td><td><pre>         * 		     @Override</pre></td></tr><tr><td data-num="32"></td><td><pre>         *           public void show () &#123;</pre></td></tr><tr><td data-num="33"></td><td><pre>         *           System.out.println ("重写了接口方法...");</pre></td></tr><tr><td data-num="34"></td><td><pre>         *           &#125;</pre></td></tr><tr><td data-num="35"></td><td><pre>         * &#125;</pre></td></tr><tr><td data-num="36"></td><td><pre>         *           // 结束后返回 Outer01$1 类的实例给引用 a，Outer01$1 死亡，但 a 可以继续多次使用</pre></td></tr><tr><td data-num="37"></td><td><pre>         */</pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">A1</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"重写了接口A1方法..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        a<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 基于类的匿名内部类</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> anonymityInnerClass02 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">Outer02</span> outer02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        outer02<span class="token punctuation">.</span><span class="token function">fun02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="14"></td><td><pre> * A</pre></td></tr><tr><td data-num="15"></td><td><pre> */</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接收了name = "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"这是A类..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="29"></td><td><pre> * Outer02d</pre></td></tr><tr><td data-num="30"></td><td><pre> */</pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Outer02</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">int</span> a02 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token comment">/*</span></pre></td></tr><tr><td data-num="37"></td><td><pre>         * java 底层创建：</pre></td></tr><tr><td data-num="38"></td><td><pre>         * class Outer02$1 extends A &#123;</pre></td></tr><tr><td data-num="39"></td><td><pre>         * 			 @Override</pre></td></tr><tr><td data-num="40"></td><td><pre>         *           public void show () &#123;</pre></td></tr><tr><td data-num="41"></td><td><pre>         *           System.out.println ("重写了匿名内部类方法...");</pre></td></tr><tr><td data-num="42"></td><td><pre>         *           System.out.println ("动态绑定运行类型...");</pre></td></tr><tr><td data-num="43"></td><td><pre>         *           System.out.println ("就近原则（");</pre></td></tr><tr><td data-num="44"></td><td><pre>         * &#125;</pre></td></tr><tr><td data-num="45"></td><td><pre>         *           // 结束后返回 Outer02$1 的实例给引用 a，Outer02$1 死亡，但 a 可以继续多次使用</pre></td></tr><tr><td data-num="46"></td><td><pre>         */</pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token comment">// 传入 String 类型参数给构造器</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token keyword">private</span> <span class="token keyword">int</span> a02 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="52"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"重写了匿名内部类方法..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动态绑定运行类型是："</span> <span class="token operator">+</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"就近原则(匿名内部类a02 = 30) 验证：a02 = "</span> <span class="token operator">+</span> a02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"使用外部类成员(外部类a02 = 20 验证：a02 = "</span> <span class="token operator">+</span> <span class="token class-name">Outer02</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>a02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        a<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 动态绑定，运行类型是 Outer02$1</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 基于抽象类的匿名内部类</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> anonymityInnerClass03 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">Outer03</span> outer03 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        outer03<span class="token punctuation">.</span><span class="token function">fun03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="14"></td><td><pre> * Abstract_A 抽象类</pre></td></tr><tr><td data-num="15"></td><td><pre> */</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Abstract_A</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="21"></td><td><pre> * Outer03</pre></td></tr><tr><td data-num="22"></td><td><pre> */</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Outer03</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="26"></td><td><pre>         * 匿名内部类</pre></td></tr><tr><td data-num="27"></td><td><pre>         */</pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">Abstract_A</span> abstract_A <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Abstract_A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token comment">/**</span></pre></td></tr><tr><td data-num="30"></td><td><pre>             * java 底层创建：</pre></td></tr><tr><td data-num="31"></td><td><pre>             * class Outer03$1 extends A &#123;</pre></td></tr><tr><td data-num="32"></td><td><pre>             * </pre></td></tr><tr><td data-num="33"></td><td><pre>             * @Override</pre></td></tr><tr><td data-num="34"></td><td><pre>             *           public void show () &#123;</pre></td></tr><tr><td data-num="35"></td><td><pre>             *           System.out.println ("重写了抽象类 Abstract_A 的方法...");</pre></td></tr><tr><td data-num="36"></td><td><pre>             *           &#125;</pre></td></tr><tr><td data-num="37"></td><td><pre>             *           结束后返回 Outer03$1 的实例给 abstract_A 引用，Outer03$1 死亡，但 abstract_A 可以继续多次使用</pre></td></tr><tr><td data-num="38"></td><td><pre>             */</pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token comment">// 重写抽象类的抽象方法</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"重写了抽象类Abstract_A的方法..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        abstract_A<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 匿名内部类的实践一：传递实参</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> anonymityInnerClass04 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 匿名内部类传递实参</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"匿名内部类传递了实参..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 定义静态方法，main 方法是静态方法，main 只能调用本类静态成员</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">A04</span> a04<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        a04<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="24"></td><td><pre> * 接口 A</pre></td></tr><tr><td data-num="25"></td><td><pre> */</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">A04</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 有一个铃声接口 Bell， 里面有个 ring 方法。</pre></td></tr><tr><td data-num="5"></td><td><pre> * 有一个手机类 cellPhone， 具有闹钟功能 alarmClock, 参数是 Bell 类型</pre></td></tr><tr><td data-num="6"></td><td><pre> * 测试手机类的闹钟功能，通过匿名内部类 (对象) 作为参数，打印：懒猪起床了</pre></td></tr><tr><td data-num="7"></td><td><pre> * 再传入另一个匿名内部类 (对象)，打印：小伙伴上课了</pre></td></tr><tr><td data-num="8"></td><td><pre> */</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ring</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        cellPhone cellphone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">cellPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 匿名内部类传参</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        cellphone<span class="token punctuation">.</span><span class="token function">alarmClock</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"懒猪起床了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        cellphone<span class="token punctuation">.</span><span class="token function">alarmClock</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"小伙伴上课了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="27"></td><td><pre> * Bell 接口</pre></td></tr><tr><td data-num="28"></td><td><pre> */</pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Bell</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="35"></td><td><pre> * cellPhone</pre></td></tr><tr><td data-num="36"></td><td><pre> */</pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">class</span> cellPhone <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">alarmClock</span><span class="token punctuation">(</span><span class="token class-name">Bell</span> bell<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        bell<span class="token punctuation">.</span><span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="成员内部类"><a class="anchor" href="#成员内部类">#</a> 成员内部类</h3>
<h4 id="细节-7"><a class="anchor" href="#细节-7">#</a> 细节</h4>
<ol>
<li>在外部类的成员位置上</li>
<li>可以直接访问外部类的所有成员</li>
<li>可以添加任意修饰符（public,rotected,private, 默认）</li>
<li>作用域：整个外部类的类体，外部类访问内部类成员：在外部类成员方法创建内部类对象，再调用内部类方法</li>
<li>外部其他类访问成员内部类：
<ul>
<li><em>第一种方式 固定语法</em></li>
<li><em>第二种方式，在外部类创建方法返回内部类对象</em></li>
</ul>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> memberInnerClass <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 调用成员内部类的成员</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">Outer05</span> member <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        member<span class="token punctuation">.</span><span class="token function">memberFun01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 外部类访问成员内部类</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 第一种方式 固定语法</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Outer05</span><span class="token punctuation">.</span>memberInner01 inner01 <span class="token operator">=</span> member<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token function">memberInner01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        inner01<span class="token punctuation">.</span><span class="token function">show01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 第二种方式，在外部类创建方法返回内部类对象，通过外部类对象调用非静态方法</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">Outer05</span><span class="token punctuation">.</span>memberInner01 inner02 <span class="token operator">=</span> member<span class="token punctuation">.</span><span class="token function">returnmember</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        inner02<span class="token punctuation">.</span><span class="token function">show02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="22"></td><td><pre> * Outer05</pre></td></tr><tr><td data-num="23"></td><td><pre> */</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Outer05</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">int</span> m1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"member"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="30"></td><td><pre>     * memberInner01</pre></td></tr><tr><td data-num="31"></td><td><pre>     */</pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">class</span> memberInner01 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"成员内部类..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"直接调用外部类成员（私有）："</span> <span class="token operator">+</span> <span class="token string">"m1 = "</span> <span class="token operator">+</span> m1 <span class="token operator">+</span> <span class="token string">" name: "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"外部其他类访问成员内部类第一种方式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"外部其他类访问成员内部类第二种方式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token comment">// 写一个方法供 mian 函数调用</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">memberFun01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        memberInner01 mInner01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">memberInner01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        mInner01<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token comment">// 返回内部类对象</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">public</span> memberInner01 <span class="token function">returnmember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">memberInner01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="静态内部类"><a class="anchor" href="#静态内部类">#</a> 静态内部类</h3>
<h4 id="细节-8"><a class="anchor" href="#细节-8">#</a> 细节</h4>
<ol>
<li>在外部类的成员位置上</li>
<li>必须有 <code>static</code>  修饰，可以添加任意修饰符（public,rotected,private, 默认）</li>
<li>可以直接访问外部类的所有静态成员，但不能访问非静态成员</li>
<li>作用域：整个外部类的类体</li>
<li>外部类访问静态内部类的三种方式</li>
<li>外部类和静态内部类成员重名时，默认就近原则，访问外部类成员用 <code>外部类名.外部成员</code></li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>localInnerClass<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> staticInnerClass <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Outer06</span> outer06 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer06</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        outer06<span class="token punctuation">.</span><span class="token function">fun04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 外部其他类访问静态内部类的三种方式</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 方式一 ---- 固定语法</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Outer06</span><span class="token punctuation">.</span>staticClass inClass1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer06</span><span class="token punctuation">.</span><span class="token function">staticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        inClass1<span class="token punctuation">.</span><span class="token function">show03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 方式二 ---- 在外部类创建方法返回内部类对象，通过外部类对象调用非静态方法</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">Outer06</span><span class="token punctuation">.</span>staticClass inClass2 <span class="token operator">=</span> outer06<span class="token punctuation">.</span><span class="token function">fun05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        inClass2<span class="token punctuation">.</span><span class="token function">show04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 方式三 ---- 通过外部类直接调用静态方法返回静态类对象</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">Outer06</span><span class="token punctuation">.</span>staticClass inClass3 <span class="token operator">=</span> <span class="token class-name">Outer06</span><span class="token punctuation">.</span><span class="token function">fun06</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        inClass3<span class="token punctuation">.</span><span class="token function">show05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="24"></td><td><pre> * Outer06</pre></td></tr><tr><td data-num="25"></td><td><pre> */</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Outer06</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="30"></td><td><pre>     * staticClass</pre></td></tr><tr><td data-num="31"></td><td><pre>     */</pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">class</span> staticClass <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">private</span> <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"静态内部类访问外部类静态成员n = "</span> <span class="token operator">+</span> <span class="token class-name">Outer06</span><span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"静态内部类访问本类静态成员n = "</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"外部类第一种访问内部类方式..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"外部类第二种访问内部类方式..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"外部类第三种访问内部类方式..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        staticClass staticclass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">staticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        staticclass<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token comment">// 编写方法返回静态内部类对象</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token keyword">public</span> staticClass <span class="token function">fun05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">staticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 静态方法返回静态内部类对象</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> staticClass <span class="token function">fun06</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">staticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="枚举"><a class="anchor" href="#枚举">#</a> 枚举</h2>
<h3 id="自定义枚举类型"><a class="anchor" href="#自定义枚举类型">#</a> 自定义枚举类型</h3>
<ol>
<li>将构造器私有化，防止被直接 new</li>
<li>不设置 set () 方法，防止被篡改，可以设置 get () 方法</li>
<li>暴露对象 public，并用 final + static 修饰对象优化</li>
<li>枚举对象名大写</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>enumeration<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 自定义枚举类型</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> selfDefineEnumeration <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span><span class="token constant">SPRING</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span><span class="token constant">SUMMER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span><span class="token constant">AUTUMN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span><span class="token constant">WINTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="16"></td><td><pre> * Season</pre></td></tr><tr><td data-num="17"></td><td><pre> */</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Season</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 定义固定对象 暴露对象，final + static 底层优化</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> <span class="token constant">SPRING</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"春天"</span><span class="token punctuation">,</span> <span class="token string">"温暖"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> <span class="token constant">SUMMER</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"夏天"</span><span class="token punctuation">,</span> <span class="token string">"炎热"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> <span class="token constant">AUTUMN</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"秋天"</span><span class="token punctuation">,</span> <span class="token string">"凉爽"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> <span class="token constant">WINTER</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"冬天"</span><span class="token punctuation">,</span> <span class="token string">"寒冷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">// 将构造器私有化 并且不设置 set 方法</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">return</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token keyword">return</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"The name:"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" The Desc:"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="使用enum关键字实现枚举"><a class="anchor" href="#使用enum关键字实现枚举">#</a> 使用 enum 关键字实现枚举</h3>
<h4 id="基础-5"><a class="anchor" href="#基础-5">#</a> 基础</h4>
<ol>
<li>使用 enum 开发一个枚举类时，默认继承 Enum 类（终端 javap ***.class 验证）</li>
<li>传统的 <code>public final static Season SPRING = new Season(&quot;春天&quot;, &quot;温暖&quot;);</code>  简化为 <code>SPRING(“春天”，“温暖”);</code></li>
<li>使用无参构造器创建枚举对象，实参列表和小括号都可以省略</li>
<li>有多个枚举对象用  <code>,</code>  间隔，最后 <code>;</code>  结尾</li>
<li>枚举对象必须放在枚举类体的行首</li>
<li>Enum 的 <code>toString()</code>  方法（子类可以重写）返回的是枚举类对象的 name，如 SPRING</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> selfDefineEnumeration02 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">SPRING</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">SUMMER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">AUTUMN</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">WINTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="11"></td><td><pre> * Season</pre></td></tr><tr><td data-num="12"></td><td><pre> */</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">enum</span> <span class="token class-name">Season2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 有多个枚举对象用 `,` 间隔，最后 `;` 结尾</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 枚举对象必须放在枚举类体的行首</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">SPRING</span><span class="token punctuation">(</span><span class="token string">"春天"</span><span class="token punctuation">,</span> <span class="token string">"温暖"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUMMER</span><span class="token punctuation">(</span><span class="token string">"夏天"</span><span class="token punctuation">,</span> <span class="token string">"炎热"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AUTUMN</span><span class="token punctuation">(</span><span class="token string">"秋天"</span><span class="token punctuation">,</span> <span class="token string">"凉爽"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WINTER</span><span class="token punctuation">(</span><span class="token string">"冬天"</span><span class="token punctuation">,</span> <span class="token string">"寒冷"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">WHAT</span><span class="token comment">// 使用无参构造器创建枚举对象，实参列表和小括号都可以省略</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token class-name">Season2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr></table></figure><h4 id="常用方法"><a class="anchor" href="#常用方法">#</a> 常用方法</h4>
<ol>
<li>name ()：返回当前对象名，子类不能重写</li>
<li>ordinal ()：返回位置，默认从 0 开始</li>
<li>values ()：返回包含所有枚举常量的一个数组</li>
<li>valueOf ()：将字符串转换成枚举常量（常量须存在类中）</li>
<li>compareTo：比较两个，枚举常量的位置</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>enumeration<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * Enum 类的方法演示</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> selfDefineEnumeration03 <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">//name ()：返回当前对象名，子类不能重写</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">SPRING</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">//ordinal ()：返回位置，默认从 0 开始</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"WINTER's position:"</span> <span class="token operator">+</span> <span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">WINTER</span><span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">//values ()：返回包含所有枚举常量的一个数组</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">Season2</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values_ <span class="token operator">=</span> <span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Season2</span> season2 <span class="token operator">:</span> values_<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>season2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">//valueOf ()：将字符串转换成枚举常量（常量须存在类中）</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">Season2</span> value <span class="token operator">=</span> <span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">"SUMMER"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">//compareTo：比较两个，枚举常量的位置</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">WINTER</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">SPRING</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="26"></td><td><pre> * Season</pre></td></tr><tr><td data-num="27"></td><td><pre> */</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">enum</span> <span class="token class-name">Season2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 有多个枚举对象用 `,` 间隔，最后 `;` 结尾</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 枚举对象必须放在枚举类体的行首</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">SPRING</span><span class="token punctuation">(</span><span class="token string">"春天"</span><span class="token punctuation">,</span> <span class="token string">"温暖"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUMMER</span><span class="token punctuation">(</span><span class="token string">"夏天"</span><span class="token punctuation">,</span> <span class="token string">"炎热"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AUTUMN</span><span class="token punctuation">(</span><span class="token string">"秋天"</span><span class="token punctuation">,</span> <span class="token string">"凉爽"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WINTER</span><span class="token punctuation">(</span><span class="token string">"冬天"</span><span class="token punctuation">,</span> <span class="token string">"寒冷"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">WHAT</span><span class="token comment">// 使用无参构造器创建枚举对象，实参列表和小括号都可以省略</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token class-name">Season2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token comment">// 将构造器私有化 并且不设置 set 方法</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Season2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token keyword">return</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token keyword">return</span> desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"The name:"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" The Desc:"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>desc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="使用细节"><a class="anchor" href="#使用细节">#</a> 使用细节</h4>
<ol>
<li>使用 enum 关键字后，就不能再继承其它类，因为 enum 隐式继承 Enum</li>
<li>枚举类和普通类一样可以实现接口 <code>enum 类名 implements 接口1...&#123;&#125;</code>  可重写接口方法</li>
</ol>
<h2 id="注解"><a class="anchor" href="#注解">#</a> 注解</h2>
<h4 id="override"><a class="anchor" href="#override">#</a> @Override</h4>
<ul>
<li>限定某个方法，重写父类方法，该注解只能用于方法</li>
<li>如果写了此注解，编译器会判断是否重写成功，没有则编译错误</li>
</ul>
<h4 id="deprecated"><a class="anchor" href="#deprecated">#</a> @Deprecated</h4>
<ul>
<li>用于某个程序元素已经过时（类，方法等）</li>
<li>不推荐使用，但仍可以使用</li>
</ul>
<h4 id="suppresswarnings"><a class="anchor" href="#suppresswarnings">#</a> @SuppressWarnings</h4>
<ul>
<li>抑制编译器警告</li>
<li>unchecked 忽略没有检查的警告</li>
<li>rawtypes 忽略没有指定泛型的警告</li>
<li>unused 忽略没有使用某个变量的警告</li>
<li>作用范围和放置的位置有关</li>
</ul>
<h4 id="元注解了解"><a class="anchor" href="#元注解了解">#</a> 元注解（了解）</h4>
<ul>
<li>
<p>Retention 指定注解的作用范围（SOURCE CLASS RUNTIME）</p>
<ul>
<li>RetentionPolicy.SOURCE: 编译器使用后，丢弃这种策略的注解</li>
<li>RetentionPolicy.CLASS：编译器把注解保存在 class 文件，JVM 不会保留此注解，这是默认值</li>
<li>RetentionPolicy.RUNTIME: 编译器把注解保存在 class 文件，JVM 保留此注解，可以用反射获取该注解信息</li>
</ul>
</li>
<li>
<p>Target 指定注解可以使用在哪些地方（字段，类，方法，包等）</p>
</li>
<li>
<p>Documented 修饰注解，指定注解是否会在 javadoc 体现，即生成文档时会保留在其中</p>
</li>
<li>
<p>Inherited 子类继承父类注解</p>
</li>
</ul>
<h2 id="异常"><a class="anchor" href="#异常">#</a> 异常</h2>
<h3 id="基本概念"><a class="anchor" href="#基本概念">#</a> 基本概念</h3>
<p>将程序执行中发生的不正常情况称为异常，开发过程中语法错误和逻辑错误不是异常</p>
<ul>
<li>异常 (Exception) 分为两类
<ul>
<li>Error（错误）：Java 虚拟机无法解决的严重问题，如 JVM 系统内部错误、资源耗尽等。StackOverflowError（栈溢出）和 OOM（OutOfMemoryError），Error 是严重错误，程序会崩溃</li>
<li>Exception：因为编程错误或偶然外在因素导致的一般性问题，可以使用针对性代码处理
<ul>
<li>运行时异常 (RuntimeException)，编译器检查不出来</li>
<li>编译时异常 (……)，编译器要求必须处理的异常</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="异常体系图"><a class="anchor" href="#异常体系图">#</a> 异常体系图</h3>
<p><img loading="lazy" data-src="RuntimeException.jpg" alt="RuntimeException"></p>
<h3 id="常见的运行时异常"><a class="anchor" href="#常见的运行时异常">#</a> 常见的运行时异常</h3>
<h4 id="nullpointerexception空指针异常"><a class="anchor" href="#nullpointerexception空指针异常">#</a> NullPointerException（空指针异常）</h4>
<ul>
<li>当程序试图在需要使用对象的地方而对象为 null 时，抛出异常</li>
</ul>
<h4 id="arithmeticexception数学运算异常"><a class="anchor" href="#arithmeticexception数学运算异常">#</a> ArithmeticException（数学运算异常）</h4>
<ul>
<li>当出现异常运算条件时抛出异常，如除以 0</li>
</ul>
<h4 id="arrayindexoutexception数组下标越界异常"><a class="anchor" href="#arrayindexoutexception数组下标越界异常">#</a> ArrayIndexOutException（数组下标越界异常）</h4>
<ul>
<li>索引为负数或大于等于数组大小时抛出异常</li>
</ul>
<h4 id="classcastexception类型转换异常但对象不是实例的子类时抛出异常"><a class="anchor" href="#classcastexception类型转换异常但对象不是实例的子类时抛出异常">#</a> ClassCastException（类型转换异常）但对象不是实例的子类时抛出异常</h4>
<ul>
<li>强转时但对象不是实例的子类时抛出异常</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">C</span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">C</span><span class="token punctuation">)</span> a<span class="token punctuation">;</span><span class="token comment">// 抛出异常</span></pre></td></tr></table></figure><h4 id="numberformatexception数字格式不正确异常"><a class="anchor" href="#numberformatexception数字格式不正确异常">#</a> NumberFormatException（数字格式不正确异常）</h4>
<ul>
<li>试图将字符串转换成一种数值类型但不能转换成适当格式时抛出异常</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"枫"</span>；</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 抛出异常</span></pre></td></tr></table></figure><h3 id="异常处理"><a class="anchor" href="#异常处理">#</a> 异常处理</h3>
<h4 id="try-catch-finally"><a class="anchor" href="#try-catch-finally">#</a> try-catch-finally</h4>
<ul>
<li>
<p>程序员在代码中捕获发生的异常自行处理</p>
</li>
<li>
<p>可以有多个 catch，捕获不同的异常，要求父类在后，子类在前（先捕捉子类异常，再捕捉父类异常）：</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">try</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
</li>
<li>
<p>允许 try - finally 配合使用，没有捕获异常，程序会直接崩溃。应用于执行一段代码是否发生异常都必须执行某个业务逻辑</p>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>try_catch_finally<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * 测试空指针异常 Exception</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionForNull</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"FENG"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h5 id="细节-9"><a class="anchor" href="#细节-9">#</a> 细节</h5>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">try</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 可能发生异常的代码块放在这里</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 捕获到异常</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 系统将异常封装成 Exception 对象 e，传递给 catch 方法，</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 得到异常对象后程序员自行处理</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 如果没有发生异常则不执行 catch 代码块</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token keyword">finally</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 可有可省略</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 不管 try 代码块是否执行，finally 始终都要执行</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 通常把资源的释放放在这里</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="throws"><a class="anchor" href="#throws">#</a> throws</h4>
<ul>
<li>将发生的异常抛出交给调用方法处理，最顶级的处理者是 JVM</li>
<li>JVM 输出异常信息，退出程序</li>
<li>如果程序员没有显式处理异常，系统默认使用 throws</li>
<li>如果一个方法可能生成某种异常，但不能确定如何处理，则此方法应显式抛出异常，由调用该方法的调用者处理</li>
<li>在<strong>方法声明</strong>中用 throws 语句可以声明抛出异常的<strong>列表</strong>，throws 后面的异常类型可以是方法中产生的异常类型，也可以是它的父类</li>
</ul>
<h5 id="细节-10"><a class="anchor" href="#细节-10">#</a> 细节</h5>
<p><img loading="lazy" data-src="throws.png" alt="throws"></p>
<ul>
<li>编译异常必须处理，可以使用 try-catch 或 throws</li>
<li>子类重写父类方法时，规定：子类重写的方法抛出的 <code>异常类型 == 父类异常类型</code> ，或  <code>父类抛出异常类型的子类型</code></li>
<li>try-catch 和 throws 选择一个处理就行</li>
</ul>
<h4 id="自定义异常"><a class="anchor" href="#自定义异常">#</a> 自定义异常</h4>
<ol>
<li>定义类
<ul>
<li>自定义异常类名继承 Exception 或 RuntimeException (一般继承这个)</li>
</ul>
</li>
<li>如果继承 Exception，属于编译异常</li>
<li>如果继承 RuntimeException，属于运行时异常</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">basic<span class="token punctuation">.</span>try_catch_finally<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">int</span> <span class="token constant">YEAR</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">YEAR</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">YearException</span><span class="token punctuation">(</span><span class="token string">"年份不能是负数！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 把信息传给异常类的构造器</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 自定义异常类</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">YearException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token class-name">YearException</span><span class="token punctuation">(</span><span class="token class-name">String</span> year<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">super</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 传递给父类信息</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="throw和throws的区别"><a class="anchor" href="#throw和throws的区别">#</a> throw 和 throws 的区别</h4>
<table>
<thead>
<tr>
<th></th>
<th>意义</th>
<th>位置</th>
<th>后面跟</th>
</tr>
</thead>
<tbody>
<tr>
<td>throws</td>
<td>异常处理的一种方式，表示出现异常的一种可能性，并不一定会发生这种异常</td>
<td>方法声明处，可以是异常列表</td>
<td>异常类型</td>
</tr>
<tr>
<td>throw</td>
<td>手动生成异常对象的关键字</td>
<td>方法体中</td>
<td>异常对象</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ArithmeticException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"信息..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="常用类"><a class="anchor" href="#常用类">#</a> 常用类</h2>
<h3 id="包装类wrapper"><a class="anchor" href="#包装类wrapper">#</a> 包装类 (Wrapper)</h3>
<h4 id="八大包装类"><a class="anchor" href="#八大包装类">#</a> 八大包装类</h4>
<p><img loading="lazy" data-src="Boolean-1714317177903-4.png" alt="Boolean-1714317177903-4"></p>
<p><img loading="lazy" data-src="Character-1714317222011-6.png" alt="Character-1714317222011-6"></p>
<p><img loading="lazy" data-src="Wrapper-1714317230290-8.jpg" alt="Wrapper-1714317230290-8"></p>
<h4 id="包装类和基本数据类型的转换装箱和拆箱"><a class="anchor" href="#包装类和基本数据类型的转换装箱和拆箱">#</a> 包装类和基本数据类型的转换（装箱和拆箱）</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//    jdk5 以前，手动装、拆箱</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// 手动装箱</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>valueOf <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 手动拆箱</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">int</span> j1 <span class="token operator">=</span> i1<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">int</span> j2 <span class="token operator">=</span> i2<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">//jdk5 以后，自动装、拆箱</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 自动装箱</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 自动拆箱</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">int</span> j3 <span class="token operator">=</span> i3<span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="包装类和string相互转换"><a class="anchor" href="#包装类和string相互转换">#</a> 包装类和 String 相互转换</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="3"></td><td><pre> * @data 2024.4.28</pre></td></tr><tr><td data-num="4"></td><td><pre> **/</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @date 2024.4.28</pre></td></tr><tr><td data-num="8"></td><td><pre> * Integer 和 String 类的相互转换，其他包装类类似</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Integer_String</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">//    Integer 转 String</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">//    1. 使用 toString () 方法</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Integer</span> integer1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">String</span> str1 <span class="token operator">=</span> integer1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">//    2. 使用 String.valueOf () 方法</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">Integer</span> integer2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span>valueOf <span class="token punctuation">(</span>integer2<span class="token punctuation">)</span><span class="token punctuation">;</span>  </pre></td></tr><tr><td data-num="21"></td><td><pre>        </pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">//     String 转 Integer</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">//     1. 使用 Integer.parseInt () 方法</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">String</span> str4 <span class="token operator">=</span> <span class="token string">"40"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">Integer</span> integer4 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>parseInt <span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        </pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">//     2. 使用 Integer.valueOf () 方法</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">String</span> str5 <span class="token operator">=</span> <span class="token string">"50"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">Integer</span> integer5 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>valueOf <span class="token punctuation">(</span>str5<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        </pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">//     3. 使用 Integer 的构造器</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">String</span> str6 <span class="token operator">=</span> <span class="token string">"60"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">Integer</span> integer6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span> <span class="token punctuation">(</span>str6<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span>  </pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="包装类integer和charater的常用方法举例"><a class="anchor" href="#包装类integer和charater的常用方法举例">#</a> 包装类 Integer 和 Charater 的常用方法（举例）</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Integermethods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Integer的最大值："</span><span class="token operator">+</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取最大值</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Integer的最小值："</span><span class="token operator">+</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取最小值</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span>isDigit <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断是否为数字</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span>isLetter <span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断是否为字母</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span>isUpperCase <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断是否为大写字母</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span>isLowerCase <span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 判断是否为小写字母</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span>toUpperCase <span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 转换为大写</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span>toLowerCase <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 转换为小写</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="integer面试"><a class="anchor" href="#integer面试">#</a> Integer 面试</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 首先，检查传入的 int 值 i 是否在 IntegerCache.low（-128）和 IntegerCache.high（127）之间。</pre></td></tr><tr><td data-num="3"></td><td><pre> * 如果在范围内，直接从 IntegerCache.cache 数组中取出对应位置的 Integer 对象，</pre></td></tr><tr><td data-num="4"></td><td><pre> * 并将其加 - IntegerCache.low 偏移量，以匹配原始的 int 值。</pre></td></tr><tr><td data-num="5"></td><td><pre> * 如果传入的 int 值 i 不在范围内，说明是一个新的值，需要创建一个新的 Integer 对象。</pre></td></tr><tr><td data-num="6"></td><td><pre> *     @IntrinsicCandidate</pre></td></tr><tr><td data-num="7"></td><td><pre> *     public static Integer valueOf (int i) &#123;</pre></td></tr><tr><td data-num="8"></td><td><pre> *         if (i >= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</pre></td></tr><tr><td data-num="9"></td><td><pre> *             return IntegerCache.cache [i + (-IntegerCache.low)];</pre></td></tr><tr><td data-num="10"></td><td><pre> *         return new Integer (i);</pre></td></tr><tr><td data-num="11"></td><td><pre> *     &#125;</pre></td></tr><tr><td data-num="12"></td><td><pre> *</pre></td></tr><tr><td data-num="13"></td><td><pre> *     private static final class IntegerCache &#123;</pre></td></tr><tr><td data-num="14"></td><td><pre> *         static final int low = -128;</pre></td></tr><tr><td data-num="15"></td><td><pre> *         static final int high;</pre></td></tr><tr><td data-num="16"></td><td><pre> *         ......</pre></td></tr><tr><td data-num="17"></td><td><pre> *         ......</pre></td></tr><tr><td data-num="18"></td><td><pre> *         Integer [] c = new Integer [size];</pre></td></tr><tr><td data-num="19"></td><td><pre> *          int j = low;</pre></td></tr><tr><td data-num="20"></td><td><pre> *          for (int i = 0; i &lt; c.length; i++) &#123;</pre></td></tr><tr><td data-num="21"></td><td><pre> *             c [i] = new Integer (j++);</pre></td></tr><tr><td data-num="22"></td><td><pre> *          &#125;</pre></td></tr><tr><td data-num="23"></td><td><pre>*/</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">Integer</span> i5 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">127</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">Integer</span> i6 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">127</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">Integer</span> i7 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">Integer</span> i8 <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">int</span> i9 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false new 关键字的两个对象地址不同，== 比较的是地址</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true 自动装箱，编译器自动调用 valueOf 方法，缓存 [-128,127]，范围内直接比较值，否则返回 new 对象 为 false</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i5 <span class="token operator">==</span> i6<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true 自动装箱，编译器自动调用 valueOf 方法，缓存 [-128,127], 范围内直接比较值，否则返回 new 对象 为 false</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i7 <span class="token operator">==</span> i8<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true 自动装箱，编译器自动调用 valueOf 方法，缓存 [-128,127], 范围内直接比较值，否则返回 new 对象 为 false</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i9<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true 自动拆箱，比较值 (含基本类型的则自动拆箱比较值)</span></pre></td></tr></table></figure><h3 id="string"><a class="anchor" href="#string">#</a> String</h3>
<h4 id="string结构"><a class="anchor" href="#string结构">#</a> String 结构</h4>
<ol>
<li>
<p>String 对象用于保存字符串，即字符串序列</p>
</li>
<li>
<p>“jack” 字符串常量，即字符串序列</p>
</li>
<li>
<p>字符串的字符不论是字母还是汉字，都是占用两个字节</p>
</li>
<li>
<p>String 有很多构造器</p>
<ul>
<li><code>String s1 = new String();</code></li>
<li><code>String s2 = new String(String original);</code></li>
</ul>
</li>
<li>
<p>String 类实现了 Serializable 接口，可以串行化，允许在网络传输</p>
</li>
<li>
<p>String 类实现了 Comparable 接口，可以比较大小</p>
</li>
<li>
<p>String 是 final 类，不能被继承</p>
</li>
<li>
<p>String 有属性 <code>private final char value[];</code> value 存放字符串内容，不可以修改地址，但可以修改地址所指向的内容</p>
</li>
</ol>
<h4 id="string-对象的两种创建方式"><a class="anchor" href="#string-对象的两种创建方式">#</a> String 对象的两种创建方式</h4>
<ol>
<li><code>String s1 = &quot;fx&quot;;</code></li>
</ol>
<blockquote>
<p>先从常量池检查是否有 “fx” 数据空间，有：s1 直接指向；没有：重新创建 “fx”, 然后指向。<strong>s1 指向常量池的空间地址</strong></p>
</blockquote>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"fx"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">"fx"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>s1 <span class="token operator">==</span> s2<span class="token punctuation">;</span><span class="token comment">//true 指向常量池同一个对象</span></pre></td></tr></table></figure><ol start="2">
<li><code>String s2 = new String(&quot;fx&quot;);</code></li>
</ol>
<blockquote>
<p>先在堆中创建空间，里面维护 value 属性，指向常量池 “fx” 空间；若没有 “fx”，则重新创建 “fx”，如果有，value 直接指向。<strong>s2 指向堆的地址</strong></p>
</blockquote>
<p>![屏幕截图 2024-04-29 123857](屏幕截图 2024-04-29 123857.png)</p>
<blockquote>
<p>调用 <code>intern</code>  方法时，如果池中包含一个等于此 String 对象的字符串（用 <code>equals(Object)</code>  方法确定），返回池中的字符串地址；否则将此对象添加到常量池中并返回 String 对象的引用</p>
<p>最终返回常量池的地址</p>
</blockquote>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"fx"</span><span class="token punctuation">;</span><span class="token comment">// 指向常量池</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span><span class="token string">"fx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 指向堆内存</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>a<span class="token punctuation">.</span>equals <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true 比较字符串内容</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false 比较引用地址</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">.</span>intern <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true 比较引用地址</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>b <span class="token operator">==</span> b<span class="token punctuation">.</span>intern <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false 比较引用地址</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="字符串的特性"><a class="anchor" href="#字符串的特性">#</a> 字符串的特性</h4>
<ul>
<li>String 是 final 类，代表不可变的字符序列</li>
<li>字符串是不可变的，一个字符串对象一旦被分配，其内容不可变</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>s1 <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">;</span><span class="token comment">// 创建 2 个对象，s1 从 "hello" 指向 "name"，hello 和 name 存在于常量池中</span></pre></td></tr></table></figure><ul>
<li>编译器做优化 <code>String a = &quot;hello&quot; + &quot;abc&quot;</code> ==&gt; <code>String a = &quot;helloabc&quot;;</code></li>
</ul>
<pre><code>String a = &quot;hello&quot; + &quot;abc&quot;;//只有一个对象
</code></pre>
<ul>
<li>StringBuilder</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span><span class="token comment">//1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span><span class="token comment">//2</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">String</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token comment">//3 个对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 先创建 StringBuilder sb = StringBuilder ();</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 执行 sb.append ("hello");</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 执行 sb.append ("abc");</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//String c = sb.toString ();toString 返回的是 new 对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 最后 c 指向堆对象中的 (String) value [] -> "helloabc"</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 数组存放在堆中</span></pre></td></tr></table></figure><blockquote>
<p><code>String &quot;a&quot; + &quot;b&quot;;</code>  常量相加，在<strong>常量池</strong>； <code>String c = a + b;</code>  变量相加，在<strong>堆中</strong></p>
</blockquote>
<h4 id="string常用方法补充"><a class="anchor" href="#string常用方法补充">#</a> String 常用方法补充</h4>
<ul>
<li>
<p>equalsIgnoreCase ()：忽略大小写判断内容是否相等</p>
</li>
<li>
<p>indexOf (‘字符’/“字符串”)：返回字符串中某个字符 / 字符串<strong>第一次</strong>出现的索引位置（从 0 开始）</p>
</li>
<li>
<p>lastIndexOf (‘字符’/“字符串”)：返回字符串中某个字符 / 字符串<strong>最后一次</strong>出现的索引位置（从 0 开始）</p>
</li>
<li>
<p>subString ()：截取指定内容的字符串（包括索引）</p>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"hello,world"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">subString</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//world</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">subString</span><span class="token punctuation">(</span><span class="token number">6</span>，<span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//wo 截取从索引 6 到（8-1) 的位置</span></pre></td></tr></table></figure><ul>
<li>concat ()：拼接字符串</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    s1 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>replace (“a”,”b)：将所有”a” 替换成 “b”, 原字符串没有变化，方法执行后<strong>返回的结果</strong>才是替换后的</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"hello,world"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">String</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello,world</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hi,world</span></pre></td></tr></table></figure><ul>
<li>split ()：对字符串用某个字符分割，返回一个数组（有的特殊字符需要使用转义字符）</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"E:\\aa\\bb"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\\\"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>转义字符</pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span>s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>
<p>toCharArray ()：返回一个字符数组</p>
</li>
<li>
<p>campareTo():</p>
<ul>
<li>
<p>长度相等，每个字符相同，返回 0</p>
</li>
<li>
<p>长度相等，字符不相同，返回第一个不相同字符的差值</p>
</li>
<li>
<p>字符一部分相同，长度不同，返回长度的差值</p>
</li>
</ul>
</li>
<li>
<p>format ()：格式转换，占位符由变量替换</p>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"枫叶"</span>；</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">char</span> gender <span class="token operator">=</span> <span class="token string">"male"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"姓名：%s 年龄：%d 性别：%c"</span>；</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="stringbuffer"><a class="anchor" href="#stringbuffer">#</a> StringBuffer</h4>
<h5 id="基本概念-2"><a class="anchor" href="#基本概念-2">#</a> 基本概念</h5>
<ul>
<li>StringBuffer 的直接父类 是 AbstractStringBuilder</li>
<li>StringBuffer 实现了 Serializable, 即 StringBuffer 们对象可以串行化，可以在网络中传输</li>
<li>在父类中 AbstractStringBuilder 有属性: char [] value, 不是 final，该 value 数组存放 字符串内容，引用存放在堆中</li>
<li>因为 StringBuffer 字符内容是存在 char [] value, 所以在变化 (增加 / 删除)，不用每次都更换地址 (即创建新对象)，当超出容量范围时，StringBuffer 创建更大的新字符串数组，将原内容拷贝到新数组</li>
<li>StringBuffer 是一个 final 类，不能被继承</li>
</ul>
<h5 id="stringbuffer构造器和string的相互转换"><a class="anchor" href="#stringbuffer构造器和string的相互转换">#</a> StringBuffer 构造器和 String 的相互转换</h5>
<h6 id="stringbuffer构造器"><a class="anchor" href="#stringbuffer构造器">#</a> StringBuffer 构造器</h6>
<ol>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">StringBuffer</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 初始 char 数组容量大小为 16</span></pre></td></tr></table></figure></li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">StringBuffer</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 初始 char 数组容量大小为 100</span></pre></td></tr></table></figure></li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">StringBuffer</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 初始 char 数组容量大小为 16 + 5 = 21</span></pre></td></tr></table></figure></li>
</ol>
<h6 id="转换"><a class="anchor" href="#转换">#</a> 转换</h6>
<ul>
<li>
<p>String —&gt; StringBuffer</p>
<ol>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">StringBuffer</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 构造器</span></pre></td></tr></table></figure></li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">StringBuffer</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 初始 char 数组容量大小为 16</span></pre></td></tr><tr><td data-num="3"></td><td><pre>s2 <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ol>
</li>
<li>
<p>StringBuffer —&gt;String</p>
<ol>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">StringBuffer</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 使用 StringBuffer 的 toString 方法</span></pre></td></tr></table></figure></li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">StringBuffer</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 直接 new String</span></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h5 id="stringbuffer方法"><a class="anchor" href="#stringbuffer方法">#</a> StringBuffer 方法</h5>
<ol>
<li>
<p>​     删除索引为 &gt;= start &amp;&amp; &lt;end 处的字符 解读：删除 11 到 13 的字符 [11, 14)   <code>s.delete(11, 14); System.out.println(s);</code></p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//"hello，张三丰赵敏 true10.5"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 改</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 使用 周芷若 替换 索引 9-10 的字符 (赵敏)[9,11)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">"周芷若"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello，张三丰周芷若 true10.5"</span></pre></td></tr></table></figure></li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 在索引为 9 的位置插入 "赵敏"，原来索引为 9 的内容自动后移</span></pre></td></tr><tr><td data-num="2"></td><td><pre>s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"赵敏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello，张三丰赵敏周芷若 true10.5"</span></pre></td></tr></table></figure></li>
</ol>
<h4 id="stringbuilder"><a class="anchor" href="#stringbuilder">#</a> StringBuilder</h4>
<h5 id="基本概念-3"><a class="anchor" href="#基本概念-3">#</a> 基本概念</h5>
<ol>
<li>StringBuilder 继承 AbstractStringBuilder 类</li>
<li>实现了 Serializable，说明 StringBuilder 对象是可以串行化 (对象可以网络传输，可以保存到文件)</li>
<li>StringBuilder 是 final 类，不能被继承</li>
<li>StringBuilder 对象字符序列仍然是存放在其父类 AbstractStringBuilder 的 char [] value; 因此，字符序列是堆中</li>
<li>StringBpilder 的方法，没有做互斥的处理，即没有 synchronized 关键字，常用于单线程中</li>
</ol>
<ol>
<li>一个可变的字符序列。此类提供一个与 StringBuffer 兼容的 API，但不保证同步 (StringBuilder 不是线程安全)。该类被设计用作 StringBuffer 的一个<strong>简易替换</strong>，<strong>用在字符串绶冲区被单线程使用的时候</strong>。如果可能，建议优先采用该类，因为在大多数实现中，它比 StringBuffer 要快 。</li>
<li>在 StringBuilder 上的主要操作是 append 和 insert 方法，可重载这些方法，以接受任意类型的数据。</li>
</ol>
<h4 id="string-stringbuffer-stringbuild的比较"><a class="anchor" href="#string-stringbuffer-stringbuild的比较">#</a> String、StringBuffer、StringBuild 的比较</h4>
<ol>
<li>StringBuilder 和 StringBuffer 非常类似，均代表可变的字等序列，而且方法也一样</li>
<li>String：不可变字等序列，效率低，但是复用率高。</li>
<li>StringBuffer: 可变字符序列、效率较高 (增啧)，线程安全，看源䄧</li>
<li>StringBuilder: 可变字符序列、效率最高、线程不安全</li>
<li>Strihg 使用注意说明:<br>
string s=&quot;a&quot;;// 创建了一个字等串<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">s</mi><mo>+</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">\mathbf{s}+=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathbf">s</span><span class="mord">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span> &quot;b&quot;; // 实际上原来的 &quot;a&quot; 字符串对象已经丢奔了，现在又产生了一个字符串 s+&quot;b&quot; (也就是 &quot;ab&quot;)。如果多㳄执行这些改变串内容的操作，会导致大量副本字符串对象存留在内存中，降低效率。如果这样的操作放到循环中，会极大影响程序的性能</li>
<li>String、StringBuffer 和 StringBuilder 的选择</li>
<li>如果字符串存在大量的修改操作，一般使用 StringBuffer 或 StringBuilder</li>
<li>如果字符串存在大量的<strong>修改</strong>操作，并在<strong>单线程</strong>的情况，使用 <strong>StringBuilder</strong></li>
<li>如果字符串存在大量的<strong>修改</strong>操作，并在<strong>多线程</strong>的情况，使用 <strong>StringBuffer</strong></li>
<li>如果我们字符串<strong>很少修改</strong>，被<strong>多个对象引用</strong>，使用<strong> String</strong>，比如配置信息等</li>
<li>StringBuilder 的方法使用和 StringBuffer 一样</li>
</ol>
<h3 id="math方法"><a class="anchor" href="#math方法">#</a> Math 方法</h3>
<ol>
<li>Math.random (): 返回 [0,1) 的随机数；返回 [a,b) 的随机数 —&gt; <code>(int)(a+Math.random() * (b-a+1))</code></li>
<li>Math.max (int a,int b)：返回最小数</li>
<li>Math.min (int a,int,b)：返回最大数</li>
<li>Math.ceil (x): 返回 &gt;=x 的最小整数（天花板函数）</li>
<li>Math.floor (x): 返回 &lt;=x 的最小整数（地板函数）</li>
<li>Math.pow (int x,int y): 返回 x 的 y 次方</li>
</ol>
<h3 id="array类常见方法"><a class="anchor" href="#array类常见方法">#</a> Array 类常见方法</h3>
<ol>
<li>
<p>toString ()：返回数组的字符串形式</p>
</li>
<li>
<p>sort ()：自然排序和定制排序，默认升序</p>
<ol>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.2</pre></td></tr><tr><td data-num="9"></td><td><pre> * 使用冒泡排序实现定制排序</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Array_Define_Sort</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 使用匿名内部类实现 Comparator 接口</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 这里以升序为例，即小的数在前</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        defineSort <span class="token punctuation">(</span>arr <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token comment">// 重写 compare 方法，实现自定义排序规则</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token comment">// 传入两个 arr 数组参数，返回一个整数，表示比较结果</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">int</span> compare <span class="token punctuation">(</span><span class="token class-name">Object</span> o1 <span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> o1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> o2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token comment">// 返回负数表示 o1&lt;o2，返回正数表示 o1>o2，返回 0 表示 o1 == o2</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token keyword">return</span> i1 <span class="token operator">-</span> i2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span>toString <span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">defineSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token class-name">Comparator</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i <span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token comment">// 使用 Comparator 接口的 compare 方法进行比较</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                <span class="token comment">// 如果返回正数，表示 o1>o2, 则交换两个数的位置，这里以升序为例，即小的数在前</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token comment">// 如果返回负数，表示 o1&lt;o2, 则不交换位置</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token comment">// 如果返回 0，表示 o1 == o2, 则不交换位置</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>compare <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                    <span class="token comment">// 根据传入的匿名接口调用其重写的 compare 方法</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                    <span class="token comment">// 根据 compare 返回的结果判断是否进行交换</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                    <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                    arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ol>
</li>
<li>
<p>binarySearch (arr,Object data)：通过二分法查找值为 data 的索引，arr 必须排好序</p>
<ol>
<li><code>int index = Arrays.binarySearch(arr,10);</code>  寻找数组 arr 的元素 10 的索引下标</li>
<li>如果数组元素不存在，return -(low + 1);(low：元素应该存在的位置)</li>
</ol>
</li>
<li>
<p>copyOf (arr,int length)：数组元素复制</p>
<ol>
<li>
<p>将 arr 数组的 length 个元素复制到另一个数组（可以是 arr 本身）中</p>
</li>
<li>
<p>如果复制长度 &gt; arr.length 就在新数组后面添加 null</p>
</li>
<li>
<p>如果复制长度 &lt; 0，抛出异常 NegetiveArraySizeException</p>
</li>
</ol>
</li>
<li>
<p>fill (arr,Object data)：数组元素按某一个值全部填充</p>
</li>
<li>
<p>equals (arr1,arr2)：比较数组元素是否完全一直一致</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.2</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 创建一个整数数组</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intArray <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 使用 Arrays.toString 方法打印数组内容</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"intArray: "</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>intArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 使用 Arrays.sort 方法对数组进行排序</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>intArray<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Sorted intArray: "</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>intArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 使用 Arrays.binarySearch 方法对排序后的数据进行二分查找</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">int</span> searchKey1 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">int</span> searchKey2 <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">int</span> searchKey3 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">int</span> index1 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>intArray<span class="token punctuation">,</span> searchKey1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">int</span> index2 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>intArray<span class="token punctuation">,</span> searchKey2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">int</span> index3 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>intArray<span class="token punctuation">,</span> searchKey3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// 打印查找结果</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"index = "</span> <span class="token operator">+</span> index1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"index = "</span> <span class="token operator">+</span> index2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//index2 = -(low + 1),low 此时为 5</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"index = "</span> <span class="token operator">+</span> index3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//index2 = -(low + 1),low 此时为 0</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        </pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token comment">// 使用 Arrays.equals 方法比较两个数组是否相等</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intArray2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"intArray equals intArray2: "</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>intArray<span class="token punctuation">,</span> intArray2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        </pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token comment">// 使用 Arrays.fill 方法填充数组</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span>fill <span class="token punctuation">(</span>intArray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"intArray after fill: "</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>intArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span>fill <span class="token punctuation">(</span>intArray<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"intArray after fill: "</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>intArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ol>
<h3 id="system方法"><a class="anchor" href="#system方法">#</a> System 方法</h3>
<ol>
<li>exit (0)：退出程序，0 表示正常状态</li>
<li>arraycopy：复制数组</li>
<li>currentTimeMillens：返回当前时间距离 1970-1-1 的毫秒数</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.2</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">System_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 复制数组</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr1<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 形参:</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// src the source array.</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// srcPos – starting position in the source array.</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// dest – the destination array.</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// destPos – starting position in the destination data.</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// length – the number of array elements to be copied.</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 输出复制后的数组</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="biginteger-bigdecimal类大数-小数处理"><a class="anchor" href="#biginteger-bigdecimal类大数-小数处理">#</a> BigInteger、BigDecimal 类（大数、小数处理）</h3>
<ol>
<li>add 加</li>
<li>subtract 减</li>
<li>multiply 乘</li>
<li>divide 除</li>
</ol>
<h4 id="biginteger更大的数"><a class="anchor" href="#biginteger更大的数">#</a> BigInteger（更大的数）</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">BigInteger</span> biginteger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">"454456456564564565545455654546456454"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 大数字符串 BigInteger 自动转换类型</span></pre></td></tr></table></figure><h4 id="bigdecimal更高精度"><a class="anchor" href="#bigdecimal更高精度">#</a> BigDecimal（更高精度）</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">BigDecimal</span> bigdecimal <span class="token operator">=</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">"1.154546556456455644"</span><span class="token punctuation">)</span></pre></td></tr></table></figure><ul>
<li>除法可能抛出异常（除不尽）：解决 — 调用 divide 方法时指定精度 <code>bigdecimal.divide(bigdecimal,BigDecimal.Round_CEILING)</code>  , 如果无限，保留分子的精度</li>
</ul>
<h3 id="日期类"><a class="anchor" href="#日期类">#</a> 日期类</h3>
<h4 id="date-simpledateformat"><a class="anchor" href="#date-simpledateformat">#</a> Date &amp;&amp; SimpleDateFormat</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 创建一个 Date 对象获取当前日期和时间</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 创建一个 Date 对象，通过毫秒数指定特定的日期和时间 1970-1-1 8:00:00</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token class-name">Date</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span> <span class="token punctuation">(</span><span class="token number">99999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 格式化日期和时间</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token class-name">String</span> formattedDate1 <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>formattedDate1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 通过字符串指定特定的日期和时间</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token class-name">String</span> data3 <span class="token operator">=</span> <span class="token string">"2024-05-02 10:00:00"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token class-name">Date</span> parsedDate <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf<span class="token punctuation">.</span>format <span class="token punctuation">(</span>parsedDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="calendar类"><a class="anchor" href="#calendar类">#</a> Calendar 类</h4>
<h5 id="calendar是一个抽象类构造器是private为一些日历字段之间的转换提供方法也为操作日历字段提供方法"><a class="anchor" href="#calendar是一个抽象类构造器是private为一些日历字段之间的转换提供方法也为操作日历字段提供方法">#</a> Calendar 是一个抽象类，构造器是 private, 为一些日历字段之间的转换提供方法，也为操作日历字段提供方法</h5>
<ol>
<li>通过 Calendar.getInstance () 获取实例</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Calendar</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.2</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Calendar_Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 创建一个 Calendar 实例</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 获取当前日期和时间</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">int</span> year <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">int</span> month <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">MONTH</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 月份从 0 开始，所以要加 1</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">int</span> day <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">DAY_OF_MONTH</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">int</span> hour <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">HOUR_OF_DAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">int</span> minute <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">MINUTE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">int</span> second <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">SECOND</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        </pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 输出当前日期和时间</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前日期和时间："</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span> year <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> month <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> day <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> hour <span class="token operator">+</span> <span class="token string">"："</span> <span class="token operator">+</span> minute <span class="token operator">+</span> <span class="token string">"："</span> <span class="token operator">+</span> second<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="第三代日期类"><a class="anchor" href="#第三代日期类">#</a> 第三代日期类</h4>
<h5 id="使用now返回当前时间"><a class="anchor" href="#使用now返回当前时间">#</a> 使用 now () 返回当前时间</h5>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span><span class="token class-name">DateTimeFormatter</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="8"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="9"></td><td><pre> * @data 2024.5.2</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalDateTime_Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 创建一个 LocalDateTime 对象</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// 打印当前日期和时间</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前日期和时间: "</span> <span class="token operator">+</span> now<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 创建一个特定的 LocalDateTime 对象</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">LocalDateTime</span> specificDate <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 打印特定日期和时间</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"特定日期和时间: "</span> <span class="token operator">+</span> specificDate<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        </pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 格式化日期和时间</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">DateTimeFormatter</span> formatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">String</span> formattedDateTime <span class="token operator">=</span> formatter<span class="token punctuation">.</span>format <span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Formatted Date Time: "</span> <span class="token operator">+</span> formattedDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="集合"><a class="anchor" href="#集合">#</a> 集合</h2>
<h3 id="集合体系图"><a class="anchor" href="#集合体系图">#</a> 集合体系图</h3>
<ul>
<li>单例集合：</li>
</ul>
<p><img loading="lazy" data-src="image-20240503214228202.png" alt="image-20240503214228202"></p>
<ul>
<li>双列集合（键值对）：</li>
</ul>
<p><img loading="lazy" data-src="image-20240503214444507.png" alt="image-20240503214444507"></p>
<h3 id="collection接口和常用方法"><a class="anchor" href="#collection接口和常用方法">#</a> Collection 接口和常用方法</h3>
<ol>
<li>
<p>Collection 实现子类可以存放多个元素，每个元素可以是 Object</p>
</li>
<li>
<p>有些 Collection 的实现类是有序的 (List)，有些不是有序 (Set)</p>
</li>
<li>
<p>有些 Collection 的实现类可以存放多个重复元素，有些不能</p>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="8"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="9"></td><td><pre> * @data 2024.5.3</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Collection_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">Collection</span> collection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// add(E e)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.add(): "</span> <span class="token operator">+</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        </pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">//remove(Object o)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        collection<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">//collection.remove (1);//Collection 删除不了指定下标的元素</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.remove (true): "</span> <span class="token operator">+</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        </pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">// 判空</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.isEmpty(): "</span> <span class="token operator">+</span> collection<span class="token punctuation">.</span>isEmpty <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 返回元素个数</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.size():"</span> <span class="token operator">+</span> collection<span class="token punctuation">.</span>size <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// 清空集合</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        collection<span class="token punctuation">.</span>clear <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.clear(): "</span> <span class="token operator">+</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        </pre></td></tr><tr><td data-num="35"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token comment">// 判断集合是否包含指定元素</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.contains (true):"</span> <span class="token operator">+</span>collection<span class="token punctuation">.</span>contains <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token comment">//list.remove (0);//List 可以删除指定下标的元素</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list:"</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        </pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token comment">// 判断集合是否包含多个元素</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.containsAll (list):"</span> <span class="token operator">+</span> collection<span class="token punctuation">.</span>containsAll <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        </pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token comment">// 删除多个元素</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>collection<span class="token punctuation">.</span>removeAll <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"collection.removeAll (list):"</span> <span class="token operator">+</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    </pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="collection遍历"><a class="anchor" href="#collection遍历">#</a> Collection 遍历</h3>
<ol>
<li>Iterator
<ol>
<li>Iterator 对象称为迭代器，用于遍历集合的元素</li>
<li>所有实现了<strong> Collection</strong> 接口的集合类都有一个 iterator () 方法，返回 iterator 接口对象，即返回一个迭代器</li>
<li>仅用于遍历集合，不存放对象</li>
</ol>
</li>
<li>hasNext ()：判断是否还有下一个元素</li>
<li>next()
<ol>
<li>指针下移</li>
<li>将下移后集合位置上的元素返回</li>
<li>返回的类型是 Object 类</li>
<li><img loading="lazy" data-src="image-20240503231943843.png" alt="image-20240503231943843"></li>
</ol>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="8"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="9"></td><td><pre> * @data 2024.5.3</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Collection_Traverse</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">//      遍历集合的代码示例</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">Book</span> book1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span> <span class="token punctuation">(</span><span class="token string">"Java"</span><span class="token punctuation">,</span> <span class="token number">10.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Book</span> book2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span> <span class="token punctuation">(</span><span class="token string">"C++"</span><span class="token punctuation">,</span> <span class="token number">15.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">Book</span> book3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span> <span class="token punctuation">(</span><span class="token string">"Python"</span><span class="token punctuation">,</span> <span class="token number">12.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">Collection</span> collection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span>book1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span>book2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        collection<span class="token punctuation">.</span>add <span class="token punctuation">(</span>book3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>collection<span class="token punctuation">.</span>size <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 遍历集合</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 方法 1：使用 iterator 遍历</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"使用iterator遍历"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> collection<span class="token punctuation">.</span>iterator <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span>hasNext <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">)</span> iterator<span class="token punctuation">.</span>next <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 向下转型</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>book<span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> book<span class="token punctuation">.</span>getPrice <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">// 方法 2：使用增强 for 循环遍历</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"使用增强for循环遍历:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token operator">:</span>collection<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token comment">// 注意：这里需要强制类型转换</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token comment">// 因为增强 for 循环遍历集合时，返回的是 Object 类型的对象</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token comment">// 需要使用 Book 类的方法</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token comment">// 需要] 将其转换为 Book 类型</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>book<span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> book<span class="token punctuation">.</span>getPrice <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Book</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">double</span> <span class="token class-name">Price</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    </pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token punctuation">,</span> <span class="token keyword">double</span> price<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token class-name">Price</span> <span class="token operator">=</span> price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    </pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token keyword">return</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    </pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> setName <span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    </pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">double</span> getPrice <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token keyword">return</span> <span class="token class-name">Price</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    </pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> setPrice <span class="token punctuation">(</span><span class="token keyword">double</span> price<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token class-name">Price</span> <span class="token operator">=</span> price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="collections工具类"><a class="anchor" href="#collections工具类">#</a> Collections 工具类</h3>
<h4 id="基本介绍-2"><a class="anchor" href="#基本介绍-2">#</a> 基本介绍</h4>
<ol>
<li>Collections 是一个操作 Set、List、和 Map 等集合的工具类</li>
<li>Collections 提供了一系列静态方法对集合元素进行排序、查询和修改等操作</li>
</ol>
<h4 id="排序"><a class="anchor" href="#排序">#</a> 排序</h4>
<ol>
<li>reverse (list): 反转元素顺序</li>
<li>shufffle (list): 随机排序</li>
<li>sort (list)：根据元素自然排序对 list 集合升序排序</li>
<li>sort (list,Comparetor): 根据指定的 Comparetor 产生的顺序排序</li>
<li>swap (list,int i,int j): 将集合 list 位置 i 和 j 处元素交换顺序</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>all</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.8</pre></td></tr><tr><td data-num="8"></td><td><pre> * Collection 的工具类</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Methods01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"pear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"原始顺序："</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 反转元素顺序</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">Collections</span><span class="token punctuation">.</span>reverse <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"反转后的顺序："</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 随机打乱元素顺序</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">Collections</span><span class="token punctuation">.</span>shuffle <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"打乱后的顺序："</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 对元素进行自然排序</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">Collections</span><span class="token punctuation">.</span>sort <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"自然排序后的顺序："</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// 对元素进行自定义排序</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">Collections</span><span class="token punctuation">.</span>sort <span class="token punctuation">(</span>list <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">int</span> compare <span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o1<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"自定义排序后的顺序："</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token comment">// 交换顺序</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">Collections</span><span class="token punctuation">.</span>swap <span class="token punctuation">(</span>list<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"交换后的顺序："</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="查找-替换"><a class="anchor" href="#查找-替换">#</a> 查找、替换</h4>
<ol>
<li>max (list): 根据元素自然排序，返回最大元素</li>
<li>max (list,Comparetor): 根据 Comparetor 指定的顺序，返回 list 集合中是最大元素</li>
<li>min(list),min(list,Comparator)</li>
<li>int frequency (list,Object): 返回 list 集合里 Object 的出现次数</li>
<li>void copy (list,src): 将 src 内容赋值到 list 中，首先需要将 list 的大小设置和 src 相等</li>
<li>boolean replaceAll (list,oldvalue,newvalue): 使用新值替换所有旧值</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>all</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.8</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Methods02</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">List</span> list02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        list02<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        list02<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"merry"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        list02<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        list02<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"路易"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        list02<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"原始列表："</span> <span class="token operator">+</span> list02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// max</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"lise02中自然排序的最大元素： "</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>max <span class="token punctuation">(</span>list02<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 自定义 max</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list02中按照字符串长度排序的最大元素："</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>max <span class="token punctuation">(</span>list02 <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">int</span> compare <span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o1<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">// min</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list02中自然排序的最小元素："</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>min <span class="token punctuation">(</span>list02<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 自定义 min</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list02中按照字符串长度排序的最小元素："</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>min <span class="token punctuation">(</span>list02 <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">int</span> compare <span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o1<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token comment">// frequency</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        list02<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list02中john的个数："</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>frequency <span class="token punctuation">(</span>list02 <span class="token punctuation">,</span> <span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">List</span> listCopy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token comment">// copy</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list02<span class="token punctuation">.</span>size <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            listCopy<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token class-name">Collections</span><span class="token punctuation">.</span>copy <span class="token punctuation">(</span>listCopy <span class="token punctuation">,</span> list02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list02："</span> <span class="token operator">+</span> list02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"listCopy："</span> <span class="token operator">+</span> listCopy<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token comment">// replaceAll</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"将‘john’全部替换成‘汤姆’："</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>replaceAll <span class="token punctuation">(</span>list02 <span class="token punctuation">,</span> <span class="token string">"john"</span> <span class="token punctuation">,</span> <span class="token string">"汤姆"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list02："</span> <span class="token operator">+</span> list02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="list接口"><a class="anchor" href="#list接口">#</a> List 接口</h3>
<h4 id="list接口基本介绍"><a class="anchor" href="#list接口基本介绍">#</a> List 接口基本介绍</h4>
<ol>
<li>List 集合类中的元素有序（即添加顺序和取出顺序一致），可重复</li>
<li>List 集合类中每个元素都有对应的顺序索引，可以根据索引进行相关操作</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.3</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">List_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">List</span> list1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">List</span> list2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 添加元素</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            list1<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"元素"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            list2<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"元素"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"添加元素后的列表list1："</span> <span class="token operator">+</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"添加元素后的列表list2："</span> <span class="token operator">+</span> list2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 在指定位置插入元素</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"元素6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在指定位置2插入元素后的列表："</span> <span class="token operator">+</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// 从指定位置开始将 list2 的元素添加到 list1 中</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        list1<span class="token punctuation">.</span>addAll <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> list2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"将list2的元素添加到list1位置1中后的列表："</span> <span class="token operator">+</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 获取指定位置的元素</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"list1集合中索引为2的元素："</span> <span class="token operator">+</span> list1<span class="token punctuation">.</span>get <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// 返回指定元素在集合中第一次出现的索引</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"元素6在list1集合中第一次出现的索引："</span> <span class="token operator">+</span> list1<span class="token punctuation">.</span>indexOf <span class="token punctuation">(</span><span class="token string">"元素6"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token comment">// 返回指定元素在集合中最后一次出现的索引</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"元素6在list1集合中最后一次出现的索引："</span> <span class="token operator">+</span> list1<span class="token punctuation">.</span>lastIndexOf <span class="token punctuation">(</span><span class="token string">"元素6"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">// 删除指定位置的元素</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        list1<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"删除指定位置1元素后的列表："</span> <span class="token operator">+</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 删除指定元素，并返回此元素</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        list1<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token string">"元素6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"删除指定元素后的列表："</span> <span class="token operator">+</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token comment">// 设置指定位置的元素，相当于覆盖</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        list1<span class="token punctuation">.</span>set <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"枫"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"设置指定位置2元素后的列表："</span> <span class="token operator">+</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>遍历方式同 Collection</p>
</blockquote>
<h3 id="arraylist"><a class="anchor" href="#arraylist">#</a> ArrayList</h3>
<h4 id="扩容机制"><a class="anchor" href="#扩容机制">#</a> 扩容机制</h4>
<ol>
<li>
<p>ArrayList 维护了一个 Object 类的数组 elementData（ <code>transient Object[] elementData;</code> ）transient 表示暂时的，瞬间的，属性不会被序列化</p>
</li>
<li>
<p>无参创建 ArrayList 对象时，elementData 容量为 0，第一次添加数据，elementData 容量扩容为 10，以后每次扩容为原容量的 1.5 倍</p>
</li>
<li>
<p>有参创建 ArrayList 对象时，elementData 容量为指定大小，以后每次扩容为原容量的 1.5 倍</p>
</li>
<li>
<p>不安全，效率高</p>
</li>
<li>
<p>如下代码可自行追溯源码</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.4</pre></td></tr><tr><td data-num="8"></td><td><pre> * 数组的扩容机制</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList_Expand</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 无参构造方法创建 ArrayList</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">ArrayList</span> arrayList1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            arrayList1<span class="token punctuation">.</span>add <span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"arrayList1: "</span> <span class="token operator">+</span> arrayList1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        </pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 指定初始容量构造方法创建 ArrayList</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">ArrayList</span> arrayList2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            arrayList2<span class="token punctuation">.</span>add <span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"arrayList2: "</span> <span class="token operator">+</span> arrayList2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ol>
<h3 id="vector"><a class="anchor" href="#vector">#</a> Vector</h3>
<ol>
<li>Vector 维护了一个 Object 类的数组 elementData（ <code>transient Object[] elementData;</code> ）transient 表示暂时的，瞬间的，属性不会被序列化</li>
<li>Vector 是线程同步的，即线程安全，Vector 的操作方法带有 sysnchronized</li>
<li>开发中，需要线程同步安全考虑使用 Vector</li>
<li>无参创建 Vector 对象时，elementData 容量为 0，第一次添加数据，elementData 容量扩容为 10，以后每次扩容为原容量的 2 倍</li>
<li>有参创建 Vector 对象时，elementData 容量为指定大小，以后每次扩容为原容量的 2 倍</li>
<li>安全，效率不高</li>
</ol>
<h3 id="linkedlist"><a class="anchor" href="#linkedlist">#</a> LinkedList</h3>
<h4 id="底层结构"><a class="anchor" href="#底层结构">#</a> 底层结构</h4>
<ol>
<li>LinkedList 底层实现了双向链表和双端队列</li>
<li>可以添加任意元素（包括 null），元素可以重复</li>
<li>线程不安全，没有实现同步</li>
<li>LinkedList 底层维护了一个双向链表，两个属性 first 和 last 分别指向首节点和尾结点，每个 Node 对象里面维护了 prev,next,item 三个属性</li>
<li>如下代码可自行追溯源码<img loading="lazy" data-src="image-20240504151118488.png" alt="image-20240504151118488"></li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">E</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> prev<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedList</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.4</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedList_Test</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">LinkedList</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        list<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        </pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        list<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        list<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        </pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    </pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="set接口"><a class="anchor" href="#set接口">#</a> Set 接口</h3>
<h4 id="set基本介绍"><a class="anchor" href="#set基本介绍">#</a> Set 基本介绍</h4>
<ol>
<li>无序（添加和取出的顺序不一致），没有索引</li>
<li>不允许重复元素</li>
<li>最多包含一个 null</li>
</ol>
<h4 id="set接口和常用方法"><a class="anchor" href="#set接口和常用方法">#</a> Set 接口和常用方法</h4>
<ol>
<li>和 List 接口一样，Set 接口也是 Collection 的子接口，常用方法和 Collection 接口一样</li>
<li>接口的遍历方式：
<ol>
<li>迭代器 iterator</li>
<li>增强 for</li>
<li>不能使用索引方式获取</li>
</ol>
</li>
</ol>
<h4 id="hashset类实现了set接口"><a class="anchor" href="#hashset类实现了set接口">#</a> HashSet 类 — 实现了 Set 接口</h4>
<ol>
<li>HashSet 实际上是 HashMap</li>
<li>可以存放 null 值，只能有一个</li>
<li>HashSet 不保证元素有序，取决于 hash 后再确定索引结果</li>
<li>不能有重复的元素或对象</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// 1. HashSet 不保证元素有序，取决于 hash 后再确定索引结果</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 2. 不能有重复的元素或对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">HashSet</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        set<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        set<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 不会重复添加 feng</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 两个对象不同，可以添加，如果想要不重复，需要重写 equals 和 hashCode 方法</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        set<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span><span class="token string">"xin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        set<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span><span class="token string">"xin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// String 类的 xin 在常量池只有一份，不会重复添加 xin</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="hashset的底层机制"><a class="anchor" href="#hashset的底层机制">#</a> HashSet 的底层机制</h4>
<ul>
<li>HashSet 的底层是 HashMap,HashMap 的底层是数组 + 链表 + 红黑树</li>
</ul>
<ol>
<li>先获取元素的哈希值（hashCode () 方法）</li>
<li>对哈希值进行运算，得出一个索引值，即要存放在哈希表的位置</li>
<li>如果该位置没有其他元素，直接存放</li>
<li>如果该位置已经存放其他元素，则进行 equals () 判断，相等不添加，否则以链表的方式添加到最后</li>
<li>HashSet 第一次添加时 table 扩容到 16，临界值 0.75*16 = 12,；如果 table 数组使用到临界值 12，数组扩容到 32，临界值为 32 * 0.75 = 24，依次类推 (<em><strong>注意：在任意位置达到临界值即可，不一定非要在一条链表上，源码解释如下</strong></em>)</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 每加入一个结点，size++</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">></span> threshold<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ol>
<li>Java8 中，如果一条链表的元素个数到达 TREEIFY_THRESHOLD（默认是 8），且 table 大小 &gt;= MIN_TREEIFY_CAPACITY（默认 64），这条链表就会进行树化（红黑树）</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                        p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>                        <span class="token comment">// 添加都末尾后立即判断是否有 8 个结点，即 binCount=7</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">>=</span> <span class="token constant">TREEIFY_THRESHOLD</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1 for 1st   binCount >= 7</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                            <span class="token comment">//8 个结点，对当前链表进行树化</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                            <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                        <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">treeifyBin</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> hash<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">int</span> n<span class="token punctuation">,</span> index<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 如果 table 数组大小 &lt; 64</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token constant">MIN_TREEIFY_CAPACITY</span><span class="token punctuation">)</span><span class="token comment">//MIN_TREEIFY_CAPACITY = 64</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 用扩容解决</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">elseif</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token comment">// 树化</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr></table></figure><p><img loading="lazy" data-src="image-20240505171610750.png" alt="image-20240505171610750"></p>
<h4 id="hashset底层源码"><a class="anchor" href="#hashset底层源码">#</a> HashSet 底层源码</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">HashSet</span> hashSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        hashSet<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        hashSet<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"xin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        hashSet<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//1 执行的源码</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//map = null</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">protected</span> <span class="token class-name">AbstractSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">protected</span> <span class="token class-name">AbstractCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> <span class="token constant">DEFAULT_LOAD_FACTOR</span><span class="token punctuation">;</span> <span class="token comment">// all other fields defaulted，DEFAULT_LOAD_FACTOR = 0.75</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 2 执行的源码</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token constant">PRESENT</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// 调用 put 方法，e = fengstatic final Object PRESENT = new Object (); 目前没有什么意义，占位</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//key = feng,value = PRESENT</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// hash(key):</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">int</span> h<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">>>></span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回 key 的无符号向右移 16 位的哈希值，防止冲突</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                   <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span><span class="token comment">// 辅助变量</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">//transient Node&lt;K,V>[] table;// 放 Node 结点的一个数组，此时 table = null</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 如果 table == null 进行第一次扩容，大小 16</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            n <span class="token operator">=</span> <span class="token punctuation">(</span>tab <span class="token operator">=</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token comment">// 执行 resize ()，n = 16</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 根据 key 的 hash 值，计算 key 应该存放到表的哪个索引位置</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">//(n - 1) &amp; hash 位运算 确保不同的键映射到不同的索引上，从而避免冲突</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> tab<span class="token punctuation">[</span>i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">// 判断结点 p 为空</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            tab<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建 Node 存放 key</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">/* 本次代码不执行：</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        else &#123;</pre></td></tr><tr><td data-num="29"></td><td><pre>            Node&lt;K,V> e; K k;</pre></td></tr><tr><td data-num="30"></td><td><pre>            if (p.hash == hash &amp;&amp;</pre></td></tr><tr><td data-num="31"></td><td><pre>                ((k = p.key) == key || (key != null &amp;&amp; key.equals (k))))</pre></td></tr><tr><td data-num="32"></td><td><pre>                e = p;</pre></td></tr><tr><td data-num="33"></td><td><pre>            else if (p instanceof TreeNode)</pre></td></tr><tr><td data-num="34"></td><td><pre>                e = ((TreeNode&lt;K,V>) p).putTreeVal (this, tab, hash, key, value);</pre></td></tr><tr><td data-num="35"></td><td><pre>            else &#123;</pre></td></tr><tr><td data-num="36"></td><td><pre>                for (int binCount = 0; ; ++binCount) &#123;</pre></td></tr><tr><td data-num="37"></td><td><pre>                    if ((e = p.next) == null) &#123;</pre></td></tr><tr><td data-num="38"></td><td><pre>                        p.next = newNode (hash, key, value, null);</pre></td></tr><tr><td data-num="39"></td><td><pre>                        if (binCount >= TREEIFY_THRESHOLD - 1) //-1 for 1st</pre></td></tr><tr><td data-num="40"></td><td><pre>                            treeifyBin (tab, hash);</pre></td></tr><tr><td data-num="41"></td><td><pre>                        break;</pre></td></tr><tr><td data-num="42"></td><td><pre>                    &#125;</pre></td></tr><tr><td data-num="43"></td><td><pre>                    if (e.hash == hash &amp;&amp;</pre></td></tr><tr><td data-num="44"></td><td><pre>                        ((k = e.key) == key || (key != null &amp;&amp; key.equals (k))))</pre></td></tr><tr><td data-num="45"></td><td><pre>                        break;</pre></td></tr><tr><td data-num="46"></td><td><pre>                    p = e;</pre></td></tr><tr><td data-num="47"></td><td><pre>                &#125;</pre></td></tr><tr><td data-num="48"></td><td><pre>            &#125;</pre></td></tr><tr><td data-num="49"></td><td><pre>            if (e != null) &#123; //existing mapping for key</pre></td></tr><tr><td data-num="50"></td><td><pre>                V oldValue = e.value;</pre></td></tr><tr><td data-num="51"></td><td><pre>                if (!onlyIfAbsent || oldValue == null)</pre></td></tr><tr><td data-num="52"></td><td><pre>                    e.value = value;</pre></td></tr><tr><td data-num="53"></td><td><pre>                afterNodeAccess (e);</pre></td></tr><tr><td data-num="54"></td><td><pre>                return oldValue;</pre></td></tr><tr><td data-num="55"></td><td><pre>            &#125;</pre></td></tr><tr><td data-num="56"></td><td><pre>        &#125;</pre></td></tr><tr><td data-num="57"></td><td><pre>        */</pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token operator">++</span>modCount<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token comment">// 每加入一个结点，size++</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">></span> threshold<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="61"></td><td><pre>            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//void afterNodeInsertion(boolean evict) &#123; &#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>   </pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="67"></td><td><pre>  <span class="token comment">// 执行 resize ()</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> oldTab <span class="token operator">=</span> table<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>        <span class="token keyword">int</span> oldCap <span class="token operator">=</span> <span class="token punctuation">(</span>oldTab <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> oldTab<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        <span class="token keyword">int</span> oldThr <span class="token operator">=</span> threshold<span class="token punctuation">;</span><span class="token comment">//threshold 是阈值</span></pre></td></tr><tr><td data-num="72"></td><td><pre>        <span class="token keyword">int</span> newCap<span class="token punctuation">,</span> newThr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">// zero initial threshold signifies using defaults</span></pre></td></tr><tr><td data-num="75"></td><td><pre>                newCap <span class="token operator">=</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">;</span><span class="token comment">//16</span></pre></td></tr><tr><td data-num="76"></td><td><pre>                newThr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_LOAD_FACTOR</span> <span class="token operator">*</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0.75 * 16 = 12 当用完 12 个空间时需要进行 table 扩容</span></pre></td></tr><tr><td data-num="77"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="79"></td><td><pre>        threshold <span class="token operator">=</span> newThr<span class="token punctuation">;</span><span class="token comment">// 阈值为 12</span></pre></td></tr><tr><td data-num="80"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> newTab <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">[</span>newCap<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 新的 Node 数组，大小为 16</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        table <span class="token operator">=</span> newTab<span class="token punctuation">;</span><span class="token comment">// 赋值 table 新空间</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token keyword">return</span> newTab<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token comment">// 结束 resize ()</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 4 执行的源码 相同元素不重复添加的演示</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token constant">PRESENT</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 目前没有什么意义，占位</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token constant">PRESENT</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">// 调用 put 方法，e = feng</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//key = feng,value = PRESENT</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// hash(key):</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">int</span> h<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">>>></span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回 key 的无符号向右移 16 位的哈希值，防止冲突</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                   <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">/* 不执行：</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        if ((tab = table) == null || (n = tab.length) == 0)</pre></td></tr><tr><td data-num="22"></td><td><pre>            n = (tab = resize ()).length;</pre></td></tr><tr><td data-num="23"></td><td><pre>        if ((p = tab [i = (n - 1) &amp; hash]) == null)//feng 的位置不为空</pre></td></tr><tr><td data-num="24"></td><td><pre>            tab [i] = newNode (hash, key, value, null); */</pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token comment">// 此时 p 指向当前索引位置对应链表的第一个位置</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token comment">// 当前索引位置的 hash 值和欲添加元素 hash 值比较</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token comment">// 针对对象有多个元素的比较，如 new Cat (name,age)，地址不一样，但是内容一样也判定为相同元素</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token comment">//equals () 由程序员决定功能实现，重写 equals 和 hashCode</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token comment">//(k = p.key) == key 当前索引位置的 key 和欲添加元素 key 的地址比较</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token comment">//(key != null &amp;&amp; key.equals (k)) 当前索引位置的 key 和欲添加元素 key 的内容比较</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                e <span class="token operator">=</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token comment">/* 本次不执行：</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            // 判断是否为一棵红黑树</pre></td></tr><tr><td data-num="38"></td><td><pre>            else if (p instanceof TreeNode)</pre></td></tr><tr><td data-num="39"></td><td><pre>                e = ((TreeNode&lt;K,V>) p).putTreeVal (this, tab, hash, key, value);</pre></td></tr><tr><td data-num="40"></td><td><pre>            // 如果该位置为一条链表，使用 for 循环依次比较</pre></td></tr><tr><td data-num="41"></td><td><pre>            else &#123;</pre></td></tr><tr><td data-num="42"></td><td><pre>                for (int binCount = 0; ; ++binCount) &#123;</pre></td></tr><tr><td data-num="43"></td><td><pre>                    // 如果所有元素都不同，则直接将此元素加到链表末尾</pre></td></tr><tr><td data-num="44"></td><td><pre>                    if ((e = p.next) == null) &#123;</pre></td></tr><tr><td data-num="45"></td><td><pre>                        p.next = newNode (hash, key, value, null);</pre></td></tr><tr><td data-num="46"></td><td><pre>                        // 添加都末尾后立即判断是否有 9 个结点，即 binCount=7，遍历到原有的第 8 个结点，此时加入新节点即 9 个结点</pre></td></tr><tr><td data-num="47"></td><td><pre>                        if (binCount >= TREEIFY_THRESHOLD - 1) //-1 for 1st   binCount >= 7</pre></td></tr><tr><td data-num="48"></td><td><pre>                            //9 个结点，对当前链表进行树化</pre></td></tr><tr><td data-num="49"></td><td><pre>                            treeifyBin (tab, hash);</pre></td></tr><tr><td data-num="50"></td><td><pre>                        break;</pre></td></tr><tr><td data-num="51"></td><td><pre>                    &#125;</pre></td></tr><tr><td data-num="52"></td><td><pre>                    // 存在相同元素，放弃添加</pre></td></tr><tr><td data-num="53"></td><td><pre>                    if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals (k))))</pre></td></tr><tr><td data-num="54"></td><td><pre>                        break;</pre></td></tr><tr><td data-num="55"></td><td><pre>                    //e = p.next, 所以 p = p.next</pre></td></tr><tr><td data-num="56"></td><td><pre>                    p = e;</pre></td></tr><tr><td data-num="57"></td><td><pre>                &#125;</pre></td></tr><tr><td data-num="58"></td><td><pre>            &#125; */</pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// existing mapping for key</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                <span class="token class-name">V</span> oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token comment">//boolean onlyIfAbsent:if true, don't change existing value</span></pre></td></tr><tr><td data-num="62"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="63"></td><td><pre>                    e<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>                <span class="token function">afterNodeAccess</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>                <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token comment">/* 本次不执行：</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        ++modCount;</pre></td></tr><tr><td data-num="70"></td><td><pre>        if (++size> threshold)</pre></td></tr><tr><td data-num="71"></td><td><pre>            resize ();</pre></td></tr><tr><td data-num="72"></td><td><pre>        afterNodeInsertion (evict);</pre></td></tr><tr><td data-num="73"></td><td><pre>        return null;*/</pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 树化</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">treeifyBin</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> hash<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> n<span class="token punctuation">,</span> index<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 如果 table 数组大小 &lt; 64</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token constant">MIN_TREEIFY_CAPACITY</span><span class="token punctuation">)</span><span class="token comment">//MIN_TREEIFY_CAPACITY = 64</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 用扩容解决</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> tab<span class="token punctuation">[</span>index <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> hd <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> tl <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token keyword">do</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p <span class="token operator">=</span> <span class="token function">replacementTreeNode</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>tl <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>                    hd <span class="token operator">=</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                    p<span class="token punctuation">.</span>prev <span class="token operator">=</span> tl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                    tl<span class="token punctuation">.</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                tl <span class="token operator">=</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> hd<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                hd<span class="token punctuation">.</span><span class="token function">treeify</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="linkedhashset"><a class="anchor" href="#linkedhashset">#</a> LinkedHashSet</h4>
<ul>
<li>
<p>LinkedHashSet 是 HashSet 的子类</p>
</li>
<li>
<p>LinkedHashSet 底层是 LinkedHashMap，底层维护了一个数组 + 双向链表</p>
</li>
<li>
<p>LinkedHashSet 根据元素的 hashCode 值决定元素的存储位置，同时使用链表维护元素的次序</p>
</li>
<li>
<p>LinkedHashSet 不允许添加重复元素</p>
</li>
</ul>
<p><img loading="lazy" data-src="image-20240509233135464.png" alt="image-20240509233135464"></p>
<ul>
<li>在 LinkedHashSet 中维护了一个 hash 表和双向链表 (LinkedHashSet 有 head 和 tail，指向头，尾结点)</li>
<li>每一个节点有 pre 和 next 属性，这样可以形成双向链表</li>
<li>在添加一个元素时，先求 hash 值，在求索引，确定该元素在 hashtable 的位置，然局将添加的元素加入到双向链表 (如果已经存在，不添加 [原则和 hashset 一样])<br>
 tail.next = newElement // 简单指定<br>
 newElement.pre = tail<br>
tail = newElement;</li>
<li>这样的话，我们遍历 LinkedHashSet 也能确保插入顺序和遍历顺序一致</li>
</ul>
<h4 id="linkedhashset底层源码"><a class="anchor" href="#linkedhashset底层源码">#</a> LinkedHashSet 底层源码</h4>
<ul>
<li>
<p>LinkedHashSet 加入顺序和取出顺序一致</p>
</li>
<li>
<p>LinkedHashSet 底层是 LinkedHashMap（HashMap 的子类）</p>
</li>
<li>
<p>第一次添加时，直接将 table 数组扩容到 16，table 类型是 HashMap$Node, 存放的结点类型是 LinkedHashMap$Entry（多态数组）（ <code>Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt;</code> ），HashMap.Node 是静态内部类</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">newNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">LinkedHashMap<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p <span class="token operator">=</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token function">linkNodeAtEnd</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">return</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">HashMap<span class="token punctuation">.</span>Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> before<span class="token punctuation">,</span> after<span class="token punctuation">;</span><span class="token comment">// 实现双向链表的连接</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">super</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="treeset"><a class="anchor" href="#treeset">#</a> TreeSet</h4>
<h5 id="基本介绍-3"><a class="anchor" href="#基本介绍-3">#</a> 基本介绍</h5>
<ul>
<li>底层是 TreeMap</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>set</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TreeSet</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.7</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span> <span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSet01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">TreeSet</span> treeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">int</span> compare <span class="token punctuation">(</span><span class="token class-name">Object</span> o1 <span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token comment">// 通过比较字符串大小决定排序</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                <span class="token comment">// return ((String)o1).compareTo ((String)o2);</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                </pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token comment">// 通过比较字符串长度决定排序</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token comment">// return ((String) o1).length () - ((String) o2).length ();</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                </pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token comment">// 先比较长度，长度一样再比较大小</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o2<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o1<span class="token punctuation">)</span><span class="token punctuation">.</span>compareTo <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o2<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                </pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token comment">// 通过比较字符串中第一个字母决定排序</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token comment">// return ((String)o1).charAt (0) - ((String)o2).charAt (0);</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            </pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        treeSet<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        treeSet<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        treeSet<span class="token punctuation">.</span>add <span class="token punctuation">(</span><span class="token string">"orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 由于长度一样，所以不会被添加</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>treeSet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h5 id="底层源码"><a class="anchor" href="#底层源码">#</a> 底层源码</h5>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">></span></span> comparator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>comparator<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 将传入的比较器对象赋值给底层 TreeMap 的属性 comparator</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> comparator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>add 方法：</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">return</span> m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token constant">PRESENT</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 添加第二个元素时：</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> replaceOld<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> t <span class="token operator">=</span> root<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">/* 这里是第一次添加时的操作</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        if (t == null) &#123;</pre></td></tr><tr><td data-num="7"></td><td><pre>            addEntryToEmptyMap (key, value);</pre></td></tr><tr><td data-num="8"></td><td><pre>            return null;</pre></td></tr><tr><td data-num="9"></td><td><pre>        &#125;</pre></td></tr><tr><td data-num="10"></td><td><pre>        */</pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">int</span> cmp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> parent<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// split comparator and comparable paths</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> cpr <span class="token operator">=</span> comparator<span class="token punctuation">;</span><span class="token comment">// 传入的匿名比较器对象赋值</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>cpr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token keyword">do</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                parent <span class="token operator">=</span> t<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                cmp <span class="token operator">=</span> cpr<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> t<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 动态绑定机制，到传入匿名内部类的 compare 方法中</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                    t <span class="token operator">=</span> t<span class="token punctuation">.</span>left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                    t <span class="token operator">=</span> t<span class="token punctuation">.</span>right<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// 相等就不加入</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                    <span class="token class-name">V</span> oldValue <span class="token operator">=</span> t<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>replaceOld <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                        t<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">/* 本次不执行</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        else &#123;</pre></td></tr><tr><td data-num="34"></td><td><pre>            Objects.requireNonNull (key);</pre></td></tr><tr><td data-num="35"></td><td><pre>            @SuppressWarnings ("unchecked")</pre></td></tr><tr><td data-num="36"></td><td><pre>            Comparable&lt;? super K> k = (Comparable&lt;? super K>) key;</pre></td></tr><tr><td data-num="37"></td><td><pre>            do &#123;</pre></td></tr><tr><td data-num="38"></td><td><pre>                parent = t;</pre></td></tr><tr><td data-num="39"></td><td><pre>                cmp = k.compareTo (t.key);</pre></td></tr><tr><td data-num="40"></td><td><pre>                if (cmp &lt; 0)</pre></td></tr><tr><td data-num="41"></td><td><pre>                    t = t.left;</pre></td></tr><tr><td data-num="42"></td><td><pre>                else if (cmp > 0)</pre></td></tr><tr><td data-num="43"></td><td><pre>                    t = t.right;</pre></td></tr><tr><td data-num="44"></td><td><pre>                else &#123;</pre></td></tr><tr><td data-num="45"></td><td><pre>                    V oldValue = t.value;</pre></td></tr><tr><td data-num="46"></td><td><pre>                    if (replaceOld || oldValue == null) &#123;</pre></td></tr><tr><td data-num="47"></td><td><pre>                        t.value = value;</pre></td></tr><tr><td data-num="48"></td><td><pre>                    &#125;</pre></td></tr><tr><td data-num="49"></td><td><pre>                    return oldValue;</pre></td></tr><tr><td data-num="50"></td><td><pre>                &#125;</pre></td></tr><tr><td data-num="51"></td><td><pre>            &#125; while (t != null);</pre></td></tr><tr><td data-num="52"></td><td><pre>        &#125;*/</pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token function">addEntry</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="map接口"><a class="anchor" href="#map接口">#</a> Map 接口</h3>
<h4 id="接口实现类特点"><a class="anchor" href="#接口实现类特点">#</a> 接口实现类特点</h4>
<ul>
<li>
<p>Map 与 Collection 并列存在，用于保存具有映射关系的数据：Key-Value</p>
</li>
<li>
<p>Map 中的 key 和 value 可以是任何引用类型的数据，会封装到 HashMap$Node 对象中</p>
</li>
<li>
<p>Map 中 key 不允许重复，原因和 HashSet 一样，如果相同则会覆盖原数据</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// existing mapping for key</span></pre></td></tr><tr><td data-num="2"></td><td><pre>                <span class="token class-name">V</span> oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                <span class="token comment">//boolean onlyIfAbsent:if true, don't change existing value</span></pre></td></tr><tr><td data-num="4"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                    e<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token comment">// 这里进行覆盖</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token function">afterNodeAccess</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li></li>
</ul>
</li>
<li>
<p>Map 中的 value 可以重复</p>
</li>
<li>
<p>Map 中的 key 和 value 都可以为 null，key 为 null 只能有一个，value 为 null 可以有多个</p>
</li>
<li>
<p>常用 String 类作为 Map 中的 key，当然也可以为其他任意类型</p>
</li>
<li>
<p>key 一对一 value，指定的 key 可以找到唯一的 value</p>
</li>
<li>
<p>value 一对多 key</p>
</li>
</ul>
<pre><code class="language-JAVA">public class Map01 &#123;
    public static void main (String[] args) &#123;
        Map map = new HashMap ();
        // key一对一value,Map中key不允许重复，原因和HashSet一样，如果相同则会覆盖原数据
        map.put(&quot;key1&quot;, &quot;value1&quot;);
        map.put(&quot;key1&quot;, &quot;value2&quot;);//value2覆盖value1
        // value一对多key,Map中的value可以重复
        map.put(&quot;key2&quot;, &quot;value2&quot;);
        map.put(&quot;key3&quot;, &quot;value2&quot;);
        // 常用String类作为Map中的key，当然也可以为其他任意类型
        map.put(new CAT_(), new DOG ());
        System.out.println (map);
    &#125;
&#125;
class CAT_&#123;&#125;
class DOG&#123;&#125;
</code></pre>
<h4 id="底层源码-2"><a class="anchor" href="#底层源码-2">#</a> 底层源码</h4>
<ol>
<li>存放的 k-v 最终类型是 HashMap$Node</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">newNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span></pre></td></tr></table></figure><ol start="2">
<li>
<p>为了方便遍历，Java 进行如下设置：</p>
<ol>
<li>
<p>创建 EntrySet 集合，存放 Entry 类，一个 Entry 对象就有 Node 类型的 k-v 对 （Entry 类是 Map.Entry 接口的一个实现）</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">transient</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> entrySet<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 获取键的集合</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Set</span> set1 <span class="token operator">=</span> map<span class="token punctuation">.</span>keySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>set1<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 遍历键的集合</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> set1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 获取值的集合</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Collection</span> values <span class="token operator">=</span> map<span class="token punctuation">.</span>values <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>values<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 遍历值的集合</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">/* 结果：</span></pre></td></tr><tr><td data-num="18"></td><td><pre>class java.util.HashMap$KeySet</pre></td></tr><tr><td data-num="19"></td><td><pre>key1</pre></td></tr><tr><td data-num="20"></td><td><pre>key2</pre></td></tr><tr><td data-num="21"></td><td><pre>class java.util.HashMap$Values</pre></td></tr><tr><td data-num="22"></td><td><pre>value1</pre></td></tr><tr><td data-num="23"></td><td><pre>value2</pre></td></tr><tr><td data-num="24"></td><td><pre>*/</pre></td></tr></table></figure><p><img loading="lazy" data-src="image-20240506204047735.png" alt="image-20240506204047735"></p>
<blockquote>
<p>注：EntrySet 存放的是地址</p>
</blockquote>
</li>
</ol>
</li>
<li>
<p>entrySet 中，定义类型是 Map.Entry，实际上存放的还是 HashMap$Node (因为 <code>static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt;</code>  所以编译类型是 Entry, 运行类型是 HashMap$Node)</p>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span><span class="token punctuation">></span></span> es<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">return</span> <span class="token punctuation">(</span>es <span class="token operator">=</span> entrySet<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token punctuation">(</span>entrySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> es<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">V</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> next<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>hash <span class="token operator">=</span> hash<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Set</span> set <span class="token operator">=</span> map<span class="token punctuation">.</span>entrySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//set 的运行类是 HashMap$EntrySet</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/* 当调用 HashMap 的 entrySet () 方法时，它会返回一个 Set 集合，其中包含了 HashMap 中的所有键值对。这个 Set 集合的运行类是 HashMap$EntrySet，它是 HashMap 的一个内部类，用于存储 Map.Entry 类型的元素 */</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>set<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        </pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>			<span class="token comment">// 向下转型，因为 Map.Entry 接口提供 getKey 和 getValue 方法</span></pre></td></tr><tr><td data-num="12"></td><td><pre>			<span class="token comment">//o 实际上是一个 HashMap$Node 类型的对象，而不是一个 HashMap 类型的对象</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token comment">// 而 HashMap$Node 类实现了这两个方法</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token comment">// 所以我们可以将 o 转换为 Map.Entry 类型，然后调用 getKey 和 getValue 方法</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>getKey <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span>getValue <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token class-name">Set</span> set1 <span class="token operator">=</span> map<span class="token punctuation">.</span>keySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>set1<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> set1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">Collection</span> values <span class="token operator">=</span> map<span class="token punctuation">.</span>values <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>values<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img loading="lazy" data-src="image-20240506202638991.png" alt="image-20240506202638991"></p>
<ul>
<li>EntrySet 集合存放 Node 对象的地址，不创建新的对象</li>
</ul>
<h4 id="map常用方法"><a class="anchor" href="#map常用方法">#</a> Map 常用方法</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Map03_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key3"</span><span class="token punctuation">,</span> <span class="token string">"value3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        </pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 获取 Map 中的所有键</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"所有键: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>keySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        </pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 获取 Map 中的所有值</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"所有值: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>values <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 获取指定键的值</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"键key2对应的值: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>get <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        </pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 检查 Map 是否包含指定键</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Map是否包含键key2: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>containsKey <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        </pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 检查 Map 是否包含指定值</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Map是否包含值value2: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>containsValue <span class="token punctuation">(</span><span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        </pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 获取 Map 的大小</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Map的大小: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>size <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        </pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// 检查 Map 是否为空</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Map是否为空: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>isEmpty <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        </pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 删除指定键的映射</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        map<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        </pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// 遍历 Map 中的键值对</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">Set</span> set <span class="token operator">=</span> map<span class="token punctuation">.</span>entrySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        </pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token comment">// 清空 Map</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        map<span class="token punctuation">.</span>clear <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        </pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">// 检查 Map 是否为空</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Map是否为空: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>isEmpty <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        </pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="map的六种遍历方式"><a class="anchor" href="#map的六种遍历方式">#</a> Map 的六种遍历方式</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.6</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Map04_Traverse</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key"</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token string">"value"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"--------------Traverse Map01--------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">//     使用 keySet 遍历</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">//     增强 for 循环</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">Set</span> keyset <span class="token operator">=</span> map<span class="token punctuation">.</span>keySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keyset<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"key: "</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">" value: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>get <span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">//     iterator</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">Iterator</span> iterator1 <span class="token operator">=</span> keyset<span class="token punctuation">.</span>iterator <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span>hasNext <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token class-name">Object</span> key <span class="token operator">=</span> iterator1<span class="token punctuation">.</span>next <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"key: "</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">" value: "</span> <span class="token operator">+</span> map<span class="token punctuation">.</span>get <span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        </pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"--------------Traverse Map02--------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">//     使用 values 遍历</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">Collection</span> values <span class="token operator">=</span> map<span class="token punctuation">.</span>values <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token comment">//     增强 for 循环</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> value <span class="token operator">:</span> values<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"value: "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">//     iterator</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token class-name">Iterator</span> iterator2 <span class="token operator">=</span> values<span class="token punctuation">.</span>iterator <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span>hasNext <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token class-name">Object</span> value <span class="token operator">=</span> iterator2<span class="token punctuation">.</span>next <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"value: "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        </pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"--------------Traverse Map03--------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token comment">//     使用 entrySet 遍历</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">Set</span> entryset <span class="token operator">=</span> map<span class="token punctuation">.</span>entrySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token comment">//     增强 for 循环</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> entryset<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"key: "</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span>getKey <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" value: "</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span>getValue <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">//     iterator</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token class-name">Iterator</span> iterator3 <span class="token operator">=</span> entryset<span class="token punctuation">.</span>iterator <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator3<span class="token punctuation">.</span>hasNext <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> iterator3<span class="token punctuation">.</span>next <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"key: "</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span>getKey <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" value: "</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span>getValue <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>遍历练习</li>
</ul>
<p><img loading="lazy" data-src="image-20240507174200344.png" alt="image-20240507174200344"></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>collection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"all"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="9"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="10"></td><td><pre> * @data 2024.5.7</pre></td></tr><tr><td data-num="11"></td><td><pre> **/</pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Map05_Test01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Employee01</span> <span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">01</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token number">02</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Employee01</span> <span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token number">02</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        map<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Employee01</span> <span class="token punctuation">(</span><span class="token string">"王五"</span><span class="token punctuation">,</span><span class="token number">30000</span><span class="token punctuation">,</span><span class="token number">03</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">//     第一种遍历方式，通过 keySet () 方法遍历</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">Set</span> keyset <span class="token operator">=</span> map<span class="token punctuation">.</span>keySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> keyset<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token class-name">Employee01</span> em <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Employee01</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span>get <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>em<span class="token punctuation">.</span>getSalary <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">20000</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>em<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">//      第二种遍历方式，通过 entrySet () 方法遍历</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">Set</span> entry <span class="token operator">=</span> map<span class="token punctuation">.</span>entrySet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回 EntrySet 对象 (数据类型是 Map.Entry)，运行类型是 EntrySet</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"entry运行类型："</span><span class="token operator">+</span>entry<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        </pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> entry<span class="token punctuation">.</span>iterator <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回 EntryIterator 对象，Node 实现了 iterator 方法</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span>hasNext <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            </pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> entry1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> iterator<span class="token punctuation">.</span>next <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回对象 Entry，实际上运行类型是 Node 了</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"entry1运行类型："</span><span class="token operator">+</span> entry1<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            </pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token class-name">Employee01</span> em2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Employee01</span><span class="token punctuation">)</span> entry1<span class="token punctuation">.</span>getValue <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getValue () 返回 Employee01 对象</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"em2运行类型："</span><span class="token operator">+</span>em2<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>em2<span class="token punctuation">.</span>getSalary <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">20000</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>entry1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"all"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Employee01</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    </pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">double</span> getSalary <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token keyword">return</span> salary<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    </pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> toString <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"Employee&#123;"</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="59"></td><td><pre>                <span class="token string">", salary="</span> <span class="token operator">+</span> salary <span class="token operator">+</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                <span class="token string">", id="</span> <span class="token operator">+</span> id <span class="token operator">+</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token char">'&#125;'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    </pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Employee01</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token punctuation">,</span> <span class="token keyword">double</span> salary <span class="token punctuation">,</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="hashtable"><a class="anchor" href="#hashtable">#</a> Hashtable</h4>
<h5 id="基本介绍-4"><a class="anchor" href="#基本介绍-4">#</a> 基本介绍</h5>
<ul>
<li>
<p>存放元素是键值对 K-V</p>
</li>
<li>
<p>K != null,V != null</p>
</li>
<li>
<p>使用方法和 HashMap 基本一样</p>
</li>
<li>
<p>线程安全</p>
</li>
<li>
<p>Key 相同时进行覆盖 Value</p>
</li>
<li>
<p>K-V 放在 Hashtable$Entry 里，Hashtable 实现了 Map.Entry</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
</li>
<li>
<p>Hashtable 的初始 threshold = 8，扩容机制是添加第 threshold + 1 时进行 <code>int newCapacity = (oldCapacity &lt;&lt; 1) + 1;</code></p>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Map_Hashtable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Hashtable</span> hashtable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hashtable</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        hashtable<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        hashtable<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        hashtable<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key3"</span><span class="token punctuation">,</span> <span class="token string">"value3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">//K-V 不能为 null</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// hashtable.put (null, "value4");</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// hashtable.put ("key5", null);</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>hashtable<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>hashtable<span class="token punctuation">.</span>get <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        hashtable<span class="token punctuation">.</span>replace <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token string">"new value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>hashtable<span class="token punctuation">.</span>get <span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        hashtable<span class="token punctuation">.</span>remove <span class="token punctuation">(</span><span class="token string">"key3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>hashtable<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="treemap"><a class="anchor" href="#treemap">#</a> TreeMap</h4>
<h5 id="基本介绍-5"><a class="anchor" href="#基本介绍-5">#</a> 基本介绍</h5>
<ul>
<li>
<p>和 TreeSet 的区别在于键值对</p>
</li>
<li>
<p>K-V 对存放的结点类型是 Entry</p>
<figure class="highlight java"><figcaption data-lang="java"><span>a</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//TreeSet</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    	<span class="token keyword">return</span> m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token constant">PRESENT</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">//TreeMap</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> <span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li>
<p>通过 key 进行排序</p>
</li>
<li>
<p>TreeSet 的底层是 TreeMap，在 TreeSet 小结的底层源码已经介绍</p>
</li>
</ul>
<h5 id="测试代码"><a class="anchor" href="#测试代码">#</a> 测试代码</h5>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">TreeMap</span> treeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">public</span> <span class="token keyword">int</span> compare <span class="token punctuation">(</span><span class="token class-name">Object</span> o1 <span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token comment">// 按照字符串的字母顺序进行排序</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span>compareTo <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        treeMap<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"feng"</span> <span class="token punctuation">,</span> <span class="token string">"xin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        treeMap<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"key"</span> <span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        treeMap<span class="token punctuation">.</span>put <span class="token punctuation">(</span><span class="token string">"abc"</span> <span class="token punctuation">,</span> <span class="token string">"my"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>treeMap<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="properties"><a class="anchor" href="#properties">#</a> Properties</h4>
<ul>
<li>继承 Hashtable 类并实现了 Map 接口，也是键值对 K-V 存储数据</li>
<li>使用特点和 Hashtable 类似</li>
<li>用于 xxx.properties 文件中，加载到 Properties 对象，进行读取和修改 (详细内容在 IO 流)</li>
</ul>
<h4 id="集合实现类在开发中的选择"><a class="anchor" href="#集合实现类在开发中的选择">#</a> 集合实现类在开发中的选择</h4>
<ol>
<li>判断存储类型（一组对象或一组键值对）</li>
<li>一组对象（Collection 单列）
<ul>
<li>允许重复：List
<ul>
<li>增删多：LinkedList（底层是双向链表）</li>
<li>改查多：ArrayList（底层维护 Object 类型的可变数组）</li>
</ul>
</li>
<li>不允许重复：Set
<ul>
<li>无序：HashSet（底层是 HashMap，维护了一个哈希表，即数组 + 链表 + 红黑树）</li>
<li>排序：TreeSet</li>
<li>插入和取出顺序一致：LinkedHashSet（底层是数组 + 双向链表）</li>
</ul>
</li>
</ul>
</li>
<li>一组键值对（Map 双列）
<ul>
<li>key 无序：HashMap（底层是哈希表，数组 + 链表 + 红黑树）</li>
<li>key 排序：TreeMap</li>
<li>key 插入和取出顺序一致：LinkedHashMap</li>
<li>读取文件：Properties</li>
</ul>
</li>
</ol>
<h2 id="泛型"><a class="anchor" href="#泛型">#</a> 泛型</h2>
<h3 id="泛型介绍"><a class="anchor" href="#泛型介绍">#</a> 泛型介绍</h3>
<ul>
<li>泛（广泛）型（类型），又称参数化类型，解决数据类型安全性问题</li>
<li>在类声明或实例化时只要指定好需要的具体类型即可</li>
<li>Java 泛型保证在编译时没有发出警告，运行时就不会产生 ClassCastException 异常，代码更简洁、健壮</li>
<li><strong>作用：在类声明时通过一个标识表示类中某个 <code>属性的类型</code>  / <code>方法的返回值类型</code>  / <code>参数类型</code> </strong></li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.4.29</pre></td></tr><tr><td data-num="6"></td><td><pre> **/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Generic01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//        创建泛型对象</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">//        在定义 Person 对象时指定类型，即在编译期间就决定 E 的类型</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 创建泛型类</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//    属性泛型</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token class-name">E</span> s<span class="token punctuation">;</span><span class="token comment">//E 表示 s 的数据类型，在定义 Person 对象时指定类型，即在编译期间就决定 E 的类型</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">//    方法返回值类型泛型</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">return</span> s<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">//    参数类型</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">E</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="泛型语法"><a class="anchor" href="#泛型语法">#</a> 泛型语法</h3>
<ul>
<li>泛型的声明： <code>interface 接口&lt;T&gt;&#123;&#125;</code>  和  <code>class&lt;K,V…&gt;&#123;&#125;</code></li>
<li>泛型实例化： <code>List&lt;String&gt; list = new ArrayList&lt;String&gt;()</code> ;</li>
<li>指定的泛型只能是基本类型 (如 Integer），而不能是基本数据类型（如 int)</li>
<li>指定泛型具体类型后，可 <code>传入</code> <strong>该类型</strong>或<strong>该类型的子类型的参数 <code>对象</code> </strong></li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Generic02</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 指定泛型具体类型后，可传入该类型或该类型的子类型的参数对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Cat</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">></span></span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Cat</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">></span></span> c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token class-name">E</span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>e <span class="token operator">=</span> e<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>可简写（推荐）： <code>List&lt;String&gt; list = new ArrayList&lt;&gt;();</code></li>
<li>如果 <code>List list = new ArrayList();</code>  泛型默认是 Object</li>
</ul>
<h3 id="自定义泛型"><a class="anchor" href="#自定义泛型">#</a> 自定义泛型</h3>
<h4 id="自定义泛型类"><a class="anchor" href="#自定义泛型类">#</a> 自定义泛型类</h4>
<ul>
<li>class 类名 &lt;T,E…&gt;{}</li>
<li>普通成员可以使用泛型（属性、方法）</li>
<li>使用泛型的数组不能被初始化，但可以定义 <code>E[] arr；</code>
<ul>
<li><code>E[] arr = new E[8];</code>   数组在 new 使不能确定 T 的类型，无法开辟内存空间</li>
</ul>
</li>
<li>静态成员中不能使用类的泛型
<ul>
<li><code>static T a;</code></li>
<li>静态和类相关，类加载时还未创建对象，没有指定类型</li>
</ul>
</li>
<li>泛型类的类型，在创建对象的时候决定</li>
<li>创建对象时没有指定类型，则默认泛型是 Object 类型
<ul>
<li><code>class A&lt;E,T,R&gt;&#123;&#125;</code> ,E,T,R 都是 Object</li>
</ul>
</li>
</ul>
<h4 id="自定义泛型接口"><a class="anchor" href="#自定义泛型接口">#</a> 自定义泛型接口</h4>
<ul>
<li>interface 接口名 &lt;T,E…&gt;{}</li>
<li>接口中，静态成员中不能使用泛型</li>
<li>泛型接口的类型，在 <code>继承接口</code> 或 <code>实现接口</code> 时确定
<ul>
<li>实现方法时，会指定类替换泛型类</li>
</ul>
</li>
<li>没有指定类型，默认 Object</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">GenericInterface1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> print <span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 继承接口</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">GenericInterface2</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">GenericInterface1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> print2 <span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 实现接口</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">GenericClass1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">GenericInterface1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> print <span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="自定义泛型方法"><a class="anchor" href="#自定义泛型方法">#</a> 自定义泛型方法</h4>
<ul>
<li>修饰符 &lt;E,T…&gt; 返回类型 方法名 (参数列表){}</li>
<li>参数列表需要使用泛型类</li>
<li>泛型方法可以定义在普通类或泛型类中</li>
<li>泛型方法被调用时，类型会确定</li>
<li>没有 <code>&lt;E,T…&gt;</code>  不是泛型方法，只是使用了泛型</li>
<li>泛型方法可以使用类声明的泛型，也可以使用方法声明的泛型</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GEneric05_DefineMethods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">GenericMethods01</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> method_01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericMethods01</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        method_01<span class="token punctuation">.</span>method1 <span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token number">123.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        method_01<span class="token punctuation">.</span>method2 <span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">GenericMethods01</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token class-name">T</span> filed1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token class-name">E</span> filed2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 定义一个泛型方法</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span><span class="token class-name">S</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token class-name">R</span> r<span class="token punctuation">,</span><span class="token class-name">S</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"This is a generic method with two parameters of different types:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"R: "</span> <span class="token operator">+</span> r <span class="token operator">+</span> <span class="token string">" S: "</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 泛型方法可以使用类声明的泛型，也可以使用方法声明的泛型</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">O</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">,</span><span class="token class-name">O</span> o<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//O 是方法声明的泛型，T 是类声明的泛型</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"This is a generic method with two parameters of different types:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"T: "</span> <span class="token operator">+</span> t <span class="token operator">+</span> <span class="token string">" O: "</span> <span class="token operator">+</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="泛型的继承和通配符"><a class="anchor" href="#泛型的继承和通配符">#</a> 泛型的继承和通配符</h3>
<ol>
<li>泛型不具备继承性
<ul>
<li>List&lt;Object&gt; list != new ArrayList&lt;String&gt;()</li>
</ul>
</li>
<li>&lt;?&gt; : 支持任意类型的泛型</li>
<li>＜? extends A&gt; : 支持 A 类及 A 类的子类，规定了泛型的上限</li>
<li>＜? super A&gt; : 支持 A 类及 A 类的父类，不限于直接父类，规定了泛型的下限</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Generic06</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> list01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">></span></span> list03 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>BB<span class="token punctuation">></span></span> list04 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>CC<span class="token punctuation">></span></span> list05 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"&lt;?> :支持任意类型的泛型"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        method001 <span class="token punctuation">(</span>list01<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        method001 <span class="token punctuation">(</span>list02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        method001 <span class="token punctuation">(</span>list03<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        method001 <span class="token punctuation">(</span>list04<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        method001 <span class="token punctuation">(</span>list05<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"＜? extends A> :支持A类及A类的子类"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// method002 (list01);</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// method002 (list02);</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        method002 <span class="token punctuation">(</span>list03<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        method002 <span class="token punctuation">(</span>list04<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        method002 <span class="token punctuation">(</span>list05<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"＜? super A> :支持A类及A类的父类，不限于直接父类"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        method03 <span class="token punctuation">(</span>list01<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">//method03 (list02);// 和 AA 没有继承关系</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        method03 <span class="token punctuation">(</span>list03<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">//method03 (list04);//AA 子类</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">//method03 (list05);//AA 子类</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method001</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> list1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// ＜?> : 支持所有类型</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method002</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> AA<span class="token punctuation">></span></span> list2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment">// ＜? extends A> : 支持 A 类及 A 类的子类</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method03</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> AA<span class="token punctuation">></span></span> list3<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token comment">// ＜? super A> : 支持 A 类及 A 类的父类，不限于直接父类</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list3<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>list3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">AA</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"AA extends Object"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">BB</span> <span class="token keyword">extends</span> <span class="token class-name">AA</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"BB extends AA"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">CC</span> <span class="token keyword">extends</span> <span class="token class-name">AA</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"CC extends AA"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="线程"><a class="anchor" href="#线程">#</a> 线程</h2>
<h3 id="基本介绍-6"><a class="anchor" href="#基本介绍-6">#</a> 基本介绍</h3>
<ul>
<li>
<p>程序</p>
<ul>
<li>为完成某种任务用编程语言写的一组指令集合，即代码</li>
</ul>
</li>
<li>
<p>进程</p>
<ul>
<li>指运行中的程序，操作系统会为其分配内存空间</li>
<li>进程是程序的一次执行过程，或正在运行的一个程序，是动态过程，有自身的产生、存在和消亡过程</li>
</ul>
<p><img loading="lazy" data-src="image-20240509165704122.png" alt="image-20240509165704122"></p>
</li>
<li>
<p>线程</p>
<ul>
<li>线程由进程创建，是进程的一个实体</li>
<li>线程可以继续多开线程</li>
<li>一个进程可以拥有多个线程（如 Chrome 多线程下载文件）</li>
<li>单线程：同一个时刻只允许执行一个线程</li>
<li>多线程：同一个时刻可以执行多个线程</li>
</ul>
</li>
<li>
<p>并发：同一个时刻，多个任务交替执行，有一种 “同时的错觉”，如一个 CPU 执行 QQ 聊天，暂停 Chrome 下载，然后由执行 Chrome 下载，暂停 QQ 聊天，如此反复交替执行</p>
</li>
<li>
<p>并行：顾名思义，一起执行。同一个时刻多个任务同时执行，如 16 和 CPU 分别执行不同的任务。但是对于其中的一个 CPU，又有可能存在并发</p>
</li>
</ul>
<p><img loading="lazy" data-src="image-20240509170500172.png" alt="image-20240509170500172"></p>
<h3 id="创建线程"><a class="anchor" href="#创建线程">#</a> 创建线程</h3>
<h4 id="继承thread类重写run方法"><a class="anchor" href="#继承thread类重写run方法">#</a> 继承 Thread 类，重写 run 方法</h4>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="3"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="4"></td><td><pre> * @data 2024.5.9</pre></td></tr><tr><td data-num="5"></td><td><pre> * 创建一个 Java 线程，每隔一秒打印一次 “小猫线程执行...”</pre></td></tr><tr><td data-num="6"></td><td><pre> **/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread_demo01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">CatThread</span> catThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CatThread</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        catThread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 调用 Thread.start () 方法启动线程</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">CatThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span><span class="token comment">// 创建一个线程类 (该类继承 Thread 类才是一个线程)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">void</span> run <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"小猫线程执行..."</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token comment">// 保证线程在 sleep 时不会被中断（即在 sleep 时还能感知响应，能响应中断，不会睡死）</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 线程休眠 1 秒</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//main 线程启动一个子线程 Thread-0，不会阻塞在 start (), 而是继续执行</span></pre></td></tr><tr><td data-num="2"></td><td><pre>catThread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 调用 Thread.start () 方法启动线程</span></pre></td></tr><tr><td data-num="3"></td><td><pre>main线程执行完毕后自动结束，<span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span>继续执行，直到它自己结束，不会因为main线程结束而受影响</pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 调用 Thread.start ()</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token comment">// zero status corresponds to state "NEW".</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>holder<span class="token punctuation">.</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 本地方法，JVM 调用，在 start0 () 里调用 run 方法实现多线程</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote>
</li>
</ul>
<p>​	<img loading="lazy" data-src="image-20240509184159904.png" alt="image-20240509184159904"> 进程开始，进入 main 线程，mian 线程启动 Thread-0 线程<br>
​           <img loading="lazy" data-src="image-20240509184514093.png" alt="image-20240509184514093"><br>
​           <img loading="lazy" data-src="image-20240509184517056.png" alt="image-20240509184517056"></p>
<p>​	<strong> <code>进程结束</code> </strong></p>
<ul>
<li>
<p>为什么不用 Cat.run ()?</p>
<ul>
<li>
<blockquote>
<p>如果这样调用，run 只是一个普通方法，并不会真正使 main 启动新的子线程，run 还是在 main 线程里，会等 run 执行结束再向下执行</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h4 id="实现runnable接口重写run方法"><a class="anchor" href="#实现runnable接口重写run方法">#</a> 实现 Runnable 接口，重写 run 方法</h4>
<ol>
<li>Java 是单继承的，如果某个类继承了其他类，这时使用继承 Thread 类创建线程不可能实现</li>
<li>提供实现 Runnable 接口的方法进行创建线程</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="3"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="4"></td><td><pre> * @data 2024.5.9</pre></td></tr><tr><td data-num="5"></td><td><pre> **/</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread_demo02</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 需要创建 Thread 对象并传入 dog</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        thread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Dog: "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>
<p>简单模拟解释：</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.9</pre></td></tr><tr><td data-num="6"></td><td><pre> * 模拟 Thread</pre></td></tr><tr><td data-num="7"></td><td><pre> **/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread_demo03</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Tiger</span> tiger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">MyThread</span> myThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span> <span class="token punctuation">(</span>tiger<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        myThread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    </pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Runnable</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    </pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MyThread</span> <span class="token punctuation">(</span><span class="token class-name">Runnable</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    </pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            target<span class="token punctuation">.</span>run <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    </pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> start <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    </pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> start0 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        run <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Tiger</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Tiger is running!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<ol>
<li>
<p>Tiger 实现了 Runnable 接口</p>
</li>
<li>
<p>将 Tiger 对象传入 Thread 类进行 Runnable 对象的动态绑定</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// 动态绑定传入的对象，调用传入对象的 run 方法</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        target<span class="token punctuation">.</span>run <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ol>
</blockquote>
</li>
</ul>
<h4 id="thread-vs-runnable"><a class="anchor" href="#thread-vs-runnable">#</a> Thread VS Runnable</h4>
<ol>
<li>实现 Runnable 接口方式更适合多个线程共享一个资源的情况，并且避免了单线程的限制，推荐使用 Runnable</li>
<li>两者没有本质区别，Thread 也实现了 Runnable 接口</li>
</ol>
<h3 id="线程终止"><a class="anchor" href="#线程终止">#</a> 线程终止</h3>
<ol>
<li>当线程完成任务后会自动退出</li>
<li>还可以通过 <code>变量</code> 控制 run 方法退出，从而停止线程，即 <code>通知方式</code></li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.11</pre></td></tr><tr><td data-num="6"></td><td><pre> **/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadExit</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">ThreadExitTest</span> threadExitTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadExitTest</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>threadExitTest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        thread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 主线程休眠 10 秒，10 秒后设置 flag 为 false, 线程退出</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"main sleep 10s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        threadExitTest<span class="token punctuation">.</span>setFlag <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"main exit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ThreadExitTest</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 定义一个标志位，用于控制线程的退出</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Thread is running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="线程常用方法"><a class="anchor" href="#线程常用方法">#</a> 线程常用方法</h3>
<ol>
<li>
<p>setName (field)：设置线程名</p>
</li>
<li>
<p>getName ()：获取线程名</p>
</li>
<li>
<p>start ()：线程执行</p>
<ul>
<li>start 底层会创建新线程，调用 run，run 不会启动新线程</li>
</ul>
</li>
<li>
<p>run ()：调用线程 run () 方法</p>
</li>
<li>
<p>setPriority (field)：更改线程优先级</p>
</li>
<li>
<p>getPriority ()：获取线程优先级</p>
<ul>
<li>
<p>范围</p>
</li>
<li>
<p>MAX_PRIORITY:10</p>
</li>
<li>
<p>MIN_PRIORITY:1</p>
</li>
<li>
<p>NORMAL_PRIORITY:5</p>
</li>
</ul>
</li>
<li>
<p>sleep ()：静态方法，使线程休眠</p>
</li>
<li>
<p>interrrupt ()：中断线程</p>
<ul>
<li>没有终止线程，一般用于中断正在休眠的线程</li>
</ul>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.11</pre></td></tr><tr><td data-num="6"></td><td><pre> * 让线程休眠，并使用 interrupt () 方法中断线程。</pre></td></tr><tr><td data-num="7"></td><td><pre> **/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadMethods01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">ThreadMethod01</span> threadMethod01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadMethod01</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>threadMethod01<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        thread<span class="token punctuation">.</span>setName <span class="token punctuation">(</span><span class="token string">"feng"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//set thread name</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        thread<span class="token punctuation">.</span>setPriority <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token constant">MAX_PRIORITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//set thread priority</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        thread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token comment">//main 线程休眠 10s</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"main sleep..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token comment">//main 线程中断 thread 线程休眠</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            thread<span class="token punctuation">.</span>interrupt <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//interrupt the thread</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ThreadMethod01</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>             <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>currentThread <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is running."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//thread sleep 5s, 但是 1s 后 main 线程中断了 thread 线程的休眠</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>currentThread <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is interrupted."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="yield-和-join"><a class="anchor" href="#yield-和-join">#</a> yield 和 join</h3>
<ul>
<li>yield：线程的礼让，让 CPU 先执行其他线程，礼让的时间不定，不一定礼让成功（如果 CPU 内存足够，则礼让失败）</li>
<li>join：线程的插队，插队的线程一旦插队成功，先执行完插队线程的所有任务（一定成功）</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.11</pre></td></tr><tr><td data-num="6"></td><td><pre> **/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadMethods02</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">ThreadMethod02</span> threadMethod02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadMethod02</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>threadMethod02<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>currentThread <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token comment">// 如果 i = 5，则调用 thread.start () 方法启动新线程</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token comment">// 如果 i = 5，则调用 thread.join () 方法等待新线程执行完毕</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                thread<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                thread<span class="token punctuation">.</span>join <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ThreadMethod02</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Thread is running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="用户线程和工作线程"><a class="anchor" href="#用户线程和工作线程">#</a> 用户线程和工作线程</h3>
<ul>
<li>用户线程：也叫工作线程，当线程的任务执行完或以通知方式结束</li>
<li>守护线程：一般为工作线程服务，当所有的用户线程结束，守护线程自动结束</li>
<li>一般用于 GC 垃圾回收</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.11</pre></td></tr><tr><td data-num="6"></td><td><pre> **/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadDaemon</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">ThreadDaemonTest</span> threadDaemonTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadDaemonTest</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        threadDaemonTest<span class="token punctuation">.</span>setDaemon <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置为守护线程</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        threadDaemonTest<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 主线程执行，执行结束后守护线程自动结束</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"main is running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ThreadDaemonTest</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"This is a daemon thread"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="线程的生命周期"><a class="anchor" href="#线程的生命周期">#</a> 线程的生命周期</h3>
<p><img loading="lazy" data-src="image-20240511234152168.png" alt="image-20240511234152168"></p>
<h3 id="线程同步synchronized"><a class="anchor" href="#线程同步synchronized">#</a> 线程同步 (synchronized)</h3>
<ul>
<li>线程同步机制
<ol>
<li>在多线程编程，一些敏感数据不允许被多个线程同时访问，此时就使用同步访问技术，保证数据在任何同一时刻， <code>最多有一个线程访问</code> ，以保证数据的完整性</li>
<li>线程同步，即当有一个线程在对内存进行操作时，其他线程都不可以对这个内存地址进行操作， <code>直到该线程完成操作，其他线程才能对该内存地址进行操作</code></li>
</ol>
</li>
<li>具体同步方法
<ol>
<li>同步代码块 <code>synchronized()&#123;…&#125;</code> (推荐)</li>
<li>synchronized 放在方法声明中，整个方法为同步方法</li>
<li>理解：上厕所时，一个人先上锁，完事再解锁，下一个人才能上厕所</li>
</ol>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.11</pre></td></tr><tr><td data-num="6"></td><td><pre> **/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadSyn</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">ThreadSynchronized</span> threadSynchronized <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadSynchronized</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>threadSynchronized<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>threadSynchronized<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Thread</span> thread3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span>threadSynchronized<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        thread1<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        thread2<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        thread3<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ThreadSynchronized</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> nums <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> synFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> run <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>synFlag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token comment">// 同步代码块</span></pre></td></tr><tr><td data-num="25"></td><td><pre>           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>nums <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"票已售完"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                    synFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span>sleep <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>currentThread <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"售票中... "</span> <span class="token operator">+</span> <span class="token string">"剩余票数："</span> <span class="token operator">+</span> <span class="token operator">--</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="互斥锁"><a class="anchor" href="#互斥锁">#</a> 互斥锁</h3>
<ul>
<li>
<p>Java 中引入了对象互斥锁，保证数据操作的完整性</p>
</li>
<li>
<p>每个对象都对应一个互斥锁的标记，该标记保证在同一时刻只能由一个线程访问此对象</p>
</li>
<li>
<p>关键字 synchronized 与互斥锁联系，可以理解为使用了 synchronized 后， <code>给对象上了锁</code> ，多线程访问时 <code>谁先抢到</code> 谁就能操作对象。</p>
</li>
<li>
<p>同步局限性：程序执行效率降低（没有抢到锁的线程会被阻塞，状态为 Blocked）</p>
</li>
<li>
<p>同步方法（非静态）的锁可以是 this；也可以是其他对象，但是 <code>对象要求是同一个</code>  (推荐使用实现 Runnable 的方法开启线程，如果继承 Thread 需要 new 对象，地址不同对象就不同，增添麻烦)</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> run <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>synFlag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token comment">// 同步代码块</span></pre></td></tr><tr><td data-num="6"></td><td><pre>           <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>               <span class="token comment">// 如果是 new object 就不是同一个对象了！！！</span></pre></td></tr></table></figure></li>
<li></li>
</ul>
</li>
<li>
<p>同步方法（静态）的锁为当前类本身</p>
<ul>
<li …="">静态 (static) 方法中同步代码块：synchronized (类名.class)</li>
</ul>
</li>
</ul>
<h3 id="线程死锁"><a class="anchor" href="#线程死锁">#</a> 线程死锁</h3>
<ul>
<li>多个线程都占用了对方的资源，但不肯相让，导致死锁</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>thread</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> * @data 2024.5.12</pre></td></tr><tr><td data-num="6"></td><td><pre> * 测试死锁案例</pre></td></tr><tr><td data-num="7"></td><td><pre> **/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadDeadLock</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DeadLockDemo</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DeadLockDemo</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        thread1<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        thread2<span class="token punctuation">.</span>start <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">DeadLockDemo</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 保证数据共享</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">DeadLockDemo</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>currentThread <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" just lock1..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"lock1 &amp; lock2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>currentThread <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" just lock2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"lock1 &amp; lock2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>thread1,thread2 分别拿到 o1,o2 对象锁，接着 thread1 想拿到 o2 锁，但被 thread2 拿着；thread2 想拿到 o1 锁，但被 thread1 拿着；两个线程进入 Blocked 状态被阻塞，互不相让，死锁</p>
</blockquote>
<h3 id="释放锁"><a class="anchor" href="#释放锁">#</a> 释放锁</h3>
<h4 id="释放锁的时机"><a class="anchor" href="#释放锁的时机">#</a> 释放锁的时机</h4>
<ol>
<li>当前线程的同步方法 / 同步代码块执行结束</li>
<li>当前线程在同步方法 / 同步代码块遇到 return、break</li>
<li>当前线程在同步方法 / 同步代码块出现了未处理的 Error/Exception, 导致异常结束</li>
<li>当前线程在同步方法 / 同步代码块执行了线程的 wait () 方法，当前线程暂停，并释放锁</li>
</ol>
<h4 id="不会释放锁的情况"><a class="anchor" href="#不会释放锁的情况">#</a> 不会释放锁的情况</h4>
<ol>
<li>当前线程在同步方法 / 同步代码块执行 Thread.sleep (),Thread.yield，暂停线程执行，不会释放锁</li>
<li>线程执行同步代码块时，其他线程调用了该线程的～～suspend ()~~ 方法将当前线程挂起，当前线程不会释放锁</li>
</ol>
<h2 id="文件"><a class="anchor" href="#文件">#</a> 文件</h2>
<h3 id="基本介绍-7"><a class="anchor" href="#基本介绍-7">#</a> 基本介绍</h3>
<ul>
<li>文件在程序中以流的方式进行操作</li>
</ul>
<blockquote>
<p>java 程序（内存）——(输出流)——&gt; 文件（磁盘）</p>
<p>java 程序（内存）&lt;——(输入流)—— 文件（磁盘）</p>
</blockquote>
<h3 id="创建文件的三种方式"><a class="anchor" href="#创建文件的三种方式">#</a> 创建文件的三种方式</h3>
<ol>
<li>new File (String pathName)：根据路径创建 File 对象</li>
<li>new File (File parent,String child)：根据父目录文件 + 子路径创建</li>
<li>new File (String parent,String child)：根据父目录 + 子目录创建</li>
<li>后两种方式是为了方便在一个目录下创建多个子目录</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.12</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateFile</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        test1 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        test2 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        test3 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 第一种创建方式</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token string">"E:\\example1.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">File</span> fileTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        judge <span class="token punctuation">(</span>fileTest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 第二种创建方式</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span><span class="token string">"E:\\"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">String</span> fileString <span class="token operator">=</span> <span class="token string">"example2.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">File</span> fileTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileString<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        judge <span class="token punctuation">(</span>fileTest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 第三种创建方式</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">String</span> file1 <span class="token operator">=</span> <span class="token string">"E:\\"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">String</span> file2 <span class="token operator">=</span> <span class="token string">"example3.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">File</span> fileTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span>file1<span class="token punctuation">,</span> file2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        judge <span class="token punctuation">(</span>fileTest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token class-name">File</span> fileTest<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token keyword">boolean</span> judge <span class="token operator">=</span> fileTest<span class="token punctuation">.</span>createNewFile <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>judge<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件创建成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件已存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="文件的相关方法"><a class="anchor" href="#文件的相关方法">#</a> 文件的相关方法</h3>
<ol>
<li>getName ()：获取文件名</li>
<li>getAbsolutePath ()：获取绝对路径</li>
<li>getParent：获取父目录</li>
<li>length ()：获取文件大小（字节数）</li>
<li>exists ()：判断文件是否存在</li>
<li>isFile ()：判断是否是文件</li>
<li>ifDirectory ()：判断是否是目录</li>
</ol>
<h3 id="常见的文件操作"><a class="anchor" href="#常见的文件操作">#</a> 常见的文件操作</h3>
<ol>
<li>判断一个目录的文件是否存在，如果存在就删除</li>
<li>判断一个目录是否存在，如果存在就删除</li>
<li>判断一个目录是否存在，如果不存在就创建
<ul>
<li>创建单个目录：mkdir ()</li>
<li>创建多个目录：mkdirs ()</li>
<li>目录可看作是一种特殊的文件类型</li>
</ul>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.12</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOperator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        fileOperator1 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        fileOperator2 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        fileOperator3 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 判断一个目录的文件是否存在，如果存在就删除</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fileOperator1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\file1.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>exists <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>delete <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件删除成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件删除失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件不存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 判断一个目录是否存在，如果不存在就创建</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fileOperator2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\file1\\file2\\file3"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>exists <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>mkdirs <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"目录创建成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"创建失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"目录已经存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token comment">// 判断一个目录是否存在，如果存在就删除</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fileOperator3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\file1\\file2\\file3"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>exists <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>delete <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"目录删除成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"目录不存在/删除失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="文件io流"><a class="anchor" href="#文件io流">#</a> 文件 IO 流</h3>
<h4 id="io流介绍"><a class="anchor" href="#io流介绍">#</a> IO 流介绍</h4>
<ul>
<li>
<p>在程序和文件中进行数据传输和处理</p>
</li>
<li>
<p>I/O 是 Input/Output 的缩写，I/O 技术是非常实用的技术，用于处理数据传输。如读 / 写文件，网络通讯等</p>
</li>
<li>
<p>Java 程序中，对于数据的输入 / 输出操作以 流 (stream) 的方式进行</p>
</li>
<li>
<p>java.io 包下提供了各种 流 类和接口，用以获取不同种类的数据，并通过方法输入或输出数据</p>
</li>
<li>
<p>输入 input: 读取外部数据 (磁盘、光盘等存储设备的数据) 到程序 (内存) 中</p>
</li>
<li>
<p>输出 output: 将程序 (内存) 数据输出到磁盘、光盘等存储设备中</p>
</li>
<li>
<p>流的分类</p>
<ul>
<li>按操作数据单位不同分为：字节流 (8 bit)，字符流 (按字符)<br>
 按数据流的流向不同分为：输入流 输出流<br>
按流的角色的不同分为：节点流 处理流 / 包装流</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">*</th>
<th style="text-align:center">抽象基类</th>
<th style="text-align:center">字节流</th>
<th>字符流</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">输入流</td>
<td style="text-align:center">InputStream</td>
<td style="text-align:center">Reader</td>
</tr>
<tr>
<td style="text-align:center">输出</td>
<td style="text-align:center">OutputStream</td>
<td style="text-align:center">Writer</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Java 的 IO 流共涉及 40 多个类，实际上非常规则，都是从如上 4 个抽象基类派生</p>
<p>由这 4 个类派生出来的子类，名称都是以其父类名作为子类名后缀</p>
</blockquote>
</li>
</ul>
<h4 id="io流体系图"><a class="anchor" href="#io流体系图">#</a> IO 流体系图</h4>
<ul>
<li>
<p>InputStream: 字节输入流</p>
<ul>
<li>该抽象类是所有类字节输入流的超类</li>
<li>常用子类：
<ul>
<li>FileInputStream：文件输入流</li>
<li>BufferedInputStream：缓冲字节输入流</li>
<li>ObjectInputStream：对象字节输入流</li>
</ul>
</li>
</ul>
</li>
<li>
<p><img loading="lazy" data-src="InputStream.png" alt="InputStream"></p>
<h4 id="fileinputstream"><a class="anchor" href="#fileinputstream">#</a> FileInputStream</h4>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>fileinputstream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.13</pre></td></tr><tr><td data-num="9"></td><td><pre> * 将文件内容读取到程序中，并在程序控制台中输出，使用 Java 中的 FileInputStream 类。</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileInputStream01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// readFile ();</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        readFilePro <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    </pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\hello.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token comment">// 一个一个字节读取</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token keyword">int</span> content<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>content <span class="token operator">=</span> fileInputStream<span class="token punctuation">.</span>read <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token comment">// 将字节转换为字符</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>print <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token comment">// 关闭文件流，释放资源</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                fileInputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token comment">// 优化：使用 read (byte [] b) 方法，一次读取一个字节数组，效率更高</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readFilePro</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\hello.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>            <span class="token comment">// 一个一个字节读取</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            <span class="token keyword">int</span> content<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token keyword">byte</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token comment">// 读取的数据将存到 bytes 数组里</span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>content <span class="token operator">=</span> fileInputStream<span class="token punctuation">.</span>read <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                <span class="token comment">// 将字节转换为字符</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>print <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>            <span class="token comment">// 关闭文件流，释放资源</span></pre></td></tr><tr><td data-num="58"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>                fileInputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>read (byte [] bytes)：从输入流读取一个字节数组的数据，最多 b.length 字节，如果不够则读取实际字节，没有输入可用此方法将阻塞，读取到文件末尾返回 - 1</p>
<p>read 和 read (byte [] bytes) 返回实际读取的字节数</p>
</blockquote>
<h4 id="fileoutputstream"><a class="anchor" href="#fileoutputstream">#</a> FileOutputStream</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>fileinputstream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.13</pre></td></tr><tr><td data-num="9"></td><td><pre> * 文件输出流（FileOutputStream）</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOutputStream01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\fileOutputStream.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token comment">// 创建文件输出流，true 表示追加写入，如果没有 true, 则每次写入会覆盖之前的内容</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token comment">// 写入一个字符数据</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            fileOutputStream<span class="token punctuation">.</span>write <span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token comment">// 写入一个字符串数据</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token class-name">String</span> dataString <span class="token operator">=</span> <span class="token string">"hello java"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token comment">// 此处 write 接收的是字节，需要将 String 转换为字节</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            fileOutputStream<span class="token punctuation">.</span>write <span class="token punctuation">(</span>dataString<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token comment">// 写入指定位置字符串</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            fileOutputStream<span class="token punctuation">.</span>write <span class="token punctuation">(</span>dataString<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span>  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token comment">// 关闭文件输出流</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                fileOutputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="拷贝文件"><a class="anchor" href="#拷贝文件">#</a> 拷贝文件</h4>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>fileinputstream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="8"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="9"></td><td><pre> * @data 2024.5.13</pre></td></tr><tr><td data-num="10"></td><td><pre> * 文件的拷贝</pre></td></tr><tr><td data-num="11"></td><td><pre> **/</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> fileCopy <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        copyFile <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">String</span> sourceFile <span class="token operator">=</span> <span class="token string">"E:\\sourceFile.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">String</span> targetFile <span class="token operator">=</span> <span class="token string">"E:\\targetFile.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>sourceFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>targetFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token comment">// 使用 byte 数组来读取和写入文件</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token keyword">int</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>length <span class="token operator">=</span> fileInputStream<span class="token punctuation">.</span>read <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token comment">// 将读取的数据写入到目标文件中</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token comment">// 避免文件太大，采用边读边写，提高效率</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                <span class="token comment">// 推荐使用 write (byte [] b, int off, int len) 方法，因为它更高效</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token comment">// 还能够避免在写入文件时出现缓冲区溢出的问题，或者写入不完整的数据</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                fileOutputStream<span class="token punctuation">.</span>write <span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件拷贝成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token comment">// 关闭流</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fileInputStream <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                    fileInputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fileOutputStream <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                    fileOutputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="filereader处理字符"><a class="anchor" href="#filereader处理字符">#</a> FileReader (处理字符)</h4>
<ul>
<li>体系图
<ul>
<li><img loading="lazy" data-src="FileReader.png" alt="FileReader"></li>
</ul>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>fileinputstream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileReader</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.13</pre></td></tr><tr><td data-num="9"></td><td><pre> * 字符输入流</pre></td></tr><tr><td data-num="10"></td><td><pre> **/</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileReader01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        readFile <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    </pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\fileReader"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">FileReader</span> fileReader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token comment">// 一个一个字节读取</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token keyword">int</span> chLength<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>chLength <span class="token operator">=</span> fileReader<span class="token punctuation">.</span>read <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> chLength<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token comment">// 一次性读取具体数目字符</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>chLength <span class="token operator">=</span> fileReader<span class="token punctuation">.</span>read <span class="token punctuation">(</span>chs<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>chLength<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="filewriter"><a class="anchor" href="#filewriter">#</a> FileWriter</h4>
<ul>
<li>体系图
<ul>
<li><img loading="lazy" data-src="FileWriter01.png" alt="FileWriter01"></li>
</ul>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>fileinputstream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileWriter</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">StringReader</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="8"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="9"></td><td><pre> * @data 2024.5.13</pre></td></tr><tr><td data-num="10"></td><td><pre> * 字符输出流</pre></td></tr><tr><td data-num="11"></td><td><pre> *</pre></td></tr><tr><td data-num="12"></td><td><pre> **/</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileWriter01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    </pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\fileWriter.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">FileWriter</span> fileWriter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            fileWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token comment">// 写入单个字符</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">'A'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            fileWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token comment">// 写入多个字符</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token char">'B'</span><span class="token punctuation">,</span> <span class="token char">'C'</span><span class="token punctuation">,</span> <span class="token char">'D'</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            fileWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token comment">// 写入指定部分的字符数组</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token char">'E'</span><span class="token punctuation">,</span> <span class="token char">'F'</span><span class="token punctuation">,</span> <span class="token char">'G'</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            fileWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span>chars2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token comment">// 写入字符串</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            fileWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token comment">// 写入字符串的一部分</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            fileWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span>str2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token comment">// 必须关闭流，否则文件不会被写入</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fileWriter <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                    fileWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="节点流-处理流"><a class="anchor" href="#节点流-处理流">#</a> 节点流 处理流</h4>
<ul>
<li>
<p>节点流：从一个特定的数据源读写数据，如 FileReader.FileWriter</p>
</li>
<li>
<p>处理流：连接在已存在的流（节点流或处理流）之上，为程序提供更强大的读写功能，如 BufferedReader,BufferedWriter，ObjectInputStream,ObjectOutputStream,BufferedInputStream,BufferedOutputStream</p>
</li>
<li>
<p>Reader 和 Writer 体系图</p>
</li>
</ul>
<p><img loading="lazy" data-src="bufferedReader.png" alt="bufferedReader"></p>
<p><img loading="lazy" data-src="FileWriter.png" alt="FileWriter"></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedReader</span> <span class="token keyword">extends</span> <span class="token class-name">Reader</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Reader</span> in<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedWriter</span> <span class="token keyword">extends</span> <span class="token class-name">Writer</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Writer</span> out<span class="token punctuation">;</span></pre></td></tr></table></figure><blockquote>
<p>由上可知，BufferedReader/BufferedWriter 中封装 继承了 Reader/Writer 的流，让数组、String 等类型的流有更方便的读写</p>
</blockquote>
<blockquote>
<p>一个处理流可以处理多种数据源，一个节点流只能处理一种数据源</p>
</blockquote>
<blockquote>
<p>数据源：存放数据的地方，如文件，数组，字符串等</p>
<p>模拟代码在 file 包里</p>
</blockquote>
<h5 id="字符流-bufferedreader-bufferedwriter"><a class="anchor" href="#字符流-bufferedreader-bufferedwriter">#</a> 字符流 BufferedReader BufferedWriter</h5>
<ul>
<li>
<p>BufferedReader 和 BufferedWriter 属于字符流，按照字符来读写数据</p>
</li>
<li>
<p>关闭流时，只需关闭外层流（BufferedReader BufferedWriter）即可（外层流会自动调用方法关闭内存流）</p>
</li>
<li>
<p>使用 BufferedWriter 时，由于是缓冲流，写完之后需要刷新 (flush ()) 或者最后关闭流，才能将数据写入文件，否则只在程序里</p>
<ul>
<li>
<blockquote>
<p>Buffered 都有一个缓冲数组，如果长度被写入的数据超过 (即缓冲区满) 会自动写入文件，如果没满则会保留在缓冲区，这时需要手动刷新缓存或者关闭包装流将缓冲数据写入文件</p>
</blockquote>
</li>
</ul>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>filestream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="7"></td><td><pre> * @data 2024.5.15</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferCopy</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        copyFile <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 指定源文件和目标文件</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">String</span> sourceFile <span class="token operator">=</span> <span class="token string">"E:\\sourceFile.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">String</span> targetFile <span class="token operator">=</span> <span class="token string">"E:\\targetFile.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 创建输入和输出流</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span> <span class="token punctuation">(</span>sourceFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span> <span class="token punctuation">(</span>targetFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token comment">// 读取源文件内容并写入目标文件</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token comment">// 逐行读取</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token class-name">String</span> line<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span>readLine <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                bufferedWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token comment">// 逐行读取，逐行写入，需要手动添加换行符</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                bufferedWriter<span class="token punctuation">.</span>newLine <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件复制成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token comment">// 关闭外层流，内层流会自动关闭</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>bufferedReader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                    bufferedReader<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>bufferedWriter <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                    bufferedWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<h4 id="字节流-bufferedinputstream-bufferedoutputstream"><a class="anchor" href="#字节流-bufferedinputstream-bufferedoutputstream">#</a> 字节流 BufferedInputStream BufferedOutputStream</h4>
<ul>
<li>
<p>处理字节流</p>
</li>
<li>
<p>可以操作文本文件，输出控制台或许会乱码，但是文本文件里可以正常显示内容</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>file<span class="token punctuation">.</span>bufferedstream<span class="token punctuation">.</span>input_output</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> * @data 2024.5.15</pre></td></tr><tr><td data-num="9"></td><td><pre> **/</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedIn_OutStream</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        copyFile <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">String</span> srcFile <span class="token operator">=</span> <span class="token string">"E:\\inputSrc.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">String</span> destFile <span class="token operator">=</span> <span class="token string">"E:\\outputDest.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">BufferedInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">BufferedOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 创建缓冲区</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 创建输入输出流</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span> <span class="token punctuation">(</span>srcFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span> <span class="token punctuation">(</span>destFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token keyword">int</span> bytesRead<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>bytesRead <span class="token operator">=</span> fis<span class="token punctuation">.</span>read <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                fos<span class="token punctuation">.</span>write <span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytesRead<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"文件复制成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                    fis<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                <span class="token keyword">if</span><span class="token punctuation">(</span>fos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                    fos<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<h4 id="对象流-objectinputstream-objectoutputstream"><a class="anchor" href="#对象流-objectinputstream-objectoutputstream">#</a> 对象流 ObjectInputStream ObjectOutputStream</h4>
<h5 id="基本介绍-8"><a class="anchor" href="#基本介绍-8">#</a> 基本介绍</h5>
<ul>
<li>
<p>对象流，就是将基本数据类型或自定义类型进行序列化和反序列化的操作</p>
</li>
<li>
<p>序列化：保存数据时，保存数据的值和类型</p>
</li>
<li>
<p>反序列化：恢复数据时，恢复数据的值和类型</p>
</li>
<li>
<p>前提是其类型支持序列化机制，即实现 Serializable 接口</p>
</li>
<li>
<p>反序列化：ObjectInputStream</p>
</li>
<li>
<p>序列化：ObjectOutputStream</p>
<h5 id="细节-11"><a class="anchor" href="#细节-11">#</a> 细节</h5>
</li>
<li>
<p>读写顺序要一致</p>
</li>
<li>
<p>需要实现序列化或反序列化的对象，需要实现 Serializable</p>
</li>
<li>
<p>序列化的类中建议添加 <code>@Serial private static final long serialVersionUID = 1L;</code> , 提高版本兼容性</p>
</li>
<li>
<p>序列化对象时，默认所有属性都进行序列化（如里面定义了一个内部类，类需要继承 Serializable），处理 static 和 transient 修饰的成员</p>
</li>
<li>
<p>序列化对象时，要求里面属性的类型需要实现 Serializable 接口</p>
</li>
<li>
<p>序列化具有可继承性，某类实现了序列化，则其子类也默认实现了序列化</p>
</li>
</ul>
<h4 id="标准输入输出流"><a class="anchor" href="#标准输入输出流">#</a> 标准输入输出流</h4>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="http://System.in">System.in</a></p>
<ul>
<li>
<p>标准输入流</p>
</li>
<li>
<p>类型：InputStream</p>
</li>
<li>
<p>默认设备：键盘</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>scanner<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从 System.in 提取数据</span></pre></td></tr></table></figure></li>
<li></li>
</ul>
</li>
<li>
<p>System.out</p>
<ul>
<li>标准输出流</li>
<li>类型：PrintStream</li>
<li>默认设备：显示器</li>
</ul>
</li>
</ul>
<h4 id="转换流-inputstreamreader-outputstreamwriter"><a class="anchor" href="#转换流-inputstreamreader-outputstreamwriter">#</a> 转换流 InputStreamReader OutputStreamWriter</h4>
<h5 id="基本介绍-9"><a class="anchor" href="#基本介绍-9">#</a> 基本介绍</h5>
<ul>
<li>当字节流（可能是 UTF-8,GBK 等）Input 字符流输出时，普通输入流会乱码</li>
<li>如果在转换时指定字节流的编码格式再进行输出，则问题解决</li>
<li>InputStreamReader:Reader 的子类，可以将 InputStream（字节流）包装成 Reader（字符流）</li>
<li>OutputStreamWriter：Writer 的子类，实现将 OutputStream 包装成 Writer（字符流）</li>
<li>处理纯文本文件时，建议使用字符流，效率更高</li>
<li>可以理解转换流为中间商</li>
</ul>
<h4 id="打印流-printstream字节流-printwriter字符流"><a class="anchor" href="#打印流-printstream字节流-printwriter字符流">#</a> 打印流 PrintStream (字节流) PrintWriter (字符流)</h4>
<ul>
<li>
<p>打印流只有输出流，没有输入流</p>
</li>
<li>
<p>PrintStream</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 默认输出流，打印到控制台</span></pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token class-name">PrintStream</span> out <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Hello, World!01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token comment">// 底层调用 write ()</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token comment">/*</span></pre></td></tr><tr><td data-num="6"></td><td><pre>          @Override</pre></td></tr><tr><td data-num="7"></td><td><pre>          public void write(byte[] buf) throws IOException &#123;</pre></td></tr><tr><td data-num="8"></td><td><pre>              this.write(buf, 0, buf.length);</pre></td></tr><tr><td data-num="9"></td><td><pre>          &#125;</pre></td></tr><tr><td data-num="10"></td><td><pre>       */</pre></td></tr><tr><td data-num="11"></td><td><pre>      out<span class="token punctuation">.</span>write <span class="token punctuation">(</span><span class="token string">"Hello, World!02"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token comment">// 重定向输出流，打印到文件</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token class-name">PrintStream</span> printStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span> <span class="token punctuation">(</span><span class="token string">"E:\\printStreamFile.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token class-name">System</span><span class="token punctuation">.</span>setOut <span class="token punctuation">(</span>printStream<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token comment">// 以下内容将输出到文件</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Hello, World!03"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      printStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
</li>
<li>
<p>PrintWriter</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 传入 System.out， 默认输出到控制台</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 传入文件路径， 输出到文件</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span> <span class="token punctuation">(</span><span class="token string">"E:\\printWriterFile.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        printWriter<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        out<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        printWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="properties-2"><a class="anchor" href="#properties-2">#</a> Properties</h3>
<h4 id="基本介绍-10"><a class="anchor" href="#基本介绍-10">#</a> 基本介绍</h4>
<ul>
<li>
<p>Hashtable 的子类</p>
</li>
<li>
<p>专门用于读写配置文件的集合类</p>
</li>
<li>
<p>配置文件格式</p>
<ul>
<li>键 = 值</li>
<li>键值对不需要空格，值不用引号 “”, 默认类型 String</li>
</ul>
</li>
<li>
<p>常见方法</p>
<ul>
<li>load：加载配置文件的键值对到 Properties 对象</li>
<li>list：将数据显示到指定设备</li>
<li>getProperty (key)：根据键获取值</li>
<li>setProperty (key,val)：设置键值对到 Properties 对象</li>
<li>store：将 Properties 对象中的键值对存储到配置文件，如果含有中文，存储为 unicode 码</li>
</ul>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Properties01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 创建一个 Properties 对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Properties</span> properties <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Properties</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// 加载一个属性文件到 Properties 对象中</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        properties<span class="token punctuation">.</span>load <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span> <span class="token punctuation">(</span><span class="token string">"E:\\JAVA\\JAVA\\JAVASE\\src\\com\\fengxin\\basic\\file\\properties\\data.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 输出所有的属性到控制台</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        properties<span class="token punctuation">.</span>list <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 获取指定属性的值</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">String</span> value <span class="token operator">=</span> properties<span class="token punctuation">.</span>getProperty <span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"user的值为："</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Properties02</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 创建 Properties 对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        </pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 添加键值对</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        properties<span class="token punctuation">.</span>setProperty <span class="token punctuation">(</span><span class="token string">"枫"</span><span class="token punctuation">,</span> <span class="token string">"000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        properties<span class="token punctuation">.</span>setProperty <span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span> <span class="token string">"000001"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        properties<span class="token punctuation">.</span>setProperty <span class="token punctuation">(</span><span class="token string">"Merry"</span><span class="token punctuation">,</span> <span class="token string">"888888"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 此时覆盖原值</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">//properties.setProperty ("枫", "123456");</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 添加 k-v 到文件中，第二个参数是注释</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        properties<span class="token punctuation">.</span>store <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span> <span class="token punctuation">(</span><span class="token string">"E:\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"MySQL Properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        properties<span class="token punctuation">.</span>list <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="网络"><a class="anchor" href="#网络">#</a> 网络</h2>
<h3 id="网络通信"><a class="anchor" href="#网络通信">#</a> 网络通信</h3>
<ul>
<li>概念：两台设备之间通过网络实现数据传输</li>
<li>网络通信： <code>将数据通过网络从一台设备传输到另一台设备</code></li>
<li>java.net 包提供了一系列接口</li>
</ul>
<h3 id="网络-2"><a class="anchor" href="#网络-2">#</a> 网络</h3>
<ul>
<li>概念： <code>两台或多台设备通过一定物理设备连接构成网络</code></li>
<li>根据覆盖范围分类
<ul>
<li>局域网：覆盖范围最小</li>
<li>广域网：覆盖范围最大，全国乃至全球，万维网是代表</li>
</ul>
</li>
</ul>
<h3 id="ip地址"><a class="anchor" href="#ip地址">#</a> IP 地址</h3>
<ul>
<li>概念： <code>唯一标识网络中的每台计算机</code></li>
<li>查看 ip 地址:ipconfig</li>
<li>ip 地址表示：点分十进制 xx.xx.xx.xx（每一个十进制范围：0~255）</li>
<li>ip 地址 = 网络地址 + 主机地址</li>
<li>ipv6 是用于替代 ipv4 的下一代 ip 协议</li>
<li>ipv6 解决了网络地址资源问题</li>
</ul>
<blockquote>
<p>ipv4:4 个字节 (32 位) 表示，一个字节范围 0~255 xx.xx.xx.xx</p>
<p>ipv6:16 个字节 (128 位) 表示，是 ipv4 的 4 倍 xxxx.xxxx.xxxx.xxxx.xxxx.xxxx.xxxx.xxxx</p>
</blockquote>
<blockquote>
<p>ipv4 地址分类：</p>
<p>A:0 + 网络号 + 主机号 0.0.0.0 ~ 127.255.255.255</p>
<p>B:1 0 + 网络号 + 主机号 128.0.0.0 ~ 191.255.255.255</p>
<p>C:1 1 0 + 网络号 + 主机号 192.0.0.0 ~ 223.255.255.255</p>
<p>D:1 1 1 0 + 多播组号 224.0.0.0 ~ 239.255.255.255</p>
<p>E:1 1 1 1 0 + 留待后用 224.0.0.0 ~ 247.255.255.255</p>
</blockquote>
<h3 id="域名-端口号"><a class="anchor" href="#域名-端口号">#</a> 域名 端口号</h3>
<h4 id="域名"><a class="anchor" href="#域名">#</a> 域名</h4>
<ul>
<li>
<p>概念： <code>将ip地址映射成域名(HTTP协议)</code></p>
</li>
<li>
<p>例：<a target="_blank" rel="noopener" href="http://www.google.com">www.google.com</a></p>
</li>
</ul>
<h4 id="端口号"><a class="anchor" href="#端口号">#</a> 端口号</h4>
<ul>
<li>
<p>概念： <code>标识计算机上某个特定网络程序</code></p>
</li>
<li>
<p>表示：整数表示，0 ~ 65535</p>
</li>
<li>
<p>0 ~ 1024 已经被占用，如 ssh 22,ftp 21,http 80</p>
</li>
<li>
<p>常见网络程序端口号</p>
<ul>
<li>tomcat:8080</li>
<li>mysql:3306</li>
<li>oracle:1521</li>
<li>sqlserver:1433</li>
</ul>
<p><img loading="lazy" data-src="image-20240516182725463.png" alt="image-20240516182725463"></p>
</li>
</ul>
<h3 id="网络协议tcpip"><a class="anchor" href="#网络协议tcpip">#</a> 网络协议 (TCP/IP)</h3>
<ul>
<li>
<p>概念： <code>数据的组织形式</code> （类似打包，一层一层包装）</p>
</li>
<li>
<p>中文：传输控制协议 / 因特网互联协议</p>
</li>
<li>
<p><img loading="lazy" data-src="image-20240516190127188.png" alt="image-20240516190127188"></p>
</li>
<li>
<p><img loading="lazy" data-src="image-20240516190143046.png" alt="image-20240516190143046"></p>
</li>
<li>
<blockquote>
<p>理解：</p>
<p>数据进行打包精确发送到指定程序</p>
<p>程序接收后层层解包获取数据</p>
</blockquote>
</li>
<li>
<p>各层以及协议</p>
<ul>
<li>
<p>链路层（Link Layer）<br>
链路层也被称为网络接口层或数据链路层，负责在同一物理网络上的设备之间传输数据。</p>
<p><strong>以太网（Ethernet）</strong>：局域网中最常见的链路层协议。</p>
<p><strong>Wi-Fi</strong>：无线局域网的链路层协议。</p>
<p><strong>帧中继（Frame Relay）</strong>：一种广域网传输协议。</p>
<p><strong>ATM（Asynchronous Transfer Mode）</strong>：异步传输模式，用于高性能网络。</p>
<p>网络层（Network Layer）<br>
网络层负责数据包的路由和转发，实现主机到主机的通信</p>
<p><strong>IP（Internet Protocol）</strong>：网络层的核心协议，负责数据包的寻址和路由。</p>
<p><strong>IPv4</strong>：互联网协议版本 4。</p>
<p><strong>IPv6</strong>：互联网协议版本 6，提供更大的地址空间和改进的功能。</p>
<p><strong>NAT（Network Address Translation）</strong>：网络地址转换，用于在私有 IP 地址和公共 IP 地址之间进行转换。</p>
<p>传输层（Transport Layer）<br>
传输层负责端到端的数据传输和可靠性。</p>
<p><strong>TCP（Transmission Control Protocol）</strong>：传输控制协议，提供可靠的、面向连接的传输服务。<br>
<strong>UDP（User Datagram Protocol）</strong>：用户数据报协议，提供不可靠的、无连接的传输服务。</p>
<p>应用层（Application Layer）<br>
应用层包含应用程序和服务，提供各种网络功能。</p>
<p><strong>HTTP/HTTPS（Hypertext Transfer Protocol / Secure Hypertext Transfer Protocol）</strong>：用于万维网的协议。<br>
<strong>FTP（File Transfer Protocol）</strong>：文件传输协议，用于在网络上进行文件传输。<br>
<strong>DNS（Domain Name System）</strong>：域名系统，用于将域名解析为 IP 地址。<br>
<strong>SSH（Secure Shell）</strong>：安全外壳协议，用于安全的远程登录和其他安全网络服务。</p>
</li>
</ul>
</li>
</ul>
<h3 id="tcp-udp"><a class="anchor" href="#tcp-udp">#</a> TCP UDP</h3>
<h4 id="tcp协议"><a class="anchor" href="#tcp协议">#</a> TCP 协议</h4>
<ul>
<li>
<p>使用 TCP 协议前，须先建立 TCP 连接，形成数据传输通道</p>
</li>
<li>
<p>传输前，采用 <code>3次握手</code> 方式（可靠性高）</p>
<ul>
<li>
<blockquote>
<p>A ———&gt; B</p>
<p>第一次握手：A 传递包，连接 B（A ———&gt; B）</p>
<p>第二次握手：B 返回包给 A，A 确定 B 能接收数据（A &lt;——— B）</p>
<p>第三次握手：A 返回包给 B，B 确定 A 能接收信息（A ———&gt; B）</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>TCP 协议进行通信的两个应用进程：客户端、服务端</p>
</li>
<li>
<p>传输完毕，需释放已建立的连接，效率低</p>
</li>
<li>
<p>在连接中可进行大数据量的传输</p>
</li>
</ul>
<h4 id="udp协议"><a class="anchor" href="#udp协议">#</a> UDP 协议</h4>
<ul>
<li>将数据、源、目的封装成数据包， <code>不需要建立连接</code></li>
<li>每个数据包的大小限制在 64K 内，不适合传输大量数据</li>
<li>因无需连接，故是不可靠的</li>
<li>发送数据结束时无需释放资源 (因为不是面向连接的)，速度快</li>
<li>举例：发短信，不确定对方是否能接收</li>
</ul>
<h3 id="inetaddress类"><a class="anchor" href="#inetaddress类">#</a> InetAddress 类</h3>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InetAddressDemo</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 获取本地主机的 InetAddress 对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">InetAddress</span> localHost <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getLocalHost <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>localHost<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 根据主机名获取 InetAddress 对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">InetAddress</span> localHostByName <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getByName <span class="token punctuation">(</span><span class="token string">"FengXin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>localHostByName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        </pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 根据域名获取 InetAddress 对象</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">InetAddress</span> localHostByAddress <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getByName <span class="token punctuation">(</span><span class="token string">"www.google.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>localHostByAddress<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 获取 IP 地址 (String 表示)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">String</span> ipAddress <span class="token operator">=</span> localHostByAddress<span class="token punctuation">.</span>getHostAddress <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>ipAddress<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        </pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 获取主机名 / 域名 (String 表示)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">String</span> hostName <span class="token operator">=</span> localHostByAddress<span class="token punctuation">.</span>getHostName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>hostName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="socket"><a class="anchor" href="#socket">#</a> Socket</h3>
<h4 id="基本介绍-11"><a class="anchor" href="#基本介绍-11">#</a> 基本介绍</h4>
<ul>
<li>
<p>Socket（套接字）开发网络应用程序</p>
</li>
<li>
<p>通信的两端都要有 Socket，是两台机器间通信的端点</p>
</li>
<li>
<p>网络通信其实就是 Socket 间的通信</p>
</li>
<li>
<p>Socket 允许程序把网络连接当做一个流，数据在两公分 Socket 间通过 IO 传输</p>
</li>
<li>
<p>主动发起通信的应用程序属于客户端，等待通信请求的为服务器端</p>
</li>
<li>
<blockquote>
<p>Socket 负责数据的输入输出，两端都必须有 Socket 才能兼容</p>
<p>传出的数据经过 TCP/IP 协议层层打包，到另一台主机上再层层解包，最后服务器端的 Socket 接收数据</p>
</blockquote>
</li>
<li>
<p>TCP/UDP 编程</p>
</li>
</ul>
<h4 id="tcp字节流编程"><a class="anchor" href="#tcp字节流编程">#</a> TCP 字节流编程</h4>
<blockquote>
<p>客户端</p>
<ol>
<li>连接服务器端 (ip + 端口)</li>
<li>连接后，生成 socket, 通过 socket.getOutPutStream () 写入数据到数据通道</li>
</ol>
<p>服务器端</p>
<ol>
<li>在端口监听，等待连接</li>
<li>没有连接时会阻塞</li>
<li>连接后，生成 socket，通过 socket.getInPutStream () 读取客户端发来的数据</li>
</ol>
</blockquote>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// client</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TCPClient01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 连接本机端口，返回一个 Socket 对象 指定服务器的 IP 地址和端口号</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span> <span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getLocalHost <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 连接上后，获取输出流对象，该对象和当前的 socket 关联</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getOutputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 写入数据到数据通道，向服务器发送数据</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        outputStream<span class="token punctuation">.</span>write <span class="token punctuation">(</span><span class="token string">"Hello, server!"</span><span class="token punctuation">.</span>getBytes <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 关闭输出流和 Socket</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        outputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// server</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TCPServer01</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 创建 ServerSocket 对象，指定端口号，服务端在 9999 端口监听</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span> <span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 等待客户端连接，连接成功返回一个 Socket 对象</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">//accept () 是一个阻塞方法，如果没有客户端连接，则一直等待</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span>accept <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 获取输入流</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getInputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 读取数据并输出在控制台</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">int</span> len<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> inputStream<span class="token punctuation">.</span>read <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// 关闭资源</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        inputStream<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment">// 关闭 ServerSocket 对象</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        serverSocket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>上面案例中，客户端发送数据后就关闭相关资源了，就结束了。如果服务器端还要返回数据给客户端，那么相关资源不会立即关闭，就会造成服务器端发送数据后，客户端不知道服务器是否传输数据完毕，不知道什么时候读取完毕，就会一直阻塞，因此，应该在发送完数据后结束标记（服务器说完话就沉默，到客户端不知道服务器是否说完）添加结束标记： <code>socket.shutdownOutput ();</code></p>
</blockquote>
<h4 id="tcp字符流编程"><a class="anchor" href="#tcp字符流编程">#</a> TCP 字符流编程</h4>
<blockquote>
<p>在传输文本文件时，使用转换流转换字节流，包装成字符流，效率更高</p>
</blockquote>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// client</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>net<span class="token punctuation">.</span>socket</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">InetAddress</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="9"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="10"></td><td><pre> * 客户端</pre></td></tr><tr><td data-num="11"></td><td><pre> * 更新内容：使用字符流传输数据</pre></td></tr><tr><td data-num="12"></td><td><pre> **/</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TCPClient03</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 连接本机端口，返回一个 Socket 对象 指定服务器的 IP 地址和端口号</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span> <span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getLocalHost <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 连接上后，获取输出流对象，该对象和当前的 socket 关联</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getOutputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        </pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 客户端发送数据</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 使用转换流包装数据</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span> <span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 写入数据到数据通道，向服务器发送数据</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span><span class="token string">"Hello, Server!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 刷新缓存，将数据发送出去</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>flush <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">// 结束标志</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        socket<span class="token punctuation">.</span>shutdownOutput <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        </pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">// 客户端接收服务器返回的数据</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getInputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// 使用转换流包装数据</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span> <span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">String</span> line<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span>readLine <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token comment">// 关闭输出流和 Socket</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        bufferedReader<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">// server</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>net<span class="token punctuation">.</span>socket</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="53"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="54"></td><td><pre> * 服务器端</pre></td></tr><tr><td data-num="55"></td><td><pre> **/</pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TCPServer03</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span> <span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span>accept <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        </pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token comment">// 接收客户端发送的数据</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token comment">// 获取输入流</span></pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getInputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token comment">// 使用转换流包装数据</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span> <span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token class-name">String</span> line<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token comment">// 读取数据并输出在控制台</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span>readLine <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        </pre></td></tr><tr><td data-num="72"></td><td><pre>        <span class="token comment">// 服务器端发送数据给客户端</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getOutputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token comment">// 使用转换流包装数据</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span> <span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span><span class="token string">"Hello, Client!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>        <span class="token comment">// 刷新缓存，将数据写入到输出流</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>flush <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>        <span class="token comment">// 结束标志</span></pre></td></tr><tr><td data-num="80"></td><td><pre>        socket<span class="token punctuation">.</span>shutdownOutput <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        </pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token comment">// 关闭资源</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>        bufferedReader<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>        <span class="token comment">// 关闭 ServerSocket 对象</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        serverSocket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="89"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="文件上传"><a class="anchor" href="#文件上传">#</a> 文件上传</h4>
<blockquote>
<p>客户端</p>
<p>读取磁盘文件写入到字节流</p>
<p>字节流经过 socket 进入数据通道</p>
<p>接收服务器端返回的上传成功标志</p>
</blockquote>
<blockquote>
<p>服务器端</p>
<p>读取 socket 数据通道数据写入字节流</p>
<p>字节流写入磁盘文件</p>
<p>返回给客户端上传成功标志</p>
</blockquote>
<p><img loading="lazy" data-src="image-20240518120558257.png" alt="image-20240518120558257"></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// client</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadClient</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 创建 socket</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span> <span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getLocalHost <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 读取磁盘文件写入到字节流，边读边写</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\图片\\壁纸\\2.jpeg"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">FileInputStream</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getOutputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span> <span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span> <span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 字节流经过 socket 进入数据通道</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">int</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>length <span class="token operator">=</span> bis<span class="token punctuation">.</span>read <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            bos<span class="token punctuation">.</span>write <span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            bos<span class="token punctuation">.</span>flush <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 结束标志</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        socket<span class="token punctuation">.</span>shutdownOutput <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 接收服务器端返回的上传成功标志</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getInputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span> <span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">String</span> line<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> br<span class="token punctuation">.</span>readLine <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// 关闭流</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        bos<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        br<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        bis<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment">//server</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadServer</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 等待连接</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span> <span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span>accept <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token comment">// 读取 socket 数据通道数据写入字节流</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">// 字节流写入磁盘文件，边读边写</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token comment">// 创建目标文件</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token class-name">String</span> targetPath <span class="token operator">=</span> <span class="token string">"E:\\upload.jpg"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span> <span class="token punctuation">(</span>targetPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span> <span class="token punctuation">(</span>fileOutputStream<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token comment">// 读取 socket 数据通道数据</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getInputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span> <span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token keyword">int</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>length <span class="token operator">=</span> bis<span class="token punctuation">.</span>read <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            bos<span class="token punctuation">.</span>write <span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token comment">// 刷新缓冲区，写入磁盘文件</span></pre></td></tr><tr><td data-num="55"></td><td><pre>            bos<span class="token punctuation">.</span>flush <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token comment">// 返回给客户端上传成功标志</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span>getOutputStream <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span> <span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>write <span class="token punctuation">(</span><span class="token string">"上传成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token comment">// 刷新缓冲区，写入 socket 数据通道</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>flush <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token comment">// 结束标志</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        socket<span class="token punctuation">.</span>shutdownOutput <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token comment">// 关闭流</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        bos<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        bufferedWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        bis<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>        serverSocket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="netstat-指令"><a class="anchor" href="#netstat-指令">#</a> netstat 指令</h4>
<ul>
<li>netstat -an 可以查看当前主机的网络情况，包括端口监听和网络连接</li>
<li>netstat -an | more 分页显示</li>
<li>netstat -anb | more 显示监听的程序</li>
<li>ctrl + c 可以退出</li>
</ul>
<h4 id="tcp的秘密"><a class="anchor" href="#tcp的秘密">#</a> TCP 的秘密</h4>
<ul>
<li>当客户端连接到服务器后，实际上客户端也是通过一个端口和服务器端进行通讯的，这个端口是由 TCP/IP 随机分配的</li>
<li>高并发基础</li>
<li>可以通过 <strong>IDEA 运行 java + netstat</strong> 查看验证</li>
</ul>
<h4 id="udp原理"><a class="anchor" href="#udp原理">#</a> UDP 原理</h4>
<ul>
<li>类 DatagramSocket 和 DatagramPacket 实现了基于 UDP 协议网络程序</li>
<li>UDP 数据通过数据包套接字 DatagramSocket 发送和接收，系统不保证 UDP 数据包一定能安全送达目的地，也不能确定何时送达</li>
<li>DatagramSocket 可以指定在那个端口接收数据</li>
<li>发送端和接收端不固定，根据谁发谁接决定</li>
<li>DatagramPacket 对象封装了 UDP 数据包，数据包中包含发送端的 IP 地址和端口号，接收端的 IP 地址和端口号</li>
<li>UDP 协议中每个数据包都给出完整地址信息，因此无需建立发送端和接收端连接直接发送</li>
<li><img loading="lazy" data-src="image-20240518174226023.png" alt="image-20240518174226023"></li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// receive</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UdpReceive</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token comment">// 创建一个 UDP Socket，并指定端口号</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span> <span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 创建数据包，最大 64K</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 创建一个字节数组，用于接收数据</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 等待接收数据，如果接收不到数据，会一直阻塞</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        socket<span class="token punctuation">.</span>receive <span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 打印接收到的数据</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"接收到数据："</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>packet<span class="token punctuation">.</span>getLength <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 关闭 Socket</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// send</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UdpSend</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 创建 UDP Socket</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span> <span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// 创建数据包，用于发送数据，最大 64K</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 创建 byte [] 数组，用于存储要发送的数据</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        data <span class="token operator">=</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">.</span>getBytes <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// 设置目标 IP 地址和端口号</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span>data<span class="token punctuation">.</span>length<span class="token punctuation">,</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span>getByName <span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">// 发送数据</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        socket<span class="token punctuation">.</span>send <span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// 关闭 Socket</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        socket<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="请求转发"><a class="anchor" href="#请求转发">#</a> 请求转发</h4>
<ol>
<li>请求转发通过 HttpServletRequest 对象获取请求转发器实现。</li>
<li>请求转发是服务器内部的行为，对客户端是屏蔽的。</li>
<li>客户端只发送了一次请求，客户端地址栏不变。</li>
<li>服务端只产生了一对请求和响应对象，这一对请求和响应对象会继续传递给下一个资源。</li>
<li>因为全程只有一个 HttpServletRequest 对象，所以请求参数可以传递，请求域中的数据也可以传递。</li>
<li>请求转发可以转发给其他 Servlet 动态资源，也可以转发给一些静态资源以实现页面跳转。</li>
<li>请求转发可以转发给 WEB-INF 下受保护的资源。请求转发不能转发到本项目以外的外部资源。</li>
</ol>
<p><img loading="lazy" data-src="image-20241001215111811-1727790679715-8.png" alt="image-20241001215111811-1727790679715-8"></p>
<h4 id="请求重定向"><a class="anchor" href="#请求重定向">#</a> 请求重定向</h4>
<ol>
<li>通过重定向跳转到 HttpServletResponse 对象的 sendRedirect 方法</li>
<li>通过重定向可以发送状态码 302 的 HTTP 响应来告诉客户端（比如浏览器）去获取存储在 Location 头部字段中的新的 URL，这种方式称为 HTTP 重定向</li>
<li>客户端浏览器不可见这次跳转，也就是说地址栏不会改变</li>
<li>跳转到了客户端无法访问或者权限不够不能访问的页面会提示错误</li>
<li>由于是在服务端进行 HttpServletResponse 对象调用，所以对于用户来说是看不见这个过程中发生什么事情</li>
<li>重定向可以理解为服务器在处理完一些事情后给予客户端新的指示</li>
<li>重定向可以实现 WEB-INF 下资源文件的保护</li>
<li>重定向可以实现外部资源网站的访问</li>
</ol>
<p><img loading="lazy" data-src="image-20241001215156367-1727790720343-10.png" alt="image-20241001215156367-1727790720343-10"></p>
<h4 id="filter"><a class="anchor" href="#filter">#</a> Filter</h4>
<p><img loading="lazy" data-src="Filter-1727790607285-6.png" alt="Filter-1727790607285-6"></p>
<h2 id="反射"><a class="anchor" href="#反射">#</a> 反射</h2>
<h3 id="反射基本介绍"><a class="anchor" href="#反射基本介绍">#</a> 反射基本介绍</h3>
<ul>
<li>
<p>需求</p>
<ul>
<li>根据配置文件 properties 指定信息，创建对象并调用方法</li>
<li>反射可以保证在不修改源码情况下，控制程序，符合 OCP 原则 (开闭原则)</li>
</ul>
</li>
<li>
<p>反射机制允许程序在执行期间借助与 Reflection API 取得类的任何内部信息（成员变量，构造器，成员方法等），并能操作对象的属性及方法，反射在设计模式和框架底层都会用到</p>
</li>
<li>
<p>加载完类后，堆中产生一个 Class 类型的对象（一个类对应一个 Class 对象），Class 对象包含了类的完整信息。通过该对象获取类的结构。就像一面镜子，形象称为反射</p>
</li>
<li>
<p>类加载：将数据存放到方法区，然后在堆创建 Class 对象，用于封装数据</p>
</li>
<li>
<p>反射相关的类</p>
<ul>
<li>java.lang.Class: 代表一个类，Class 对象表示某个类加载后在堆中的对象</li>
<li>java.lang.reflect.Method: 代表类的方法，Method 对象表示某个类的方法</li>
<li>java.lang.reflect.Field: 代表类的成员变量，Field 对象表示某个类的成员变量</li>
<li>java.lang.reflect.Constructor: 代表类的构造方法，Constructor 对象表示某个类的构造器</li>
</ul>
</li>
<li>
<p><img loading="lazy" data-src="image-20240519225738375.png" alt="image-20240519225738375"></p>
</li>
<li>
<p>properties 文件</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>className <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span></span>Cat</span></pre></td></tr><tr><td data-num="2"></td><td><pre>method <span class="token operator">=</span> cry</pre></td></tr></table></figure></li>
</ul>
</li>
<li>
<p>Cat</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span>basic_reflection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="4"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="5"></td><td><pre> **/</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Animal</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物叫"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Fly</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Run</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"all"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">Fly</span><span class="token punctuation">,</span> <span class="token class-name">Run</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">protected</span> <span class="token class-name">String</span> color<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Cat</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Cat</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"喵喵喵"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"喵喵喵喵喵喵"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"猫会飞"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"猫会跑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
</li>
<li>
<p>reflection</p>
<ul>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="12"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="13"></td><td><pre> **/</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectionForCat</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchFieldException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// 创建一个 Properties 对象</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 加载配置文件到 Properties 对象</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        properties<span class="token punctuation">.</span>load <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span> <span class="token punctuation">(</span><span class="token string">"E:\\JAVA\\JAVA\\JAVASE\\src\\com\\fengxin\\basic\\reflection\\reflection.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 从 Properties 对象中获取类名和方法名</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">String</span> className <span class="token operator">=</span> properties<span class="token punctuation">.</span>getProperty <span class="token punctuation">(</span><span class="token string">"className"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">String</span> methodName <span class="token operator">=</span> properties<span class="token punctuation">.</span>getProperty <span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        </pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// 加载类，返回 Class 对象</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        </pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token comment">// 获取类的实例，通过 cls 得到加载类 com.fengxin.basic.reflection.Cat 的对象</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>o<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        </pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// 获取方法，通过 cls 得到加载类 com.fengxin.basic.reflection.Cat 的名为 methodName 的方法对象</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">Method</span> method <span class="token operator">=</span> cls<span class="token punctuation">.</span>getMethod <span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        </pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment">// 调用类 com.fengxin.basic.reflection.Cat 对象的方法 ---> 通过 method 得到加载类的方法对象，调用 invoke 方法</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">// method.invoke(Object obj)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        method<span class="token punctuation">.</span>invoke <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        </pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 调用类 com.fengxin.basic.reflection.Cat 的无参构造器</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">Constructor</span> constructor1 <span class="token operator">=</span> cls<span class="token punctuation">.</span>getConstructor <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>constructor1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        </pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">// 调用类 com.fengxin.basic.reflection.Cat 的有参构造器，根据参数类型获取构造器</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">Constructor</span> constructor2 <span class="token operator">=</span> cls<span class="token punctuation">.</span>getConstructor <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>constructor2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        </pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token comment">// 获取类 com.fengxin.basic.reflection.Cat 的字段（需要访问权限）</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token class-name">Field</span> fieldPublic <span class="token operator">=</span> cls<span class="token punctuation">.</span>getField <span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        </pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token comment">// 获取具体值 field.get (Object obj)</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>fieldPublic<span class="token punctuation">.</span>get <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="反射优化"><a class="anchor" href="#反射优化">#</a> 反射优化</h3>
<ul>
<li>
<p>反射优点和缺点</p>
<ul>
<li>
<p>优点：可以动态的创建和使用对象（也是框架底层核心），使用灵活，没有反射机制，框架技术就失去底层支撑。</p>
</li>
<li>
<p>缺点：使用反射基本是解释执行，对执行速度有影响。</p>
</li>
</ul>
</li>
<li>
<p>优化</p>
<ul>
<li>Method,Constructer,Field 都有 setAccessible (boolean flag)</li>
<li>值为 true 关闭权限检查，提升速度</li>
</ul>
</li>
</ul>
<h3 id="反射常用方法"><a class="anchor" href="#反射常用方法">#</a> 反射常用方法</h3>
<ul>
<li>getName: 获取全类名</li>
<li>getSimpleName: 获取简单类名</li>
<li>getFields: 获取所有 public 修饰的属性，包含本类以及父类的</li>
<li>getDeclaredFields: 获取本类中所有属性</li>
<li>getMethods: 获取所有 public 修饰的方法，包含本类以及父类的</li>
<li>getDeclaredMethods: 获取本类中所有方法</li>
<li>getConstructors: 获取本类所有 public 修饰的构造器</li>
<li>getDeclaredConstructors: 获取本类中所有构造器</li>
<li>getPackage: 以 Package 形式返回 包信息</li>
<li>getSuperClass: 以 Class 形式返回父类信息</li>
<li>getInterfaces: 以 Class [] 形式返回接口信息</li>
<li>getAnnotations: 以 Annotation [] 形式返回注解信息</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span>method</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Annotation</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="9"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="10"></td><td><pre> * Class 类的常用方法</pre></td></tr><tr><td data-num="11"></td><td><pre> **/</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span> <span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Class_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchFieldException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">String</span> catPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span><span class="token string">"com.fengxin.basic.reflection.basic_reflection.Cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        </pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 获取 Class 对象 (加载类)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>catPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        </pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// 显示该 Class 对象所表示的实体类</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"该Class对象所表示的实体类: "</span> <span class="token operator">+</span> cls<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        </pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 获取 cls 运行类型 ---Class</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span> <span class="token string">"cls运行类型: "</span> <span class="token operator">+</span> cls<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        </pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// 获取 Class 对象所表示的实体全类名</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Class对象所表示的实体全类名: "</span> <span class="token operator">+</span> cls<span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        </pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 获取简单类名</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"cls简单类名: "</span> <span class="token operator">+</span> cls<span class="token punctuation">.</span>getSimpleName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        </pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// 获取实体类包名</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"cls包名: "</span> <span class="token operator">+</span> cls<span class="token punctuation">.</span>getPackage <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        </pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">// 创建 cls 的实例，运行类型是实体类 Cat</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">Object</span> obj <span class="token operator">=</span> cls<span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        </pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 获取属性名</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">Field</span> field <span class="token operator">=</span> cls<span class="token punctuation">.</span>getField <span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"属性名: "</span> <span class="token operator">+</span> field<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        </pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">// 获取属性值</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"属性值 age = "</span> <span class="token operator">+</span> field<span class="token punctuation">.</span>get <span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        </pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token comment">// 获取本类所有属性 (包括私有和保护)，包含本类以及父类的</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"所有属性(包括私有和保护)，包含本类以及父类的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields1 <span class="token operator">=</span> cls<span class="token punctuation">.</span>getDeclaredFields <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Field</span> f<span class="token operator">:</span> fields1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        </pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token comment">// 获取本类所有 public 修饰的属性</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"获取本类所有public修饰的属性"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields2 <span class="token operator">=</span> cls<span class="token punctuation">.</span>getFields <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Field</span> f<span class="token operator">:</span> fields2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        </pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token comment">// 获取所有 public 修饰的方法，包含本类以及父类的</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"获取所有public修饰的方法，包含本类以及父类的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> cls<span class="token punctuation">.</span>getMethods <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>        </pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token comment">// 获取本类中所有方法</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"获取本类中所有方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> clsDeclaredMethods <span class="token operator">=</span> cls<span class="token punctuation">.</span>getDeclaredMethods <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> clsDeclaredMethods<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>        </pre></td></tr><tr><td data-num="73"></td><td><pre>        <span class="token comment">// 获取本类所有 public 修饰的构造器</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"获取本类所有public修饰的构造器"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> cls<span class="token punctuation">.</span>getConstructors <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>        </pre></td></tr><tr><td data-num="80"></td><td><pre>        <span class="token comment">// 获取所有构造器，包含本类以及父类的</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"获取所有构造器，包含本类以及父类的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> clsDeclaredConstructors <span class="token operator">=</span> cls<span class="token punctuation">.</span>getDeclaredConstructors <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clsDeclaredConstructor <span class="token operator">:</span> clsDeclaredConstructors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>clsDeclaredConstructor<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>        </pre></td></tr><tr><td data-num="87"></td><td><pre>        <span class="token comment">// 以 Class 形式返回父类信息</span></pre></td></tr><tr><td data-num="88"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> superclass <span class="token operator">=</span> cls<span class="token punctuation">.</span>getSuperclass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"父类信息: "</span> <span class="token operator">+</span> superclass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>        </pre></td></tr><tr><td data-num="91"></td><td><pre>        <span class="token comment">// 以 Class [] 形式返回接口信息</span></pre></td></tr><tr><td data-num="92"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"以Class[]形式返回接口信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> cls<span class="token punctuation">.</span>getInterfaces <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> anInterface <span class="token operator">:</span> interfaces<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="95"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"接口信息: "</span> <span class="token operator">+</span> anInterface<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>        </pre></td></tr><tr><td data-num="98"></td><td><pre>        <span class="token comment">// 以 Annotation [] 形式返回注解信息</span></pre></td></tr><tr><td data-num="99"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"以Annotation[]形式返回注解信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>        <span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotations <span class="token operator">=</span> cls<span class="token punctuation">.</span>getAnnotations <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Annotation</span> annotation <span class="token operator">:</span> annotations<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"注解信息: "</span> <span class="token operator">+</span> annotation<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>        </pre></td></tr><tr><td data-num="105"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="106"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="获取class"><a class="anchor" href="#获取class">#</a> 获取 Class</h3>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// 1.Class class = Class.forName (类名);  编译阶段</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">String</span> classPath <span class="token operator">=</span> <span class="token string">"com.fengxin.basic.reflection.basic_reflection.Cat"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> cls1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>classPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>cls1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// 2. 类名.class，常用于参数传递  类加载阶段</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        </pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 3. 对象.getClass () 创建对象之后 运行阶段</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>cat<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 4. 基本类型的包装类.TYPE</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> integerType <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>integerType<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 5. 基本类型也有对应的 Class 对象</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> integerClass <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>integerClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        </pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 6. 使用 ClassLoader (类加载阶段)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 获取 ClassLoder 对象</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> cat<span class="token punctuation">.</span>getClass <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getClassLoader <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 获取 ClassLoder 类</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> cls2 <span class="token operator">=</span> classLoader<span class="token punctuation">.</span>loadClass <span class="token punctuation">(</span>classPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>cls2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li>如下类型有 Class 对象
<ul>
<li>外部类，成员内部类，静态内部类，局部内部类，匿名内部类</li>
<li>interface: 接口</li>
<li>数组</li>
<li>enum: 枚举</li>
<li>annotation: 注解</li>
<li>基本数据类型</li>
<li>void</li>
</ul>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// 外部类，成员内部类，静态内部类，局部内部类，匿名内部类</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> stringClass <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"String class is +"</span> <span class="token operator">+</span> stringClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        </pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">//interface: 接口</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Serializable</span><span class="token punctuation">></span></span> serializableClass <span class="token operator">=</span> <span class="token class-name">Serializable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Serializable class is +"</span> <span class="token operator">+</span> serializableClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        </pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 数组</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> stringArrayClass <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"String[] class is +"</span> <span class="token operator">+</span> stringArrayClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">//enum: 枚举</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Thread</span><span class="token punctuation">></span></span> threadClass <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Thread class is +"</span> <span class="token operator">+</span> threadClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">//annotation: 注解</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SuppressWarnings</span><span class="token punctuation">></span></span> suppressWarningsClass <span class="token operator">=</span> <span class="token class-name">SuppressWarnings</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"SuppressWarnings class is +"</span> <span class="token operator">+</span> suppressWarningsClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    </pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 基本数据类型</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> integerClass <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Integer class is +"</span> <span class="token operator">+</span> integerClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    </pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// void</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> voidClass <span class="token operator">=</span> <span class="token keyword">void</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Void class is +"</span> <span class="token operator">+</span> voidClass<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="类加载"><a class="anchor" href="#类加载">#</a> 类加载</h3>
<ul>
<li>反射机制是 java 实现动态语言的关键，也就是通过反射实现类动态加载
<ul>
<li>静态加载：编译时加载相关的类，如果没有则报错，依赖性太强</li>
<li>动态加载：运行时加载需要的类，如果运行时不用该类，即使不存在该类，则不报错，降低了依赖性</li>
</ul>
</li>
<li>类加载时机
<ul>
<li>
<p>静态加载</p>
<ul>
<li>当创建对象时 (new)</li>
<li>当子类被加载时</li>
<li>调用类中的静态成员时</li>
</ul>
</li>
<li>
<p>动态加载</p>
<ul>
<li>通过反射</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoadClass</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"请输入1或2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        flag <span class="token operator">=</span> sc<span class="token punctuation">.</span>nextInt <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                <span class="token comment">// 静态加载</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token comment">// 编译时就会报异常</span></pre></td></tr><tr><td data-num="11"></td><td><pre>                <span class="token comment">// Dog dog = new Dog;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>                <span class="token comment">// dog.cry();</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                <span class="token comment">// 动态加载</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token comment">// 运行时才会报异常</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span><span class="token string">"com.fengxin.basic.reflection.loadclass.Person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>                <span class="token class-name">Object</span> obj <span class="token operator">=</span> cls<span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token class-name">Method</span> method <span class="token operator">=</span> cls<span class="token punctuation">.</span>getMethod <span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                method<span class="token punctuation">.</span>invoke <span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="类加载的五个阶段"><a class="anchor" href="#类加载的五个阶段">#</a> 类加载的五个阶段</h3>
<ul>
<li>
<p><img loading="lazy" data-src="image-20240520152818682.png" alt="image-20240520152818682"></p>
</li>
<li>
<p>加载 (Loading) 阶段</p>
<ul>
<li>JVM 将字节码从不同的数据源（class 文件，jar 包，网络）转化为二进制字节流<strong>加载</strong>到内存，并生成一个代表该类的 java.lang.Class<strong> 对象</strong></li>
</ul>
</li>
<li>
<p>连接 (Linking) 阶段</p>
<ul>
<li>
<p>验证</p>
<ul>
<li>确保 Class 文件中的字节流包含的信息符合当前虚拟机的要求，并且不会危害虚拟机的安全</li>
<li>文件格式验证（是否以魔数 oxcafebabe 开头），元数据验证，字节码验证和符号引用验证</li>
<li>可以考虑 -Xverify:none 参数关闭大部分的类验证措施，缩短加载时间</li>
</ul>
</li>
<li>
<p>准备</p>
<ul>
<li>
<p>JVM 对<strong>静态变量</strong>分配内存并<strong>默认初始化</strong>（对应数据类型的默认初始值：0,0L,null,false…），这些变量所使用的内存都将在方法区中分配</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">//n1 是实例属性，不是静态变量，不会分配内存</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">//n2 是静态变量，分配内存，默认初始化为 0</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">//n3 是常量，一旦赋值就不可改变，分配内存，n3 = 30</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
</li>
<li>
<p>解析</p>
<ul>
<li>虚拟机将常量池内的<strong>符号引用</strong>（相对）替换为<strong>直接内存地址</strong>（绝对）引用</li>
</ul>
</li>
</ul>
</li>
<li>
<p>初始化</p>
<ul>
<li>执行类中定义的 Java 程序代码</li>
<li>执行方法 clinit ()</li>
<li>clinit () 方法由编译器按照语句在源文件出现的顺序，一次自动收集类中所有的<strong>静态变量的赋值动作</strong>和<strong>静态代码块</strong>中的语句，并合并</li>
<li>虚拟机会保证一个类的 clinit 方法在多线程环境中被正确加锁、同步</li>
</ul>
</li>
</ul>
<h3 id="获取类的信息"><a class="anchor" href="#获取类的信息">#</a> 获取类的信息</h3>
<h4 id="java-lang-reflect-field类"><a class="anchor" href="#java-lang-reflect-field类">#</a> java. lang. reflect. Field 类</h4>
<ul>
<li>
<p>getModifiers: 以 int 形式返回修饰符</p>
<blockquote>
<p>说明：默认修饰符是 0, public 是 1 , private 是 2, protected 是 4,static 是 8, final 是 16</p>
</blockquote>
</li>
<li>
<p>getType: 以 Class 形式返回类型</p>
</li>
<li>
<p>getName: 返回属性名</p>
</li>
</ul>
<h4 id="java-lang-reflect-method类"><a class="anchor" href="#java-lang-reflect-method类">#</a> java. lang. reflect. Method 类</h4>
<ul>
<li>getModifiers: 以 int 形式返回修饰符</li>
<li>getReturnType: 以 Class 形式获取返回类型</li>
<li>getName: 返回方法名</li>
<li>getParameterTypes: 以 Class [] 返回参数类型数组</li>
</ul>
<h4 id="java-lang-reflect-constructer类"><a class="anchor" href="#java-lang-reflect-constructer类">#</a> java. lang. reflect. Constructer 类</h4>
<ul>
<li>getModifiers: 以 int 形式返回修饰符</li>
<li>getReturnType: 以 Class 形式获取返回类型</li>
<li>getParameterTypes: 以 Class [] 返回参数类型数组</li>
</ul>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span>method</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="9"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="10"></td><td><pre> * 获取类中的信息</pre></td></tr><tr><td data-num="11"></td><td><pre> * 包括字段，方法，构造器的相关信息</pre></td></tr><tr><td data-num="12"></td><td><pre> **/</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetInformation_Class</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"com.fengxin.basic.reflection.basic_reflection.Cat"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> cls<span class="token punctuation">.</span>getDeclaredFields <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"---------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Fields:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token comment">//getModifiers: 以 int 形式返回修饰符</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>field<span class="token punctuation">.</span>getModifiers <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token comment">//getType: 以 Class 形式返回类型</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>field<span class="token punctuation">.</span>getType <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token comment">//getName: 返回属性名</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>field<span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"---------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Methods:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> cls<span class="token punctuation">.</span>getDeclaredMethods <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token comment">//getModifiers: 以 int 形式返回修饰符</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>method<span class="token punctuation">.</span>getModifiers <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token comment">//getReturnType: 以 Class 形式获取返回类型</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>method<span class="token punctuation">.</span>getReturnType <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token comment">//getName: 返回方法名</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>method<span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token comment">//getParameterTypes: 以 Class [] 返回参数类型数组</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span>toString <span class="token punctuation">(</span>method<span class="token punctuation">.</span>getParameterTypes <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"---------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">"Constructors:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> cls<span class="token punctuation">.</span>getDeclaredConstructors <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token comment">//getModifiers: 以 int 形式返回修饰符</span></pre></td></tr><tr><td data-num="46"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>getModifiers <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            <span class="token comment">//getName: 返回构造器名</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>getName <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token comment">//getParameterTypes: 以 Class [] 返回参数类型数组</span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span>toString <span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>getParameterTypes <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="反射暴破"><a class="anchor" href="#反射暴破">#</a> 反射暴破</h3>
<h4 id="field"><a class="anchor" href="#field">#</a> Field</h4>
<ul>
<li>
<p>Field f= clazz.getDeclaredField (属性名);</p>
</li>
<li>
<p>暴破：f.setAccessible (true);//f 是 Field</p>
</li>
<li>
<p>设置值：set (o，值)；o 表示对象</p>
</li>
<li>
<p>访问：System.out.println (f.get (o))；o 表示对象</p>
<blockquote>
<p>注意：如果是静态属性，则 set 和 get 中的参数 o，可以写成 null</p>
</blockquote>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span>accessible</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Accessible_Fields</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchFieldException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">String</span> personPath <span class="token operator">=</span> <span class="token string">"com.fengxin.basic.reflection.accessible.Person"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> person <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>personPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">Object</span> obj <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredConstructor <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">Field</span> name <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredField <span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        </pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// 暴破，操作私有 Field</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        name<span class="token punctuation">.</span>setAccessible <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        name<span class="token punctuation">.</span>set <span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>name<span class="token punctuation">.</span>get <span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        </pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 静态 Field</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">Field</span> age <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredField <span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        age<span class="token punctuation">.</span>setAccessible <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// Object 可以设为 null</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        age<span class="token punctuation">.</span>set <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>age<span class="token punctuation">.</span>get <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        </pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
<li></li>
</ul>
<h4 id="method"><a class="anchor" href="#method">#</a> Method</h4>
<ul>
<li>
<p>Method m = clazz.getDeclaredMethod (方法名，XX.class):</p>
</li>
<li>
<p>暴破：m.setAccessible (true);</p>
</li>
<li>
<p>调用：m.invoke (o, 实参列表);</p>
<blockquote>
<p>注意：如果是静态方法，则 invoke 的参数 o，可以写成 null</p>
</blockquote>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span>accessible</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Accessible_Methods</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">String</span> personPath <span class="token operator">=</span> <span class="token string">"com.fengxin.basic.reflection.accessible.Person"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> person <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>personPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">Object</span> obj <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredConstructor <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">Method</span> method <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredMethod <span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        </pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// 暴破</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        method<span class="token punctuation">.</span>setAccessible <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">//m.invoke (o, 实参列表);</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        method<span class="token punctuation">.</span>invoke <span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<h4 id="constructer"><a class="anchor" href="#constructer">#</a> Constructer</h4>
<ul>
<li>
<p>调用类中的 public 修饰的无参构造器</p>
</li>
<li>
<p>调用类中的指定构造器</p>
</li>
<li>
<p>getDeclaredConstructor ().newInstance ()：调用类中的无参构造器，获取对应类的对象</p>
</li>
<li>
<p>getConstructor (Class..clazz）：根据参数列表，获取对应的 public 构造器对象</p>
</li>
<li>
<p>getDecalaredConstructor (Class...clazz)：根据参数列表，获取对应的构造器对象 (没有访问权限限制)</p>
</li>
<li>
<p>暴破：setAccessible (true);</p>
</li>
<li>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fengxin<span class="token punctuation">.</span>basic<span class="token punctuation">.</span>reflection<span class="token punctuation">.</span>accessible</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="7"></td><td><pre> * @author FENGXIN</pre></td></tr><tr><td data-num="8"></td><td><pre> **/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Accessible_Constructor</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> main <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">String</span> personPath <span class="token operator">=</span> <span class="token string">"com.fengxin.basic.reflection.accessible.Person"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> person <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span>forName <span class="token punctuation">(</span>personPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        </pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 默认构造函数</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Object</span> obj1 <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredConstructor <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        </pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token comment">// 公有带参数构造函数</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> constructor1 <span class="token operator">=</span> person<span class="token punctuation">.</span>getConstructor <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">Object</span> obj2 <span class="token operator">=</span> constructor1<span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        </pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 私有带参构造函数</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> constructor2 <span class="token operator">=</span> person<span class="token punctuation">.</span>getDeclaredConstructor <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 暴破</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        constructor2<span class="token punctuation">.</span>setAccessible <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">Object</span> obj3 <span class="token operator">=</span> constructor2<span class="token punctuation">.</span>newInstance <span class="token punctuation">(</span><span class="token string">"fengxin"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span>println <span class="token punctuation">(</span>obj3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li>
</ul>
<div class="tags"><a href="../tags/Java/" rel="tag"><i class="ic i-tag"></i>Java</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="/java-javase-2024-11-25-JavaSE/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2024-11-29 15:24:40" itemprop="dateModified" datetime="2024-11-29T15:24:40+08:00">2024-11-29</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img loading="lazy" data-src="../assets/wechatpay.png" alt="Maple Plus 微信支付"><p>微信支付</p></div><div><img loading="lazy" data-src="../assets/alipay.png" alt="Maple Plus 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>Maple Plus<i class="ic i-at"><em>@</em></i>Maple</li><li class="link"><strong>本文链接：</strong><a href="https://blog.fxink.cn/java-javase-2024-11-25-JavaSE/" title="JavaSE">https://blog.fxink.cn/java-javase-2024-11-25-JavaSE/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"></div><div class="item right"><a href="../mysql-base-2024-11-26-MySQL/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;image.fxink.cn&#x2F;maple&#x2F;wallhaven-p26eq9.webp" title="MySQL基础"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>MySQL基础</span><h3>MySQL基础</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">1.</span> <span class="toc-text"> 继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">1.1.</span> <span class="toc-text"> 继承的好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E7%BB%86%E8%8A%82"><span class="toc-number">1.2.</span> <span class="toc-text"> 继承细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">2.</span> <span class="toc-text"> 访问权限修饰符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#super"><span class="toc-number">3.</span> <span class="toc-text"> super</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text"> 基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#super%E7%BB%86%E8%8A%82"><span class="toc-number">3.2.</span> <span class="toc-text"> super 细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#super%E5%92%8Cthis%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">3.3.</span> <span class="toc-text"> super 和 this 的比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%87%8D%E5%86%99"><span class="toc-number">4.</span> <span class="toc-text"> 方法重写</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%86%99%E7%BB%86%E8%8A%82"><span class="toc-number">4.1.</span> <span class="toc-text"> 重写细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">5.</span> <span class="toc-text"> 多态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%A4%9A%E6%80%81"><span class="toc-number">5.1.</span> <span class="toc-text"> 方法多态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%A4%9A%E6%80%81%E6%8A%AB%E7%9D%80%E7%BE%8A%E7%9A%AE%E7%9A%84%E7%8B%BC"><span class="toc-number">5.2.</span> <span class="toc-text"> 对象多态 (披着羊皮的狼)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%80%81%E7%BB%86%E8%8A%82"><span class="toc-number">5.3.</span> <span class="toc-text"> 多态细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#object"><span class="toc-number">6.</span> <span class="toc-text"> Object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">6.1.</span> <span class="toc-text"> &#x3D;&#x3D; 运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#equals%E6%96%B9%E6%B3%95"><span class="toc-number">6.2.</span> <span class="toc-text"> equals 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hashcode%E6%96%B9%E6%B3%95"><span class="toc-number">6.3.</span> <span class="toc-text"> hashCode 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tostring%E6%96%B9%E6%B3%95"><span class="toc-number">6.4.</span> <span class="toc-text"> toString 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%8F%98%E9%87%8F%E6%96%B9%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text"> 类变量 &#x2F; 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82"><span class="toc-number">7.2.</span> <span class="toc-text"> 细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#main%E6%96%B9%E6%B3%95"><span class="toc-number">7.3.</span> <span class="toc-text"> main 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">8.</span> <span class="toc-text"> 代码块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#final"><span class="toc-number">9.</span> <span class="toc-text"> final</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">9.1.</span> <span class="toc-text"> 基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-2"><span class="toc-number">9.2.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">10.</span> <span class="toc-text"> 抽象类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80-2"><span class="toc-number">10.1.</span> <span class="toc-text"> 基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-3"><span class="toc-number">10.2.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">11.</span> <span class="toc-text"> 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80-3"><span class="toc-number">11.1.</span> <span class="toc-text"> 基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-4"><span class="toc-number">11.2.</span> <span class="toc-text"> 细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3-vs-%E7%BB%A7%E6%89%BF"><span class="toc-number">11.3.</span> <span class="toc-text"> 接口 VS 继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%A4%9A%E6%80%81%E7%89%B9%E6%80%A7"><span class="toc-number">11.4.</span> <span class="toc-text"> 接口的多态特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">12.</span> <span class="toc-text"> 内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80-4"><span class="toc-number">12.1.</span> <span class="toc-text"> 基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">12.2.</span> <span class="toc-text"> 局部内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-5"><span class="toc-number">12.2.1.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">12.3.</span> <span class="toc-text"> 匿名内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-6"><span class="toc-number">12.3.1.</span> <span class="toc-text"> 细节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%97%B6%E9%97%B4"><span class="toc-number">12.3.2.</span> <span class="toc-text"> 代码时间</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">12.4.</span> <span class="toc-text"> 成员内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-7"><span class="toc-number">12.4.1.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">12.5.</span> <span class="toc-text"> 静态内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-8"><span class="toc-number">12.5.1.</span> <span class="toc-text"> 细节</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE"><span class="toc-number">13.</span> <span class="toc-text"> 枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B"><span class="toc-number">13.1.</span> <span class="toc-text"> 自定义枚举类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8enum%E5%85%B3%E9%94%AE%E5%AD%97%E5%AE%9E%E7%8E%B0%E6%9E%9A%E4%B8%BE"><span class="toc-number">13.2.</span> <span class="toc-text"> 使用 enum 关键字实现枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80-5"><span class="toc-number">13.2.1.</span> <span class="toc-text"> 基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">13.2.2.</span> <span class="toc-text"> 常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82"><span class="toc-number">13.2.3.</span> <span class="toc-text"> 使用细节</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-number">14.</span> <span class="toc-text"> 注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#override"><span class="toc-number">14.0.1.</span> <span class="toc-text"> @Override</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deprecated"><span class="toc-number">14.0.2.</span> <span class="toc-text"> @Deprecated</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#suppresswarnings"><span class="toc-number">14.0.3.</span> <span class="toc-text"> @SuppressWarnings</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E6%B3%A8%E8%A7%A3%E4%BA%86%E8%A7%A3"><span class="toc-number">14.0.4.</span> <span class="toc-text"> 元注解（了解）</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">15.</span> <span class="toc-text"> 异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">15.1.</span> <span class="toc-text"> 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB%E5%9B%BE"><span class="toc-number">15.2.</span> <span class="toc-text"> 异常体系图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BC%82%E5%B8%B8"><span class="toc-number">15.3.</span> <span class="toc-text"> 常见的运行时异常</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#nullpointerexception%E7%A9%BA%E6%8C%87%E9%92%88%E5%BC%82%E5%B8%B8"><span class="toc-number">15.3.1.</span> <span class="toc-text"> NullPointerException（空指针异常）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arithmeticexception%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97%E5%BC%82%E5%B8%B8"><span class="toc-number">15.3.2.</span> <span class="toc-text"> ArithmeticException（数学运算异常）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arrayindexoutexception%E6%95%B0%E7%BB%84%E4%B8%8B%E6%A0%87%E8%B6%8A%E7%95%8C%E5%BC%82%E5%B8%B8"><span class="toc-number">15.3.3.</span> <span class="toc-text"> ArrayIndexOutException（数组下标越界异常）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#classcastexception%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%BC%82%E5%B8%B8%E4%BD%86%E5%AF%B9%E8%B1%A1%E4%B8%8D%E6%98%AF%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%AD%90%E7%B1%BB%E6%97%B6%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-number">15.3.4.</span> <span class="toc-text"> ClassCastException（类型转换异常）但对象不是实例的子类时抛出异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#numberformatexception%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E4%B8%8D%E6%AD%A3%E7%A1%AE%E5%BC%82%E5%B8%B8"><span class="toc-number">15.3.5.</span> <span class="toc-text"> NumberFormatException（数字格式不正确异常）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">15.4.</span> <span class="toc-text"> 异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#try-catch-finally"><span class="toc-number">15.4.1.</span> <span class="toc-text"> try-catch-finally</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-9"><span class="toc-number">15.4.1.1.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#throws"><span class="toc-number">15.4.2.</span> <span class="toc-text"> throws</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-10"><span class="toc-number">15.4.2.1.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">15.4.3.</span> <span class="toc-text"> 自定义异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#throw%E5%92%8Cthrows%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">15.4.4.</span> <span class="toc-text"> throw 和 throws 的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="toc-number">16.</span> <span class="toc-text"> 常用类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E8%A3%85%E7%B1%BBwrapper"><span class="toc-number">16.1.</span> <span class="toc-text"> 包装类 (Wrapper)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AB%E5%A4%A7%E5%8C%85%E8%A3%85%E7%B1%BB"><span class="toc-number">16.1.1.</span> <span class="toc-text"> 八大包装类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E8%A3%85%E7%B1%BB%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E8%A3%85%E7%AE%B1%E5%92%8C%E6%8B%86%E7%AE%B1"><span class="toc-number">16.1.2.</span> <span class="toc-text"> 包装类和基本数据类型的转换（装箱和拆箱）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E8%A3%85%E7%B1%BB%E5%92%8Cstring%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="toc-number">16.1.3.</span> <span class="toc-text"> 包装类和 String 相互转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E8%A3%85%E7%B1%BBinteger%E5%92%8Ccharater%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E4%B8%BE%E4%BE%8B"><span class="toc-number">16.1.4.</span> <span class="toc-text"> 包装类 Integer 和 Charater 的常用方法（举例）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#integer%E9%9D%A2%E8%AF%95"><span class="toc-number">16.1.5.</span> <span class="toc-text"> Integer 面试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string"><span class="toc-number">16.2.</span> <span class="toc-text"> String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#string%E7%BB%93%E6%9E%84"><span class="toc-number">16.2.1.</span> <span class="toc-text"> String 结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#string-%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">16.2.2.</span> <span class="toc-text"> String 对象的两种创建方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">16.2.3.</span> <span class="toc-text"> 字符串的特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#string%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E8%A1%A5%E5%85%85"><span class="toc-number">16.2.4.</span> <span class="toc-text"> String 常用方法补充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stringbuffer"><span class="toc-number">16.2.5.</span> <span class="toc-text"> StringBuffer</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-2"><span class="toc-number">16.2.5.1.</span> <span class="toc-text"> 基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#stringbuffer%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8Cstring%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="toc-number">16.2.5.2.</span> <span class="toc-text"> StringBuffer 构造器和 String 的相互转换</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#stringbuffer%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">16.2.5.2.1.</span> <span class="toc-text"> StringBuffer 构造器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2"><span class="toc-number">16.2.5.2.2.</span> <span class="toc-text"> 转换</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#stringbuffer%E6%96%B9%E6%B3%95"><span class="toc-number">16.2.5.3.</span> <span class="toc-text"> StringBuffer 方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stringbuilder"><span class="toc-number">16.2.6.</span> <span class="toc-text"> StringBuilder</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-3"><span class="toc-number">16.2.6.1.</span> <span class="toc-text"> 基本概念</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#string-stringbuffer-stringbuild%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">16.2.7.</span> <span class="toc-text"> String、StringBuffer、StringBuild 的比较</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#math%E6%96%B9%E6%B3%95"><span class="toc-number">16.3.</span> <span class="toc-text"> Math 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#array%E7%B1%BB%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95"><span class="toc-number">16.4.</span> <span class="toc-text"> Array 类常见方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#system%E6%96%B9%E6%B3%95"><span class="toc-number">16.5.</span> <span class="toc-text"> System 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#biginteger-bigdecimal%E7%B1%BB%E5%A4%A7%E6%95%B0-%E5%B0%8F%E6%95%B0%E5%A4%84%E7%90%86"><span class="toc-number">16.6.</span> <span class="toc-text"> BigInteger、BigDecimal 类（大数、小数处理）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#biginteger%E6%9B%B4%E5%A4%A7%E7%9A%84%E6%95%B0"><span class="toc-number">16.6.1.</span> <span class="toc-text"> BigInteger（更大的数）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bigdecimal%E6%9B%B4%E9%AB%98%E7%B2%BE%E5%BA%A6"><span class="toc-number">16.6.2.</span> <span class="toc-text"> BigDecimal（更高精度）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%B1%BB"><span class="toc-number">16.7.</span> <span class="toc-text"> 日期类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#date-simpledateformat"><span class="toc-number">16.7.1.</span> <span class="toc-text"> Date &amp;&amp; SimpleDateFormat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#calendar%E7%B1%BB"><span class="toc-number">16.7.2.</span> <span class="toc-text"> Calendar 类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#calendar%E6%98%AF%E4%B8%80%E4%B8%AA%E6%8A%BD%E8%B1%A1%E7%B1%BB%E6%9E%84%E9%80%A0%E5%99%A8%E6%98%AFprivate%E4%B8%BA%E4%B8%80%E4%BA%9B%E6%97%A5%E5%8E%86%E5%AD%97%E6%AE%B5%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2%E6%8F%90%E4%BE%9B%E6%96%B9%E6%B3%95%E4%B9%9F%E4%B8%BA%E6%93%8D%E4%BD%9C%E6%97%A5%E5%8E%86%E5%AD%97%E6%AE%B5%E6%8F%90%E4%BE%9B%E6%96%B9%E6%B3%95"><span class="toc-number">16.7.2.1.</span> <span class="toc-text"> Calendar 是一个抽象类，构造器是 private, 为一些日历字段之间的转换提供方法，也为操作日历字段提供方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E4%BB%A3%E6%97%A5%E6%9C%9F%E7%B1%BB"><span class="toc-number">16.7.3.</span> <span class="toc-text"> 第三代日期类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8now%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4"><span class="toc-number">16.7.3.1.</span> <span class="toc-text"> 使用 now () 返回当前时间</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88"><span class="toc-number">17.</span> <span class="toc-text"> 集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E4%BD%93%E7%B3%BB%E5%9B%BE"><span class="toc-number">17.1.</span> <span class="toc-text"> 集合体系图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collection%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">17.2.</span> <span class="toc-text"> Collection 接口和常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collection%E9%81%8D%E5%8E%86"><span class="toc-number">17.3.</span> <span class="toc-text"> Collection 遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collections%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">17.4.</span> <span class="toc-text"> Collections 工具类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-2"><span class="toc-number">17.4.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">17.4.2.</span> <span class="toc-text"> 排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE-%E6%9B%BF%E6%8D%A2"><span class="toc-number">17.4.3.</span> <span class="toc-text"> 查找、替换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list%E6%8E%A5%E5%8F%A3"><span class="toc-number">17.5.</span> <span class="toc-text"> List 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#list%E6%8E%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">17.5.1.</span> <span class="toc-text"> List 接口基本介绍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arraylist"><span class="toc-number">17.6.</span> <span class="toc-text"> ArrayList</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6"><span class="toc-number">17.6.1.</span> <span class="toc-text"> 扩容机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vector"><span class="toc-number">17.7.</span> <span class="toc-text"> Vector</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linkedlist"><span class="toc-number">17.8.</span> <span class="toc-text"> LinkedList</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">17.8.1.</span> <span class="toc-text"> 底层结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set%E6%8E%A5%E5%8F%A3"><span class="toc-number">17.9.</span> <span class="toc-text"> Set 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#set%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">17.9.1.</span> <span class="toc-text"> Set 基本介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">17.9.2.</span> <span class="toc-text"> Set 接口和常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hashset%E7%B1%BB%E5%AE%9E%E7%8E%B0%E4%BA%86set%E6%8E%A5%E5%8F%A3"><span class="toc-number">17.9.3.</span> <span class="toc-text"> HashSet 类 — 实现了 Set 接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hashset%E7%9A%84%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6"><span class="toc-number">17.9.4.</span> <span class="toc-text"> HashSet 的底层机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hashset%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81"><span class="toc-number">17.9.5.</span> <span class="toc-text"> HashSet 底层源码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linkedhashset"><span class="toc-number">17.9.6.</span> <span class="toc-text"> LinkedHashSet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linkedhashset%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81"><span class="toc-number">17.9.7.</span> <span class="toc-text"> LinkedHashSet 底层源码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#treeset"><span class="toc-number">17.9.8.</span> <span class="toc-text"> TreeSet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-3"><span class="toc-number">17.9.8.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81"><span class="toc-number">17.9.8.2.</span> <span class="toc-text"> 底层源码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map%E6%8E%A5%E5%8F%A3"><span class="toc-number">17.10.</span> <span class="toc-text"> Map 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%89%B9%E7%82%B9"><span class="toc-number">17.10.1.</span> <span class="toc-text"> 接口实现类特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81-2"><span class="toc-number">17.10.2.</span> <span class="toc-text"> 底层源码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">17.10.3.</span> <span class="toc-text"> Map 常用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map%E7%9A%84%E5%85%AD%E7%A7%8D%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-number">17.10.4.</span> <span class="toc-text"> Map 的六种遍历方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hashtable"><span class="toc-number">17.10.5.</span> <span class="toc-text"> Hashtable</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-4"><span class="toc-number">17.10.5.1.</span> <span class="toc-text"> 基本介绍</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#treemap"><span class="toc-number">17.10.6.</span> <span class="toc-text"> TreeMap</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-5"><span class="toc-number">17.10.6.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-number">17.10.6.2.</span> <span class="toc-text"> 测试代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#properties"><span class="toc-number">17.10.7.</span> <span class="toc-text"> Properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">17.10.8.</span> <span class="toc-text"> 集合实现类在开发中的选择</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-number">18.</span> <span class="toc-text"> 泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">18.1.</span> <span class="toc-text"> 泛型介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E8%AF%AD%E6%B3%95"><span class="toc-number">18.2.</span> <span class="toc-text"> 泛型语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B"><span class="toc-number">18.3.</span> <span class="toc-text"> 自定义泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B%E7%B1%BB"><span class="toc-number">18.3.1.</span> <span class="toc-text"> 自定义泛型类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-number">18.3.2.</span> <span class="toc-text"> 自定义泛型接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">18.3.3.</span> <span class="toc-text"> 自定义泛型方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%9A%84%E7%BB%A7%E6%89%BF%E5%92%8C%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">18.4.</span> <span class="toc-text"> 泛型的继承和通配符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B"><span class="toc-number">19.</span> <span class="toc-text"> 线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-6"><span class="toc-number">19.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B"><span class="toc-number">19.2.</span> <span class="toc-text"> 创建线程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%A7%E6%89%BFthread%E7%B1%BB%E9%87%8D%E5%86%99run%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.1.</span> <span class="toc-text"> 继承 Thread 类，重写 run 方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0runnable%E6%8E%A5%E5%8F%A3%E9%87%8D%E5%86%99run%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.2.</span> <span class="toc-text"> 实现 Runnable 接口，重写 run 方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#thread-vs-runnable"><span class="toc-number">19.2.3.</span> <span class="toc-text"> Thread VS Runnable</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%BB%88%E6%AD%A2"><span class="toc-number">19.3.</span> <span class="toc-text"> 线程终止</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">19.4.</span> <span class="toc-text"> 线程常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yield-%E5%92%8C-join"><span class="toc-number">19.5.</span> <span class="toc-text"> yield 和 join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%B7%A5%E4%BD%9C%E7%BA%BF%E7%A8%8B"><span class="toc-number">19.6.</span> <span class="toc-text"> 用户线程和工作线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">19.7.</span> <span class="toc-text"> 线程的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5synchronized"><span class="toc-number">19.8.</span> <span class="toc-text"> 线程同步 (synchronized)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E6%96%A5%E9%94%81"><span class="toc-number">19.9.</span> <span class="toc-text"> 互斥锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81"><span class="toc-number">19.10.</span> <span class="toc-text"> 线程死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E9%94%81"><span class="toc-number">19.11.</span> <span class="toc-text"> 释放锁</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E9%94%81%E7%9A%84%E6%97%B6%E6%9C%BA"><span class="toc-number">19.11.1.</span> <span class="toc-text"> 释放锁的时机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E4%BC%9A%E9%87%8A%E6%94%BE%E9%94%81%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">19.11.2.</span> <span class="toc-text"> 不会释放锁的情况</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6"><span class="toc-number">20.</span> <span class="toc-text"> 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-7"><span class="toc-number">20.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">20.2.</span> <span class="toc-text"> 创建文件的三种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="toc-number">20.3.</span> <span class="toc-text"> 文件的相关方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">20.4.</span> <span class="toc-text"> 常见的文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6io%E6%B5%81"><span class="toc-number">20.5.</span> <span class="toc-text"> 文件 IO 流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#io%E6%B5%81%E4%BB%8B%E7%BB%8D"><span class="toc-number">20.5.1.</span> <span class="toc-text"> IO 流介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#io%E6%B5%81%E4%BD%93%E7%B3%BB%E5%9B%BE"><span class="toc-number">20.5.2.</span> <span class="toc-text"> IO 流体系图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fileinputstream"><span class="toc-number">20.5.3.</span> <span class="toc-text"> FileInputStream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fileoutputstream"><span class="toc-number">20.5.4.</span> <span class="toc-text"> FileOutputStream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6"><span class="toc-number">20.5.5.</span> <span class="toc-text"> 拷贝文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filereader%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6"><span class="toc-number">20.5.6.</span> <span class="toc-text"> FileReader (处理字符)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filewriter"><span class="toc-number">20.5.7.</span> <span class="toc-text"> FileWriter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E6%B5%81-%E5%A4%84%E7%90%86%E6%B5%81"><span class="toc-number">20.5.8.</span> <span class="toc-text"> 节点流 处理流</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81-bufferedreader-bufferedwriter"><span class="toc-number">20.5.8.1.</span> <span class="toc-text"> 字符流 BufferedReader BufferedWriter</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81-bufferedinputstream-bufferedoutputstream"><span class="toc-number">20.5.9.</span> <span class="toc-text"> 字节流 BufferedInputStream BufferedOutputStream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%B5%81-objectinputstream-objectoutputstream"><span class="toc-number">20.5.10.</span> <span class="toc-text"> 对象流 ObjectInputStream ObjectOutputStream</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-8"><span class="toc-number">20.5.10.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%86%E8%8A%82-11"><span class="toc-number">20.5.10.2.</span> <span class="toc-text"> 细节</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-number">20.5.11.</span> <span class="toc-text"> 标准输入输出流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81-inputstreamreader-outputstreamwriter"><span class="toc-number">20.5.12.</span> <span class="toc-text"> 转换流 InputStreamReader OutputStreamWriter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-9"><span class="toc-number">20.5.12.1.</span> <span class="toc-text"> 基本介绍</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81-printstream%E5%AD%97%E8%8A%82%E6%B5%81-printwriter%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-number">20.5.13.</span> <span class="toc-text"> 打印流 PrintStream (字节流) PrintWriter (字符流)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties-2"><span class="toc-number">20.6.</span> <span class="toc-text"> Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-10"><span class="toc-number">20.6.1.</span> <span class="toc-text"> 基本介绍</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C"><span class="toc-number">21.</span> <span class="toc-text"> 网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1"><span class="toc-number">21.1.</span> <span class="toc-text"> 网络通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C-2"><span class="toc-number">21.2.</span> <span class="toc-text"> 网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80"><span class="toc-number">21.3.</span> <span class="toc-text"> IP 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D-%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">21.4.</span> <span class="toc-text"> 域名 端口号</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D"><span class="toc-number">21.4.1.</span> <span class="toc-text"> 域名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">21.4.2.</span> <span class="toc-text"> 端口号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AEtcpip"><span class="toc-number">21.5.</span> <span class="toc-text"> 网络协议 (TCP&#x2F;IP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp-udp"><span class="toc-number">21.6.</span> <span class="toc-text"> TCP UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE"><span class="toc-number">21.6.1.</span> <span class="toc-text"> TCP 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE"><span class="toc-number">21.6.2.</span> <span class="toc-text"> UDP 协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inetaddress%E7%B1%BB"><span class="toc-number">21.7.</span> <span class="toc-text"> InetAddress 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#socket"><span class="toc-number">21.8.</span> <span class="toc-text"> Socket</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-11"><span class="toc-number">21.8.1.</span> <span class="toc-text"> 基本介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%AD%97%E8%8A%82%E6%B5%81%E7%BC%96%E7%A8%8B"><span class="toc-number">21.8.2.</span> <span class="toc-text"> TCP 字节流编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%AD%97%E7%AC%A6%E6%B5%81%E7%BC%96%E7%A8%8B"><span class="toc-number">21.8.3.</span> <span class="toc-text"> TCP 字符流编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">21.8.4.</span> <span class="toc-text"> 文件上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#netstat-%E6%8C%87%E4%BB%A4"><span class="toc-number">21.8.5.</span> <span class="toc-text"> netstat 指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E7%9A%84%E7%A7%98%E5%AF%86"><span class="toc-number">21.8.6.</span> <span class="toc-text"> TCP 的秘密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E5%8E%9F%E7%90%86"><span class="toc-number">21.8.7.</span> <span class="toc-text"> UDP 原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">21.8.8.</span> <span class="toc-text"> 请求转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">21.8.9.</span> <span class="toc-text"> 请求重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">21.8.10.</span> <span class="toc-text"> Filter</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-number">22.</span> <span class="toc-text"> 反射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">22.1.</span> <span class="toc-text"> 反射基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E4%BC%98%E5%8C%96"><span class="toc-number">22.2.</span> <span class="toc-text"> 反射优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">22.3.</span> <span class="toc-text"> 反射常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96class"><span class="toc-number">22.4.</span> <span class="toc-text"> 获取 Class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD"><span class="toc-number">22.5.</span> <span class="toc-text"> 类加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E7%9A%84%E4%BA%94%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">22.6.</span> <span class="toc-text"> 类加载的五个阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%B1%BB%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">22.7.</span> <span class="toc-text"> 获取类的信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#java-lang-reflect-field%E7%B1%BB"><span class="toc-number">22.7.1.</span> <span class="toc-text"> java. lang. reflect. Field 类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java-lang-reflect-method%E7%B1%BB"><span class="toc-number">22.7.2.</span> <span class="toc-text"> java. lang. reflect. Method 类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java-lang-reflect-constructer%E7%B1%BB"><span class="toc-number">22.7.3.</span> <span class="toc-text"> java. lang. reflect. Constructer 类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E6%9A%B4%E7%A0%B4"><span class="toc-number">22.8.</span> <span class="toc-text"> 反射暴破</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#field"><span class="toc-number">22.8.1.</span> <span class="toc-text"> Field</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#method"><span class="toc-number">22.8.2.</span> <span class="toc-text"> Method</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#constructer"><span class="toc-number">22.8.3.</span> <span class="toc-text"> Constructer</span></a></li></ol></li></ol></li></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="" rel="bookmark" title="JavaSE">JavaSE</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="Maple Plus" src="../assets/avatar.png"><p class="name" itemprop="name">Maple Plus</p><div class="description" itemprop="description">为国民幸福而国家富强</div></div><nav class="state"><div class="item posts"><a href="../archives/"><span class="count">233</span><span class="name">文章</span></a></div><div class="item categories"><a href="../categories/"><span class="count">12</span><span class="name">分类</span></a></div><div class="item tags"><a href="../tags/"><span class="count">4</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/mapleplus" class="item github" title="https:&#x2F;&#x2F;github.com&#x2F;mapleplus"><i class="ic i-github"></i></a><a href="../mailto:fx20031215@163.com" class="item email" title="mailto:fx20031215@163.com"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="../index.html" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="../about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="../archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="../categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="../tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="../mysql-base-2024-11-26-MySQL/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/first/" title="分类于第一卷">第一卷</a></div><span><a href="../maozedong-first-001-%E6%B9%96%E5%8D%97%E5%86%9C%E6%B0%91%E8%BF%90%E5%8A%A8%E8%80%83%E5%AF%9F%E6%8A%A5%E5%91%8A/">湖南农民运动考察报告</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/fourth/" title="分类于第四卷">第四卷</a></div><span><a href="../maozedong-fourth-149-%E5%90%91%E5%85%A8%E5%9B%BD%E8%BF%9B%E5%86%9B%E7%9A%84%E5%91%BD%E4%BB%A4/">向全国进军的命令</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/fourth/" title="分类于第四卷">第四卷</a></div><span><a href="../maozedong-fourth-110-%E4%B8%AD%E5%9B%BD%E4%BA%BA%E6%B0%91%E8%A7%A3%E6%94%BE%E5%86%9B%E5%AE%A3%E8%A8%80/">中国人民解放军宣言</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/second/" title="分类于第二卷">第二卷</a></div><span><a href="../maozedong-second-030-%E4%BA%94%E5%9B%9B%E8%BF%90%E5%8A%A8/">五四运动</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/second/" title="分类于第二卷">第二卷</a></div><span><a href="../maozedong-second-025-%E6%8A%97%E6%97%A5%E6%B8%B8%E5%87%BB%E6%88%98%E4%BA%89%E7%9A%84%E6%88%98%E7%95%A5%E9%97%AE%E9%A2%98/">抗日游击战争的战略问题</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/second/" title="分类于第二卷">第二卷</a></div><span><a href="../maozedong-second-044-%E5%85%8B%E6%9C%8D%E6%8A%95%E9%99%8D%E5%8D%B1%E9%99%A9%EF%BC%8C%E5%8A%9B%E4%BA%89%E6%97%B6%E5%B1%80%E5%A5%BD%E8%BD%AC/">克服投降危险，力争时局好转</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/second/" title="分类于第二卷">第二卷</a></div><span><a href="../maozedong-second-036-%E8%8B%8F%E8%81%94%E5%88%A9%E7%9B%8A%E5%92%8C%E4%BA%BA%E7%B1%BB%E5%88%A9%E7%9B%8A%E7%9A%84%E4%B8%80%E8%87%B4/">苏联利益和人类利益的一致</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/fourth/" title="分类于第四卷">第四卷</a></div><span><a href="../maozedong-fourth-132-%E5%85%A8%E4%B8%96%E7%95%8C%E9%9D%A9%E5%91%BD%E5%8A%9B%E9%87%8F%E5%9B%A2%E7%BB%93%E8%B5%B7%E6%9D%A5%EF%BC%8C%E5%8F%8D%E5%AF%B9%E5%B8%9D%E5%9B%BD%E4%B8%BB%E4%B9%89%E7%9A%84%E4%BE%B5%E7%95%A5/">全世界革命力量团结起来，反对帝国主义的侵略</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/fourth/" title="分类于第四卷">第四卷</a></div><span><a href="../maozedong-fourth-099-%E5%85%B3%E4%BA%8E%E7%9B%AE%E5%89%8D%E5%9B%BD%E9%99%85%E5%BD%A2%E5%8A%BF%E7%9A%84%E5%87%A0%E7%82%B9%E4%BC%B0%E8%AE%A1/">关于目前国际形势的几点估计</a></span></li><li class="item"><div class="breadcrumb"><a href="../categories/maozedong/" title="分类于毛泽东选集">毛泽东选集</a><i class="ic i-angle-right"></i><a href="../categories/maozedong/third/" title="分类于第三卷">第三卷</a></div><span><a href="../maozedong-third-083-%E6%84%9A%E5%85%AC%E7%A7%BB%E5%B1%B1/">愚公移山</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2023 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">Maple Plus @ Maple Plus</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">1.4m 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">21:46</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
    ispost: true,
        path: `java-javase-2024-11-25-JavaSE/`,
        favicon: {
        show: `one piece!😎`,
        hide: `枫的最后一句🍁`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script src="https://s4.zstatic.net/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO&#x2F;+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn&#x2F;6Z&#x2F;hRTt8+pR6L4N2" crossorigin="anonymous" fetchpriority="high"></script><script src="../js/siteInit.js?v=0.4.16" type="module" fetchpriority="high" defer="defer"></script></body></html>